<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="安卓代码片段UI," />










<meta name="description" content="Dialog相关自定义布局的Dialog基类dialog">
<meta property="og:type" content="article">
<meta property="og:title" content="Dialog相关">
<meta property="og:url" content="http://shenbh.github.io/posts/1852176610/index.html">
<meta property="og:site_name" content="AB">
<meta property="og:description" content="Dialog相关自定义布局的Dialog基类dialog">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://shenbh.github.io/posts/1852176610/%E8%87%AA%E5%AE%9A%E4%B9%89dialog.png">
<meta property="og:image" content="https://tva3.sinaimg.cn/large/981009fdgy1gcbrxiljh8j20u01o0dgy.jpg">
<meta property="og:image" content="https://tvax3.sinaimg.cn/large/981009fdgy1gcbrwu9mi0j20u01o0ab6.jpg">
<meta property="og:image" content="https://tvax1.sinaimg.cn/large/981009fdgy1gcbrvbikqej20bk06e3yh.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/981009fdly1gikdvhu2c1j20cg0o7tak.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/981009fdly1gikef203xmj20ch0p041b.jpg">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/981009fdly1gikef203xmj20ch0p041b.jpg">
<meta property="og:image" content="http://shenbh.github.io/posts/1852176610/dialog%E7%9A%84%E6%95%88%E6%9E%9C%E5%9B%BE.png">
<meta property="og:image" content="http://shenbh.github.io/posts/1852176610/dialog%E7%9A%84%E6%95%88%E6%9E%9C%E5%9B%BE1.png">
<meta property="article:published_time" content="2020-04-07T07:50:05.000Z">
<meta property="article:modified_time" content="2023-05-22T06:36:33.187Z">
<meta property="article:author" content="阿炳">
<meta property="article:tag" content="安卓代码片段UI">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://shenbh.github.io/posts/1852176610/%E8%87%AA%E5%AE%9A%E4%B9%89dialog.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":true,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://shenbh.github.io/posts/1852176610/"/>





  <title>Dialog相关 | AB</title>
  








<meta name="generator" content="Hexo 6.1.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">AB</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Just do IT Now.</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://shenbh.github.io/posts/1852176610/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AB">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Dialog相关</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-04-07T15:50:05+08:00">
                2020-04-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Dialog相关"><a href="#Dialog相关" class="headerlink" title="Dialog相关"></a>Dialog相关</h1><h2 id="自定义布局的Dialog"><a href="#自定义布局的Dialog" class="headerlink" title="自定义布局的Dialog"></a>自定义布局的Dialog</h2><p><strong>基类dialog</strong> </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.app.Activity;</span><br><span class="line"><span class="keyword">import</span> android.app.Dialog;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">BaseDialog</span> <span class="keyword">extends</span> <span class="title class_">Dialog</span> <span class="keyword">implements</span></span><br><span class="line">        <span class="title class_">android</span>.view.View.OnClickListener &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> Activity context;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BaseDialog</span><span class="params">(Activity context)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, R.style.Dialog);</span><br><span class="line">        <span class="built_in">this</span>.context = context;</span><br><span class="line">        getWindow().setBackgroundDrawableResource(android.R.color.transparent);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BaseDialog</span><span class="params">(Activity context, String transparent)</span> &#123;<span class="comment">//背景透明</span></span><br><span class="line">        <span class="built_in">super</span>(context, R.style.Dialog_transparent);</span><br><span class="line">        <span class="built_in">this</span>.context = context;</span><br><span class="line">        getWindow().setBackgroundDrawableResource(android.R.color.transparent);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BaseDialog</span><span class="params">(Activity context, <span class="type">int</span> resId)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, R.style.dialog_bottom);</span><br><span class="line">        <span class="built_in">this</span>.context = context;</span><br><span class="line">        setContentView(resId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BaseDialog</span><span class="params">(Activity context, <span class="type">int</span> resId, <span class="type">int</span> styleId)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, styleId);</span><br><span class="line">        <span class="built_in">this</span>.context = context;</span><br><span class="line">        setContentView(resId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        initView();</span><br><span class="line">        initData();</span><br><span class="line">        setListener();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initView</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initData</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setListener</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>style.xml中</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--背景透明的弹窗风格--&gt;</span><br><span class="line">&lt;style name=<span class="string">&quot;dialog_common&quot;</span> parent=<span class="string">&quot;@style/Dialog&quot;</span>&gt;</span><br><span class="line">    &lt;item name=<span class="string">&quot;android:windowBackground&quot;</span>&gt;<span class="meta">@android</span>:color/transparent&lt;/item&gt;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">            </span><br><span class="line">&lt;style name=<span class="string">&quot;dialog_animation&quot;</span> parent=<span class="string">&quot;android:Animation&quot;</span>&gt;</span><br><span class="line">    &lt;item name=<span class="string">&quot;android:windowEnterAnimation&quot;</span>&gt;<span class="meta">@anim</span>/dialog_enter&lt;/item&gt;</span><br><span class="line">    &lt;item name=<span class="string">&quot;android:windowExitAnimation&quot;</span>&gt;<span class="meta">@anim</span>/dialog_exit&lt;/item&gt;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;style name=<span class="string">&quot;Dialog&quot;</span> parent=<span class="string">&quot;@android:style/Theme.Dialog&quot;</span>&gt;</span><br><span class="line">	&lt;item name=<span class="string">&quot;android:windowFrame&quot;</span>&gt;<span class="meta">@null</span>&lt;/item&gt;</span><br><span class="line">	&lt;item name=<span class="string">&quot;android:windowNoTitle&quot;</span>&gt;<span class="literal">true</span>&lt;/item&gt;</span><br><span class="line">	&lt;item name=<span class="string">&quot;android:windowIsFloating&quot;</span>&gt;<span class="literal">true</span>&lt;/item&gt;</span><br><span class="line">	&lt;item name=<span class="string">&quot;android:windowContentOverlay&quot;</span>&gt;<span class="meta">@null</span>&lt;/item&gt;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;style name=<span class="string">&quot;dialog_bottom&quot;</span> parent=<span class="string">&quot;@style/dialog_common&quot;</span>&gt;</span><br><span class="line">	&lt;item name=<span class="string">&quot;android:windowNoTitle&quot;</span>&gt;<span class="literal">true</span>&lt;/item&gt;</span><br><span class="line">	&lt;item name=<span class="string">&quot;android:windowAnimationStyle&quot;</span>&gt;<span class="meta">@style</span>/dialog_animation&lt;/item&gt;</span><br><span class="line">	&lt;item name=<span class="string">&quot;android:windowContentOverlay&quot;</span>&gt;<span class="meta">@null</span>&lt;/item&gt;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;style name=<span class="string">&quot;Dialog_transparent&quot;</span> parent=<span class="string">&quot;@android:style/Theme.Dialog&quot;</span>&gt;</span><br><span class="line">	&lt;item name=<span class="string">&quot;android:windowFrame&quot;</span>&gt;<span class="meta">@null</span>&lt;/item&gt;</span><br><span class="line">	&lt;item name=<span class="string">&quot;android:windowNoTitle&quot;</span>&gt;<span class="literal">true</span>&lt;/item&gt;</span><br><span class="line">	&lt;item name=<span class="string">&quot;android:windowIsFloating&quot;</span>&gt;<span class="literal">true</span>&lt;/item&gt;</span><br><span class="line">	&lt;item name=<span class="string">&quot;android:windowContentOverlay&quot;</span>&gt;<span class="meta">@null</span>&lt;/item&gt;</span><br><span class="line">	&lt;item name=<span class="string">&quot;android:windowBackground&quot;</span>&gt;<span class="meta">@color</span>/transparent&lt;/item&gt;</span><br><span class="line">	&lt;item name=<span class="string">&quot;android:backgroundDimEnabled&quot;</span>&gt;<span class="literal">false</span>&lt;/item&gt;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">&lt;style name=<span class="string">&quot;PopupAnimation&quot;</span> mce_bogus=<span class="string">&quot;1&quot;</span> parent=<span class="string">&quot;android:Animation&quot;</span>&gt;</span><br><span class="line">    &lt;item name=<span class="string">&quot;android:windowEnterAnimation&quot;</span>&gt;<span class="meta">@anim</span>/push_in_style&lt;/item&gt;</span><br><span class="line">    &lt;item name=<span class="string">&quot;android:windowExitAnimation&quot;</span>&gt;<span class="meta">@anim</span>/push_out_style&lt;/item&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p><code>dialog_enter.xml</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">translate</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:duration</span>=<span class="string">&quot;400&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:toYDelta</span>=<span class="string">&quot;0%&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fillAfter</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fromYDelta</span>=<span class="string">&quot;100%p&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>dialog_exit.xml</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">translate</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:duration</span>=<span class="string">&quot;400&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fromYDelta</span>=<span class="string">&quot;0%&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fillAfter</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:toYDelta</span>=<span class="string">&quot;100%p&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br></pre></td></tr></table></figure>





<p><strong>创建自己的dialog</strong></p>
<p><img src="/posts/1852176610/%E8%87%AA%E5%AE%9A%E4%B9%89dialog.png" alt="image-20221025104747429"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FiltrateDataDialog</span> <span class="keyword">extends</span> <span class="title class_">BaseDialog</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> FiltrateDialogOnClick filtrateDialogOnClick;</span><br><span class="line">    <span class="keyword">private</span> TextView oneItemTv;</span><br><span class="line">    <span class="keyword">private</span> TextView twoItemTv;</span><br><span class="line">    <span class="keyword">private</span> TextView threeItemTv;</span><br><span class="line">    <span class="keyword">private</span> TextView cancelItemTv;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">FiltrateDataDialog</span><span class="params">(Activity context)</span> &#123;</span><br><span class="line">    <span class="comment">//自定义的布局</span></span><br><span class="line">        <span class="built_in">super</span>(context, R.layout.dialog_filtrate);</span><br><span class="line"></span><br><span class="line">        <span class="type">Window</span> <span class="variable">window</span> <span class="operator">=</span> getWindow();</span><br><span class="line">        window.setWindowAnimations(R.style.PopupAnimation);</span><br><span class="line">        window.setGravity(Gravity.BOTTOM);</span><br><span class="line">        window.getDecorView().setPadding(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        WindowManager.<span class="type">LayoutParams</span> <span class="variable">lp</span> <span class="operator">=</span> window.getAttributes();</span><br><span class="line">        lp.width = WindowManager.LayoutParams.MATCH_PARENT;</span><br><span class="line">        lp.height = WindowManager.LayoutParams.WRAP_CONTENT;</span><br><span class="line">        window.setAttributes(lp);</span><br><span class="line">        init();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initView</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.initView();</span><br><span class="line">        oneItemTv = (TextView) findViewById(R.id.dialog_filtrate_total_tv);</span><br><span class="line">        twoItemTv = (TextView) findViewById(R.id.tv_issue_costomer);</span><br><span class="line">        threeItemTv = (TextView) findViewById(R.id.tv_issue_main);</span><br><span class="line">        cancelItemTv = (TextView) findViewById(R.id.tv_issue_diss);</span><br><span class="line">        oneItemTv.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        twoItemTv.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        threeItemTv.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        cancelItemTv.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 提供对外的接口</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">FiltrateDialogOnClick</span>&#123;</span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">dialogOnClick</span><span class="params">(<span class="type">int</span> state, FiltrateDataDialog dialog)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFiltrateDialogOnClick</span><span class="params">(FiltrateDialogOnClick filtrateDialogOnClick)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.filtrateDialogOnClick = filtrateDialogOnClick;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>dialog_filtrate.xml</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/ll_issue&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignParentBottom</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/dialog_filtrate_total_tv&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;39dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;14dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;14dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;@drawable/dialog_picture_taker_normal_bg&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;历史总额&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;#444&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;15dp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_issue_costomer&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;39dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;14dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;14dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;15dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;@drawable/dialog_picture_taker_normal_bg&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;最近30天&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;#444&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;15dp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_issue_main&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;39dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;14dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;14dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;15dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;@drawable/dialog_picture_taker_normal_bg&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;最近7天&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;#444&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;15dp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_issue_diss&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;40dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginBottom</span>=<span class="string">&quot;14dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;14dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;14dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;15dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;@drawable/issue_dialog_diss&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;取消&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;#848484&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;15dp&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><code>push_in_style.xml</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">translate</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:duration</span>=<span class="string">&quot;300&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fromYDelta</span>=<span class="string">&quot;0&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:toYDelta</span>=<span class="string">&quot;100%p&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">alpha</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:duration</span>=<span class="string">&quot;300&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fromAlpha</span>=<span class="string">&quot;1.0&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:toAlpha</span>=<span class="string">&quot;0.5&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>push_out_style.xml</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">translate</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:duration</span>=<span class="string">&quot;300&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fromYDelta</span>=<span class="string">&quot;0&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:toYDelta</span>=<span class="string">&quot;100%p&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">alpha</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:duration</span>=<span class="string">&quot;300&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fromAlpha</span>=<span class="string">&quot;1.0&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:toAlpha</span>=<span class="string">&quot;0.5&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br></pre></td></tr></table></figure>





<h2 id="自定义布局的Dialog-选择日期Dialog"><a href="#自定义布局的Dialog-选择日期Dialog" class="headerlink" title="自定义布局的Dialog+选择日期Dialog"></a>自定义布局的Dialog+选择日期Dialog</h2><p><strong>效果图</strong></p>
<img src="https://tva3.sinaimg.cn/large/981009fdgy1gcbrxiljh8j20u01o0dgy.jpg" alt="自定义布局弹窗" style="zoom: 25%;">

<img src="https://tvax3.sinaimg.cn/large/981009fdgy1gcbrwu9mi0j20u01o0ab6.jpg" alt="选择日期弹窗" style="zoom:25%;">



<h3 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h3><p><strong>DateOrCityChooseLdy.java 基于WheelView的年月日选择器(城市选择器)</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.u1city.androidframe.Component.wheelview;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.app.Dialog;</span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.res.AssetManager;</span><br><span class="line"><span class="keyword">import</span> android.text.format.Time;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.View.OnClickListener;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"><span class="keyword">import</span> android.widget.Button;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.u1city.androidframe.R;</span><br><span class="line"><span class="keyword">import</span> com.u1city.androidframe.common.system.DateUtil;</span><br><span class="line"><span class="keyword">import</span> com.u1city.<span class="keyword">module</span>.common.Debug;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.xml.parsers.SAXParser;</span><br><span class="line"><span class="keyword">import</span> javax.xml.parsers.SAXParserFactory;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> linjy</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 2015-12-18 16:13:08</span></span><br><span class="line"><span class="comment"> * 类说明：基于WheelView的年月日选择器(城市选择器)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DateOrCityChooseLdy</span> <span class="keyword">extends</span> <span class="title class_">Dialog</span> <span class="keyword">implements</span> <span class="title class_">OnClickListener</span>, OnWheelChangedListener &#123;</span><br><span class="line">    <span class="comment">/************* 日期选择 *****************/</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Context context;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> View contentView;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">visibleItems</span> <span class="operator">=</span> <span class="number">7</span>;</span><br><span class="line">    <span class="keyword">private</span> WheelView yearWv;</span><br><span class="line">    <span class="keyword">private</span> WheelView monthWv;</span><br><span class="line">    <span class="keyword">private</span> WheelView dayWv;</span><br><span class="line">    <span class="keyword">public</span> Button cancelBtn;</span><br><span class="line">    <span class="keyword">public</span> TextView confirmBtn;</span><br><span class="line">    <span class="keyword">public</span> TextView titleView;</span><br><span class="line">    <span class="keyword">private</span> DateOrCityChooseListener dateChooseListener;</span><br><span class="line">    <span class="keyword">private</span> String[] years;</span><br><span class="line">    <span class="keyword">private</span> String[] months;</span><br><span class="line">    <span class="keyword">private</span> String[] days;</span><br><span class="line">    <span class="type">int</span> <span class="variable">minYear</span> <span class="operator">=</span> <span class="number">1900</span>;<span class="comment">//选择日期的最小年 默认1940 //应燕谷坊要求修改最小年默认值为1900 by yangn</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">maxMonth</span> <span class="operator">=</span> <span class="number">12</span>;<span class="comment">//选择日期的最大月份</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> isDatechoose;<span class="comment">// 是否日期选择 否城市选择</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">TAG</span> <span class="operator">=</span> <span class="string">&quot;DateChooseLdy&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> isToToday;<span class="comment">// 日期是否只到当前日期</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> maxDay;<span class="comment">//选择日期的最大日数</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/************* 城市选择 *****************/</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 所有省</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String[] provinceDatas;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * key - 省 value - 市</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Map&lt;String, String[]&gt; citiesMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, String[]&gt;();</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * key - 市 values - 区</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Map&lt;String, String[]&gt; districsMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, String[]&gt;();</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * key - 区 values - 邮编</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Map&lt;String, String&gt; zipCodesMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, String&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 当前省的名称</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String currentProvince;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 当前市的名称</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String currentCity;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 当前区的名称</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">String</span> <span class="variable">currentDistrict</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 当前区的邮政编码</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">String</span> <span class="variable">currentZipCode</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> ArrayWheelAdapter&lt;String&gt; yearAdapter;<span class="comment">//年份apapter</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DateOrCityChooseLdy</span><span class="params">(Context context, <span class="keyword">final</span> DateOrCityChooseListener dateChooseListener, <span class="type">boolean</span> isDatechoose)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context);</span><br><span class="line">        <span class="built_in">this</span>.context = context;</span><br><span class="line">        <span class="built_in">this</span>.dateChooseListener = dateChooseListener;</span><br><span class="line">        <span class="built_in">this</span>.isDatechoose = isDatechoose;</span><br><span class="line">        <span class="comment">/*** 注：这边共用城市选择的wheelView ***/</span></span><br><span class="line">        contentView = (ViewGroup) LayoutInflater.from(context).inflate(R.layout.layout_city_choose_ldy, <span class="literal">null</span>);</span><br><span class="line">        yearWv = (WheelView) contentView.findViewById(R.id.layout_city_choose_province_wv);</span><br><span class="line">        yearWv.addChangingListener(<span class="built_in">this</span>);</span><br><span class="line">        monthWv = (WheelView) contentView.findViewById(R.id.layout_city_choose_city_wv);</span><br><span class="line">        monthWv.addChangingListener(<span class="built_in">this</span>);</span><br><span class="line">        dayWv = (WheelView) contentView.findViewById(R.id.layout_city_choose_district_wv);</span><br><span class="line">        dayWv.addChangingListener(<span class="built_in">this</span>);</span><br><span class="line">        yearWv.setShadowColor(<span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>);<span class="comment">// 设置颜色</span></span><br><span class="line">        monthWv.setShadowColor(<span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>);</span><br><span class="line">        dayWv.setShadowColor(<span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>);</span><br><span class="line">        setVisibleItems(visibleItems);</span><br><span class="line"></span><br><span class="line">        cancelBtn = (Button) contentView.findViewById(R.id.layout_city_choose_cancel_btn);</span><br><span class="line">        confirmBtn = (Button) contentView.findViewById(R.id.layout_city_choose_confirm_btn);</span><br><span class="line"></span><br><span class="line">        cancelBtn.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        confirmBtn.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line">        titleView = (TextView) contentView.findViewById(R.id.layout_city_choose_title_tv);</span><br><span class="line">        setContentView(contentView);</span><br><span class="line">        initDates();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DateOrCityChooseLdy</span><span class="params">(Context context, <span class="type">int</span> style, <span class="keyword">final</span> DateOrCityChooseListener dateChooseListener, <span class="type">boolean</span> isDatechoose)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, style);</span><br><span class="line">        <span class="built_in">this</span>.context = context;</span><br><span class="line">        <span class="built_in">this</span>.dateChooseListener = dateChooseListener;</span><br><span class="line">        <span class="built_in">this</span>.isDatechoose = isDatechoose;</span><br><span class="line">        contentView = (ViewGroup) LayoutInflater.from(context).inflate(R.layout.layout_city_choose_ldy, <span class="literal">null</span>);</span><br><span class="line">        yearWv = (WheelView) contentView.findViewById(R.id.layout_city_choose_province_wv);</span><br><span class="line">        yearWv.addChangingListener(<span class="built_in">this</span>);</span><br><span class="line">        monthWv = (WheelView) contentView.findViewById(R.id.layout_city_choose_city_wv);</span><br><span class="line">        monthWv.addChangingListener(<span class="built_in">this</span>);</span><br><span class="line">        dayWv = (WheelView) contentView.findViewById(R.id.layout_city_choose_district_wv);</span><br><span class="line">        dayWv.addChangingListener(<span class="built_in">this</span>);</span><br><span class="line">        yearWv.setShadowColor(<span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>);<span class="comment">// 设置颜色</span></span><br><span class="line">        monthWv.setShadowColor(<span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>);</span><br><span class="line">        dayWv.setShadowColor(<span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>);</span><br><span class="line">        setVisibleItems(visibleItems);</span><br><span class="line">        cancelBtn = (Button) contentView.findViewById(R.id.layout_city_choose_cancel_btn);</span><br><span class="line">        confirmBtn = (Button) contentView.findViewById(R.id.layout_city_choose_confirm_btn);</span><br><span class="line">        cancelBtn.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        confirmBtn.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        titleView = (TextView) contentView.findViewById(R.id.layout_city_choose_title_tv);</span><br><span class="line">        setContentView(contentView);</span><br><span class="line"></span><br><span class="line">        initDates();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DateOrCityChooseLdy</span><span class="params">(Context context, <span class="type">int</span> style, <span class="keyword">final</span> DateOrCityChooseListener dateChooseListener, <span class="type">boolean</span> isDatechoose, <span class="type">int</span> minYear)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, style);</span><br><span class="line">        <span class="built_in">this</span>.context = context;</span><br><span class="line">        <span class="built_in">this</span>.dateChooseListener = dateChooseListener;</span><br><span class="line">        <span class="built_in">this</span>.isDatechoose = isDatechoose;</span><br><span class="line">        <span class="built_in">this</span>.minYear = minYear;</span><br><span class="line">        contentView = (ViewGroup) LayoutInflater.from(context).inflate(R.layout.layout_city_choose_ldy, <span class="literal">null</span>);</span><br><span class="line">        yearWv = (WheelView) contentView.findViewById(R.id.layout_city_choose_province_wv);</span><br><span class="line">        yearWv.addChangingListener(<span class="built_in">this</span>);</span><br><span class="line">        monthWv = (WheelView) contentView.findViewById(R.id.layout_city_choose_city_wv);</span><br><span class="line">        monthWv.addChangingListener(<span class="built_in">this</span>);</span><br><span class="line">        dayWv = (WheelView) contentView.findViewById(R.id.layout_city_choose_district_wv);</span><br><span class="line">        dayWv.addChangingListener(<span class="built_in">this</span>);</span><br><span class="line">        yearWv.setShadowColor(<span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>);<span class="comment">// 设置颜色</span></span><br><span class="line">        monthWv.setShadowColor(<span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>);</span><br><span class="line">        dayWv.setShadowColor(<span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>);</span><br><span class="line">        setVisibleItems(visibleItems);</span><br><span class="line">        cancelBtn = (Button) contentView.findViewById(R.id.layout_city_choose_cancel_btn);</span><br><span class="line">        confirmBtn = (TextView) contentView.findViewById(R.id.layout_city_choose_confirm_btn);</span><br><span class="line">        cancelBtn.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        confirmBtn.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        titleView = (TextView) contentView.findViewById(R.id.layout_city_choose_title_tv);</span><br><span class="line">        setContentView(contentView);</span><br><span class="line"></span><br><span class="line">        initDates();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DateOrCityChooseLdy</span><span class="params">(Context context, <span class="type">int</span> style, <span class="type">boolean</span> isDatechoose, <span class="type">int</span> minYear)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, style);</span><br><span class="line">        <span class="built_in">this</span>.context = context;</span><br><span class="line">        <span class="built_in">this</span>.isDatechoose = isDatechoose;</span><br><span class="line">        <span class="built_in">this</span>.minYear = minYear;</span><br><span class="line">        contentView = (ViewGroup) LayoutInflater.from(context).inflate(R.layout.layout_city_choose_ldy, <span class="literal">null</span>);</span><br><span class="line">        yearWv = (WheelView) contentView.findViewById(R.id.layout_city_choose_province_wv);</span><br><span class="line">        yearWv.addChangingListener(<span class="built_in">this</span>);</span><br><span class="line">        monthWv = (WheelView) contentView.findViewById(R.id.layout_city_choose_city_wv);</span><br><span class="line">        monthWv.addChangingListener(<span class="built_in">this</span>);</span><br><span class="line">        dayWv = (WheelView) contentView.findViewById(R.id.layout_city_choose_district_wv);</span><br><span class="line">        dayWv.addChangingListener(<span class="built_in">this</span>);</span><br><span class="line">        yearWv.setShadowColor(<span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>);<span class="comment">// 设置颜色</span></span><br><span class="line">        monthWv.setShadowColor(<span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>);</span><br><span class="line">        dayWv.setShadowColor(<span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>);</span><br><span class="line">        setVisibleItems(visibleItems);</span><br><span class="line">        cancelBtn = (Button) contentView.findViewById(R.id.layout_city_choose_cancel_btn);</span><br><span class="line">        confirmBtn = (TextView) contentView.findViewById(R.id.layout_city_choose_confirm_btn);</span><br><span class="line">        cancelBtn.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        confirmBtn.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        titleView = (TextView) contentView.findViewById(R.id.layout_city_choose_title_tv);</span><br><span class="line">        setContentView(contentView);</span><br><span class="line">        initDates();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DateOrCityChooseLdy</span><span class="params">(Context context, <span class="type">int</span> style, <span class="type">boolean</span> isDatechoose, <span class="type">int</span> minYear, <span class="type">int</span> maxMonth)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, style);</span><br><span class="line">        <span class="built_in">this</span>.context = context;</span><br><span class="line">        <span class="built_in">this</span>.isDatechoose = isDatechoose;</span><br><span class="line">        <span class="built_in">this</span>.minYear = minYear;</span><br><span class="line">        <span class="built_in">this</span>.maxMonth = maxMonth;</span><br><span class="line">        contentView = (ViewGroup) LayoutInflater.from(context).inflate(R.layout.layout_city_choose_ldy, <span class="literal">null</span>);</span><br><span class="line">        yearWv = (WheelView) contentView.findViewById(R.id.layout_city_choose_province_wv);</span><br><span class="line">        yearWv.addChangingListener(<span class="built_in">this</span>);</span><br><span class="line">        monthWv = (WheelView) contentView.findViewById(R.id.layout_city_choose_city_wv);</span><br><span class="line">        monthWv.addChangingListener(<span class="built_in">this</span>);</span><br><span class="line">        dayWv = (WheelView) contentView.findViewById(R.id.layout_city_choose_district_wv);</span><br><span class="line">        dayWv.addChangingListener(<span class="built_in">this</span>);</span><br><span class="line">        yearWv.setShadowColor(<span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>);<span class="comment">// 设置颜色</span></span><br><span class="line">        monthWv.setShadowColor(<span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>);</span><br><span class="line">        dayWv.setShadowColor(<span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>);</span><br><span class="line">        setVisibleItems(visibleItems);</span><br><span class="line">        cancelBtn = (Button) contentView.findViewById(R.id.layout_city_choose_cancel_btn);</span><br><span class="line">        confirmBtn = (TextView) contentView.findViewById(R.id.layout_city_choose_confirm_btn);</span><br><span class="line">        cancelBtn.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        confirmBtn.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        titleView = (TextView) contentView.findViewById(R.id.layout_city_choose_title_tv);</span><br><span class="line">        setContentView(contentView);</span><br><span class="line">        initDates();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DateOrCityChooseLdy</span><span class="params">(Context context, <span class="type">int</span> style, <span class="type">boolean</span> isDatechoose)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, style);</span><br><span class="line">        <span class="built_in">this</span>.context = context;</span><br><span class="line">        <span class="built_in">this</span>.isDatechoose = isDatechoose;</span><br><span class="line">        contentView = (ViewGroup) LayoutInflater.from(context).inflate(R.layout.layout_city_choose_ldy, <span class="literal">null</span>);</span><br><span class="line">        yearWv = (WheelView) contentView.findViewById(R.id.layout_city_choose_province_wv);</span><br><span class="line">        yearWv.addChangingListener(<span class="built_in">this</span>);</span><br><span class="line">        monthWv = (WheelView) contentView.findViewById(R.id.layout_city_choose_city_wv);</span><br><span class="line">        monthWv.addChangingListener(<span class="built_in">this</span>);</span><br><span class="line">        dayWv = (WheelView) contentView.findViewById(R.id.layout_city_choose_district_wv);</span><br><span class="line">        dayWv.addChangingListener(<span class="built_in">this</span>);</span><br><span class="line">        yearWv.setShadowColor(<span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>);<span class="comment">// 设置颜色</span></span><br><span class="line">        monthWv.setShadowColor(<span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>);</span><br><span class="line">        dayWv.setShadowColor(<span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>);</span><br><span class="line">        setVisibleItems(visibleItems);</span><br><span class="line">        cancelBtn = (Button) contentView.findViewById(R.id.layout_city_choose_cancel_btn);</span><br><span class="line">        confirmBtn = (TextView) contentView.findViewById(R.id.layout_city_choose_confirm_btn);</span><br><span class="line">        cancelBtn.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        confirmBtn.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        titleView = (TextView) contentView.findViewById(R.id.layout_city_choose_title_tv);</span><br><span class="line">        setContentView(contentView);</span><br><span class="line">        initDates();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DateOrCityChooseLdy</span><span class="params">(Context context, <span class="type">int</span> style, <span class="type">boolean</span> isDatechoose, <span class="type">boolean</span> isToToday)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, style);</span><br><span class="line">        <span class="built_in">this</span>.context = context;</span><br><span class="line">        <span class="built_in">this</span>.isDatechoose = isDatechoose;</span><br><span class="line">        <span class="built_in">this</span>.isToToday = isToToday;</span><br><span class="line">        contentView = (ViewGroup) LayoutInflater.from(context).inflate(R.layout.layout_city_choose_ldy, <span class="literal">null</span>);</span><br><span class="line">        yearWv = (WheelView) contentView.findViewById(R.id.layout_city_choose_province_wv);</span><br><span class="line">        yearWv.addChangingListener(<span class="built_in">this</span>);</span><br><span class="line">        monthWv = (WheelView) contentView.findViewById(R.id.layout_city_choose_city_wv);</span><br><span class="line">        monthWv.addChangingListener(<span class="built_in">this</span>);</span><br><span class="line">        dayWv = (WheelView) contentView.findViewById(R.id.layout_city_choose_district_wv);</span><br><span class="line">        dayWv.addChangingListener(<span class="built_in">this</span>);</span><br><span class="line">        yearWv.setShadowColor(<span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>);<span class="comment">// 设置颜色</span></span><br><span class="line">        monthWv.setShadowColor(<span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>);</span><br><span class="line">        dayWv.setShadowColor(<span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>, <span class="number">0xf0f0f0</span>);</span><br><span class="line">        setVisibleItems(visibleItems);</span><br><span class="line">        cancelBtn = (Button) contentView.findViewById(R.id.layout_city_choose_cancel_btn);</span><br><span class="line">        confirmBtn = (TextView) contentView.findViewById(R.id.layout_city_choose_confirm_btn);</span><br><span class="line">        cancelBtn.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        confirmBtn.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        titleView = (TextView) contentView.findViewById(R.id.layout_city_choose_title_tv);</span><br><span class="line">        setContentView(contentView);</span><br><span class="line">        initDates();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DateOrCityChooseLdy</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(context, <span class="literal">null</span>, <span class="literal">true</span>);</span><br><span class="line">        <span class="built_in">this</span>.isDatechoose = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 更新显示日</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">updateData</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isDatechoose) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">currentItem</span> <span class="operator">=</span> yearWv.getCurrentItem();</span><br><span class="line">            <span class="type">String</span> <span class="variable">string</span> <span class="operator">=</span> years[currentItem];</span><br><span class="line"></span><br><span class="line">            <span class="type">Time</span> <span class="variable">time</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Time</span>();</span><br><span class="line">            time.setToNow();</span><br><span class="line">            <span class="keyword">if</span> (string.equals(time.year + <span class="string">&quot;年&quot;</span>)) &#123;</span><br><span class="line">                months = <span class="keyword">new</span> <span class="title class_">String</span>[maxMonth];</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; maxMonth; i++) &#123;</span><br><span class="line">                    months[i] = (i + <span class="number">1</span>) + <span class="string">&quot;月&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                months = <span class="keyword">new</span> <span class="title class_">String</span>[<span class="number">12</span>];</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">12</span>; i++) &#123;</span><br><span class="line">                    months[i] = (i + <span class="number">1</span>) + <span class="string">&quot;月&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            monthWv.setViewAdapter(<span class="keyword">new</span> <span class="title class_">ArrayWheelAdapter</span>&lt;String&gt;(context, months));</span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> string.substring(<span class="number">0</span>, string.length() - <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">            <span class="type">int</span> <span class="variable">currentItem2</span> <span class="operator">=</span> monthWv.getCurrentItem();</span><br><span class="line">            <span class="keyword">if</span> (months.length &lt; currentItem2 + <span class="number">1</span>) &#123;</span><br><span class="line">                currentItem2 = months.length - <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">String</span> <span class="variable">string2</span> <span class="operator">=</span> months[currentItem2];</span><br><span class="line">            monthWv.setCurrentItem(currentItem2, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">            <span class="type">boolean</span> <span class="variable">isCurrentYearMonth</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">if</span> (string2.equals((time.month + <span class="number">1</span>) + <span class="string">&quot;月&quot;</span>) &amp;&amp; string.equals(time.year + <span class="string">&quot;年&quot;</span>)) &#123;</span><br><span class="line">                isCurrentYearMonth = <span class="literal">true</span>;<span class="comment">//wheelview选中年月为当前年月</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> string2.substring(<span class="number">0</span>, string2.length() - <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (Integer.parseInt(str1) % <span class="number">4</span> == <span class="number">0</span> &amp;&amp; Integer.parseInt(str1) % <span class="number">100</span> != <span class="number">0</span> || Integer.parseInt(str1) % <span class="number">400</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (str2.equals(<span class="string">&quot;1&quot;</span>) || str2.equals(<span class="string">&quot;3&quot;</span>) || str2.equals(<span class="string">&quot;5&quot;</span>) || str2.equals(<span class="string">&quot;7&quot;</span>) || str2.equals(<span class="string">&quot;8&quot;</span>) || str2.equals(<span class="string">&quot;10&quot;</span>) || str2.equals(<span class="string">&quot;12&quot;</span>)) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (isToToday &amp;&amp; isCurrentYearMonth) &#123;</span><br><span class="line">                        maxDay = DateUtil.getDay();</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        maxDay = <span class="number">31</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    days = <span class="keyword">new</span> <span class="title class_">String</span>[maxDay];</span><br><span class="line">                    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; maxDay; i++) &#123;</span><br><span class="line">                        days[i] = (i + <span class="number">1</span>) + <span class="string">&quot;日&quot;</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (str2.equals(<span class="string">&quot;4&quot;</span>) || str2.equals(<span class="string">&quot;6&quot;</span>) || str2.equals(<span class="string">&quot;9&quot;</span>) || str2.equals(<span class="string">&quot;11&quot;</span>)) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (isToToday &amp;&amp; isCurrentYearMonth) &#123;</span><br><span class="line">                        maxDay = DateUtil.getDay();</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        maxDay = <span class="number">30</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    days = <span class="keyword">new</span> <span class="title class_">String</span>[maxDay];</span><br><span class="line">                    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; maxDay; i++) &#123;</span><br><span class="line">                        days[i] = (i + <span class="number">1</span>) + <span class="string">&quot;日&quot;</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (isToToday &amp;&amp; isCurrentYearMonth) &#123;</span><br><span class="line">                        maxDay = DateUtil.getDay();</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        maxDay = <span class="number">29</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    days = <span class="keyword">new</span> <span class="title class_">String</span>[maxDay];</span><br><span class="line">                    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; maxDay; i++) &#123;</span><br><span class="line">                        days[i] = (i + <span class="number">1</span>) + <span class="string">&quot;日&quot;</span>;</span><br><span class="line">                        Debug.e(TAG, <span class="string">&quot;year:&quot;</span> + <span class="string">&quot; 2月：&quot;</span> + string + days[i]);</span><br><span class="line">                        System.out.print(<span class="string">&quot;year:&quot;</span> + <span class="string">&quot; 2月：&quot;</span> + string + days[i]);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (str2.equals(<span class="string">&quot;1&quot;</span>) || str2.equals(<span class="string">&quot;3&quot;</span>) || str2.equals(<span class="string">&quot;5&quot;</span>) || str2.equals(<span class="string">&quot;7&quot;</span>) || str2.equals(<span class="string">&quot;8&quot;</span>) || str2.equals(<span class="string">&quot;10&quot;</span>) || str2.equals(<span class="string">&quot;12&quot;</span>)) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (isToToday &amp;&amp; isCurrentYearMonth) &#123;</span><br><span class="line">                        maxDay = DateUtil.getDay();</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        maxDay = <span class="number">31</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    days = <span class="keyword">new</span> <span class="title class_">String</span>[maxDay];</span><br><span class="line">                    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; maxDay; i++) &#123;</span><br><span class="line">                        days[i] = (i + <span class="number">1</span>) + <span class="string">&quot;日&quot;</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (str2.equals(<span class="string">&quot;4&quot;</span>) || str2.equals(<span class="string">&quot;6&quot;</span>) || str2.equals(<span class="string">&quot;9&quot;</span>) || str2.equals(<span class="string">&quot;11&quot;</span>)) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (isToToday &amp;&amp; isCurrentYearMonth) &#123;</span><br><span class="line">                        maxDay = DateUtil.getDay();</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        maxDay = <span class="number">30</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    days = <span class="keyword">new</span> <span class="title class_">String</span>[maxDay];</span><br><span class="line">                    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; maxDay; i++) &#123;</span><br><span class="line">                        days[i] = (i + <span class="number">1</span>) + <span class="string">&quot;日&quot;</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (isToToday &amp;&amp; isCurrentYearMonth) &#123;</span><br><span class="line">                        maxDay = DateUtil.getDay();</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        maxDay = <span class="number">28</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    days = <span class="keyword">new</span> <span class="title class_">String</span>[maxDay];</span><br><span class="line">                    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; maxDay; i++) &#123;</span><br><span class="line">                        days[i] = (i + <span class="number">1</span>) + <span class="string">&quot;日&quot;</span>;</span><br><span class="line">                        Debug.e(TAG, <span class="string">&quot;year:&quot;</span> + <span class="string">&quot; 2月：&quot;</span> + string + days[i]);</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            dayWv.setViewAdapter(<span class="keyword">new</span> <span class="title class_">ArrayWheelAdapter</span>&lt;String&gt;(context, days));</span><br><span class="line">            dayWv.setCurrentItem(<span class="number">0</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (yearWv.getViewAdapter() == <span class="literal">null</span>) &#123;</span><br><span class="line">                yearWv.setViewAdapter(<span class="keyword">new</span> <span class="title class_">ArrayWheelAdapter</span>&lt;String&gt;(context, provinceDatas));</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            updateCities();</span><br><span class="line"></span><br><span class="line">            updateDistrict();</span><br><span class="line"></span><br><span class="line">            updateZipCode(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 更新显示的城市数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">updateCities</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">provinceItem</span> <span class="operator">=</span> yearWv.getCurrentItem();</span><br><span class="line"></span><br><span class="line">        currentProvince = provinceDatas[provinceItem];</span><br><span class="line">        String[] cities = citiesMap.get(currentProvince);</span><br><span class="line">        <span class="keyword">if</span> (cities == <span class="literal">null</span>) &#123;</span><br><span class="line">            cities = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;&quot;</span>&#125;;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        monthWv.setViewAdapter(<span class="keyword">new</span> <span class="title class_">ArrayWheelAdapter</span>&lt;String&gt;(context, cities));</span><br><span class="line">        monthWv.setCurrentItem(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 更新显示的区县数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">updateDistrict</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">cityItem</span> <span class="operator">=</span> monthWv.getCurrentItem();</span><br><span class="line">        String[] cities = citiesMap.get(currentProvince);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (cities == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        currentCity = cities[cityItem];</span><br><span class="line"></span><br><span class="line">        String[] areas = districsMap.get(currentCity);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (areas == <span class="literal">null</span>) &#123;</span><br><span class="line">            areas = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;&quot;</span>&#125;;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        dayWv.setViewAdapter(<span class="keyword">new</span> <span class="title class_">ArrayWheelAdapter</span>&lt;String&gt;(context, areas));</span><br><span class="line">        dayWv.setCurrentItem(<span class="number">0</span>);</span><br><span class="line">        <span class="comment">// 增加此句，主要修复只选市，没选区时，一直显示昌平区问题</span></span><br><span class="line">        currentDistrict = districsMap.get(currentCity)[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 更新显示邮编</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">updateZipCode</span><span class="params">(<span class="type">int</span> position)</span> &#123;</span><br><span class="line">        currentDistrict = districsMap.get(currentCity)[position];</span><br><span class="line">        currentZipCode = zipCodesMap.get(currentDistrict);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getVisibleItems</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> visibleItems;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置可见条目数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setVisibleItems</span><span class="params">(<span class="type">int</span> visibleItems)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.visibleItems = visibleItems;</span><br><span class="line">        yearWv.setVisibleItems(visibleItems);</span><br><span class="line">        monthWv.setVisibleItems(visibleItems);</span><br><span class="line">        dayWv.setVisibleItems(visibleItems);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> DateOrCityChooseListener <span class="title function_">getDateChooseListener</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> dateChooseListener;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置选择器回调</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDateOrCityChooseListener</span><span class="params">(DateOrCityChooseListener dateChooseListener)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.dateChooseListener = dateChooseListener;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> View <span class="title function_">getContentView</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> contentView;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取当前年份、 获取当前省</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCurrentYear</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isDatechoose) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">currentItem</span> <span class="operator">=</span> yearWv.getCurrentItem();</span><br><span class="line">            <span class="type">String</span> <span class="variable">string</span> <span class="operator">=</span> years[currentItem];</span><br><span class="line">            <span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> string.substring(<span class="number">0</span>, string.length() - <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">return</span> str1;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> currentProvince;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取当前月份 、 获取当前城市</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCurrentMonth</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isDatechoose) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">currentItem2</span> <span class="operator">=</span> monthWv.getCurrentItem();</span><br><span class="line">            <span class="type">String</span> <span class="variable">string2</span> <span class="operator">=</span> months[currentItem2];</span><br><span class="line">            <span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> string2.substring(<span class="number">0</span>, string2.length() - <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">return</span> str2;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> currentCity;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取当前日 、 获取当前区</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCurrentDay</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isDatechoose) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">currentItem3</span> <span class="operator">=</span> dayWv.getCurrentItem();</span><br><span class="line">            <span class="type">String</span> <span class="variable">string3</span> <span class="operator">=</span> days[currentItem3];</span><br><span class="line">            <span class="type">String</span> <span class="variable">str3</span> <span class="operator">=</span> string3.substring(<span class="number">0</span>, string3.length() - <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">return</span> str3;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> currentDistrict;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始化数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initDates</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 初始化年月</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">if</span> (isDatechoose) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="type">Time</span> <span class="variable">time</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Time</span>();</span><br><span class="line">            time.setToNow();</span><br><span class="line">            <span class="type">int</span> <span class="variable">lenth</span> <span class="operator">=</span> time.year - minYear;</span><br><span class="line">            years = <span class="keyword">new</span> <span class="title class_">String</span>[lenth + <span class="number">1</span>];</span><br><span class="line">            <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> minYear; i &lt; time.year + <span class="number">1</span>; i++) &#123;</span><br><span class="line">                years[j] = i + <span class="string">&quot;年&quot;</span>;</span><br><span class="line">                j++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (isToToday) &#123;</span><br><span class="line">                maxMonth = DateUtil.getMonth();</span><br><span class="line">            &#125;</span><br><span class="line">            months = <span class="keyword">new</span> <span class="title class_">String</span>[maxMonth];</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; maxMonth; i++) &#123;</span><br><span class="line">                months[i] = (i + <span class="number">1</span>) + <span class="string">&quot;月&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (yearWv.getViewAdapter() == <span class="literal">null</span>) &#123;</span><br><span class="line">                yearAdapter = <span class="keyword">new</span> <span class="title class_">ArrayWheelAdapter</span>&lt;String&gt;(context, years);</span><br><span class="line">                yearWv.setViewAdapter(yearAdapter);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            updateData();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * 初始化城市选择</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            List&lt;ProvinceModel&gt; provinceList = <span class="literal">null</span>;</span><br><span class="line">            <span class="type">AssetManager</span> <span class="variable">asset</span> <span class="operator">=</span> context.getAssets();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="type">InputStream</span> <span class="variable">input</span> <span class="operator">=</span> asset.open(<span class="string">&quot;province_data.xml&quot;</span>);</span><br><span class="line">                <span class="comment">// 创建一个解析xml的工厂对象</span></span><br><span class="line">                <span class="type">SAXParserFactory</span> <span class="variable">spf</span> <span class="operator">=</span> SAXParserFactory.newInstance();</span><br><span class="line">                <span class="comment">// 解析xml</span></span><br><span class="line">                <span class="type">SAXParser</span> <span class="variable">parser</span> <span class="operator">=</span> spf.newSAXParser();</span><br><span class="line">                <span class="type">XmlParserHandler</span> <span class="variable">handler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">XmlParserHandler</span>();</span><br><span class="line">                parser.parse(input, handler);</span><br><span class="line">                input.close();</span><br><span class="line">                <span class="comment">// 获取解析出来的数据</span></span><br><span class="line">                provinceList = handler.getDataList();</span><br><span class="line">                <span class="comment">// 初始化默认选中的省、市、区</span></span><br><span class="line">                <span class="keyword">if</span> (provinceList != <span class="literal">null</span> &amp;&amp; !provinceList.isEmpty()) &#123;</span><br><span class="line">                    currentProvince = provinceList.get(<span class="number">0</span>).getName();</span><br><span class="line">                    List&lt;CityModel&gt; cityList = provinceList.get(<span class="number">0</span>).getCityList();</span><br><span class="line">                    <span class="keyword">if</span> (cityList != <span class="literal">null</span> &amp;&amp; !cityList.isEmpty()) &#123;</span><br><span class="line">                        currentCity = cityList.get(<span class="number">0</span>).getName();</span><br><span class="line">                        List&lt;DistrictModel&gt; districtList = cityList.get(<span class="number">0</span>).getDistrictList();</span><br><span class="line">                        currentDistrict = districtList.get(<span class="number">0</span>).getName();</span><br><span class="line">                        currentZipCode = districtList.get(<span class="number">0</span>).getZipcode();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//</span></span><br><span class="line">                provinceDatas = <span class="keyword">new</span> <span class="title class_">String</span>[provinceList.size()];</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; provinceList.size(); i++) &#123;</span><br><span class="line">                    <span class="comment">// 遍历所有省的数据</span></span><br><span class="line">                    provinceDatas[i] = provinceList.get(i).getName();</span><br><span class="line">                    List&lt;CityModel&gt; cityList = provinceList.get(i).getCityList();</span><br><span class="line">                    String[] cityNames = <span class="keyword">new</span> <span class="title class_">String</span>[cityList.size()];</span><br><span class="line">                    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; cityList.size(); j++) &#123;</span><br><span class="line">                        <span class="comment">// 遍历省下面的所有市的数据</span></span><br><span class="line">                        cityNames[j] = cityList.get(j).getName();</span><br><span class="line">                        List&lt;DistrictModel&gt; districtList = cityList.get(j).getDistrictList();</span><br><span class="line">                        String[] distrinctNameArray = <span class="keyword">new</span> <span class="title class_">String</span>[districtList.size()];</span><br><span class="line">                        DistrictModel[] distrinctArray = <span class="keyword">new</span> <span class="title class_">DistrictModel</span>[districtList.size()];</span><br><span class="line">                        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>; k &lt; districtList.size(); k++) &#123;</span><br><span class="line">                            <span class="comment">// 遍历市下面所有区/县的数据</span></span><br><span class="line">                            <span class="type">DistrictModel</span> <span class="variable">districtModel</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DistrictModel</span>(districtList.get(k).getName(), districtList.get(k).getZipcode());</span><br><span class="line">                            <span class="comment">// 区/县对于的邮编，保存到zipCodesMap</span></span><br><span class="line">                            zipCodesMap.put(districtList.get(k).getName(), districtList.get(k).getZipcode());</span><br><span class="line">                            distrinctArray[k] = districtModel;</span><br><span class="line">                            distrinctNameArray[k] = districtModel.getName();</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="comment">// 市-区/县的数据，保存到districsMap</span></span><br><span class="line">                        districsMap.put(cityNames[j], distrinctNameArray);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">// 省-市的数据，保存到citiesMap</span></span><br><span class="line">                    citiesMap.put(provinceList.get(i).getName(), cityNames);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                updateData();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DateOrCityChooseListener</span> &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 点击取消按钮</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCancel</span><span class="params">(DateOrCityChooseLdy chooseLdy)</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 点击确认按钮</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onConfirm</span><span class="params">(String date, DateOrCityChooseLdy dateChooseLdy)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (dateChooseListener == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (v == cancelBtn) &#123;</span><br><span class="line">            dateChooseListener.onCancel(DateOrCityChooseLdy.<span class="built_in">this</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (v == confirmBtn) &#123;</span><br><span class="line">            dateChooseListener.onConfirm(getDate(), DateOrCityChooseLdy.<span class="built_in">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 滚动条位置变化时的监听</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onChanged</span><span class="params">(WheelView wheel, <span class="type">int</span> oldValue, <span class="type">int</span> newValue)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isDatechoose) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (wheel == monthWv) &#123;</span><br><span class="line">                updateData();</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (wheel == yearWv) &#123;</span><br><span class="line">                updateData();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (wheel == yearWv) &#123;</span><br><span class="line">                updateCities();</span><br><span class="line">                updateDistrict();</span><br><span class="line">                updateZipCode(<span class="number">0</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (wheel == monthWv) &#123;</span><br><span class="line">                updateDistrict();</span><br><span class="line">                updateZipCode(<span class="number">0</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (wheel == dayWv) &#123;</span><br><span class="line">                updateZipCode(newValue);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> WheelView <span class="title function_">getYearWv</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> yearWv;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> WheelView <span class="title function_">getMonthWv</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> monthWv;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> WheelView <span class="title function_">getDayWv</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> dayWv;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取日期</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getDate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isDatechoose) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> getCurrentMonth();</span><br><span class="line">            <span class="type">String</span> <span class="variable">str3</span> <span class="operator">=</span> getCurrentDay();</span><br><span class="line">            <span class="keyword">if</span> (str2.length() != <span class="number">2</span>) &#123;</span><br><span class="line">                str2 = <span class="string">&quot;0&quot;</span> + str2;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (str3.length() != <span class="number">2</span>) &#123;</span><br><span class="line">                str3 = <span class="string">&quot;0&quot;</span> + str3;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> getCurrentYear() + <span class="string">&quot;-&quot;</span> + str2 + <span class="string">&quot;-&quot;</span> + str3;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> getCurrentYear() + <span class="string">&quot; &quot;</span> + getCurrentMonth() + <span class="string">&quot; &quot;</span> + getCurrentDay();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置最后一个是否显示</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setLastViewVisible</span><span class="params">(<span class="type">int</span> VISIBLE)</span> &#123;</span><br><span class="line">        dayWv.setVisibility(VISIBLE);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置标题</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTitle</span><span class="params">(String title)</span> &#123;</span><br><span class="line">        titleView.setText(title);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置右边确认btn字</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRightText</span><span class="params">(String Text)</span> &#123;</span><br><span class="line">        confirmBtn.setText(Text);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置右边确认btn颜色</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRightColor</span><span class="params">(<span class="type">int</span> color)</span> &#123;</span><br><span class="line">        confirmBtn.setTextColor(color);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置日期的最小年</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMinYear</span><span class="params">(<span class="type">int</span> MinYear)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isDatechoose) &#123;</span><br><span class="line">            <span class="built_in">this</span>.minYear = MinYear;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置到指定的年</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setYear</span><span class="params">(<span class="type">int</span> year)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isDatechoose) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; years.length; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (year == Integer.parseInt(years[i].substring(<span class="number">0</span>, <span class="number">4</span>))) &#123;</span><br><span class="line">                    yearWv.setCurrentItem(i);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置到指定月</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMonth</span><span class="params">(<span class="type">int</span> month)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isDatechoose) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; months.length; i++) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">string</span> <span class="operator">=</span> months[i];</span><br><span class="line">                <span class="keyword">if</span> (month == Integer.parseInt(string.substring(<span class="number">0</span>, string.length() - <span class="number">1</span>))) &#123;</span><br><span class="line">                    monthWv.setCurrentItem(i);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置到指定日</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDay</span><span class="params">(<span class="type">int</span> day)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isDatechoose) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; days.length; i++) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">string</span> <span class="operator">=</span> days[i];</span><br><span class="line">                <span class="keyword">if</span> (day == Integer.parseInt(string.substring(<span class="number">0</span>, string.length() - <span class="number">1</span>))) &#123;</span><br><span class="line">                    dayWv.setCurrentItem(i);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>layout_city_choose_ldy.xml</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="line">&lt;RelativeLayout xmlns:android=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="line">    android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    android:layout_height=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    android:background=<span class="string">&quot;#FFFFFF&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;RelativeLayout</span><br><span class="line">        android:id=<span class="string">&quot;@+id/layout_city_choose_button_rl&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;50dp&quot;</span></span><br><span class="line">        android:paddingLeft=<span class="string">&quot;12dp&quot;</span></span><br><span class="line">        android:paddingRight=<span class="string">&quot;12dp&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">        &lt;Button</span><br><span class="line">            android:id=<span class="string">&quot;@+id/layout_city_choose_cancel_btn&quot;</span></span><br><span class="line">            android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">            android:layout_height=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">            android:layout_alignParentLeft=<span class="string">&quot;true&quot;</span></span><br><span class="line">            android:layout_centerVertical=<span class="string">&quot;true&quot;</span></span><br><span class="line">            android:background=<span class="string">&quot;@drawable/bg_my_info_city_cancel&quot;</span></span><br><span class="line">            android:text=<span class="string">&quot;取消&quot;</span></span><br><span class="line">            android:visibility=<span class="string">&quot;gone&quot;</span></span><br><span class="line">            android:textColor=<span class="string">&quot;#FFFFFF&quot;</span></span><br><span class="line">            android:textSize=<span class="string">&quot;14sp&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;TextView</span><br><span class="line">            android:id=<span class="string">&quot;@+id/layout_city_choose_confirm_btn&quot;</span></span><br><span class="line">            android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">            android:layout_height=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">            android:layout_alignParentRight=<span class="string">&quot;true&quot;</span></span><br><span class="line">            android:layout_centerVertical=<span class="string">&quot;true&quot;</span></span><br><span class="line">            android:gravity=<span class="string">&quot;center&quot;</span></span><br><span class="line">            android:text=<span class="string">&quot;确定&quot;</span></span><br><span class="line">            android:textColor=<span class="string">&quot;#f25d56&quot;</span></span><br><span class="line">            android:textSize=<span class="string">&quot;14sp&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;TextView</span><br><span class="line">            android:id=<span class="string">&quot;@+id/layout_city_choose_title_tv&quot;</span></span><br><span class="line">            android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">            android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">            android:layout_centerInParent=<span class="string">&quot;true&quot;</span></span><br><span class="line">            android:textColor=<span class="string">&quot;#484848&quot;</span></span><br><span class="line">            android:textSize=<span class="string">&quot;16sp&quot;</span> /&gt;</span><br><span class="line">    &lt;/RelativeLayout&gt;</span><br><span class="line"></span><br><span class="line">    &lt;View</span><br><span class="line">        android:id=<span class="string">&quot;@+id/layout_city_choose_border_view&quot;</span></span><br><span class="line">        style=<span class="string">&quot;@style/ViewSoildLine&quot;</span></span><br><span class="line">        android:layout_below=<span class="string">&quot;@id/layout_city_choose_button_rl&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;LinearLayout</span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:layout_below=<span class="string">&quot;@id/layout_city_choose_border_view&quot;</span></span><br><span class="line">        android:orientation=<span class="string">&quot;horizontal&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">        &lt;com.u1city.androidframe.Component.wheelview.WheelView</span><br><span class="line">            android:id=<span class="string">&quot;@+id/layout_city_choose_province_wv&quot;</span></span><br><span class="line">            android:layout_width=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">            android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">            android:layout_weight=<span class="string">&quot;1&quot;</span>&gt;&lt;/com.u1city.androidframe.Component.wheelview.WheelView&gt;</span><br><span class="line"></span><br><span class="line">        &lt;com.u1city.androidframe.Component.wheelview.WheelView</span><br><span class="line">            android:id=<span class="string">&quot;@+id/layout_city_choose_city_wv&quot;</span></span><br><span class="line">            android:layout_width=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">            android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">            android:layout_weight=<span class="string">&quot;1&quot;</span>&gt;&lt;/com.u1city.androidframe.Component.wheelview.WheelView&gt;</span><br><span class="line"></span><br><span class="line">        &lt;com.u1city.androidframe.Component.wheelview.WheelView</span><br><span class="line">            android:id=<span class="string">&quot;@+id/layout_city_choose_district_wv&quot;</span></span><br><span class="line">            android:layout_width=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">            android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">            android:layout_weight=<span class="string">&quot;1&quot;</span>&gt;&lt;/com.u1city.androidframe.Component.wheelview.WheelView&gt;</span><br><span class="line">    &lt;/LinearLayout&gt;</span><br><span class="line"></span><br><span class="line">&lt;/RelativeLayout&gt;</span><br></pre></td></tr></table></figure>



<p><strong>Wheel.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> *  Android Wheel Control.</span></span><br><span class="line"><span class="comment"> *  https://code.google.com/p/android-wheel/</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> *  Copyright 2011 Yuri Kanivets</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></span><br><span class="line"><span class="comment"> *  you may not use this file except in compliance with the License.</span></span><br><span class="line"><span class="comment"> *  You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="comment"> *  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></span><br><span class="line"><span class="comment"> *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="comment"> *  See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="comment"> *  limitations under the License.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.u1city.androidframe.Component.wheelview;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.database.DataSetObserver;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Canvas;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Paint;</span><br><span class="line"><span class="keyword">import</span> android.graphics.drawable.Drawable;</span><br><span class="line"><span class="keyword">import</span> android.graphics.drawable.GradientDrawable;</span><br><span class="line"><span class="keyword">import</span> android.graphics.drawable.GradientDrawable.Orientation;</span><br><span class="line"><span class="keyword">import</span> android.util.AttributeSet;</span><br><span class="line"><span class="keyword">import</span> android.view.MotionEvent;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup.LayoutParams;</span><br><span class="line"><span class="keyword">import</span> android.view.animation.Interpolator;</span><br><span class="line"><span class="keyword">import</span> android.widget.LinearLayout;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.u1city.androidframe.R;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Numeric wheel view.</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Yuri Kanivets</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WheelView</span> <span class="keyword">extends</span> <span class="title class_">View</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** Top and bottom shadows colors */</span></span><br><span class="line">	<span class="comment">/*/ Modified by wulianghuan 2014-11-25</span></span><br><span class="line"><span class="comment">	private int[] SHADOWS_COLORS = new int[] &#123; 0xFF111111,</span></span><br><span class="line"><span class="comment">			0x00AAAAAA, 0x00AAAAAA &#125;;</span></span><br><span class="line"><span class="comment">	//*/</span></span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span>[] SHADOWS_COLORS = <span class="keyword">new</span> <span class="title class_">int</span>[] &#123; <span class="number">0xefE9E9E9</span>,</span><br><span class="line">			<span class="number">0xcfE9E9E9</span>, <span class="number">0x3fE9E9E9</span> &#125;;</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** Top and bottom items offset (to hide that) */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">ITEM_OFFSET_PERCENT</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** Left and right padding value */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">PADDING</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** Default count of visible items */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">DEF_VISIBLE_ITEMS</span> <span class="operator">=</span> <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Wheel Values</span></span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> <span class="variable">currentItem</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Count of visible items</span></span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> <span class="variable">visibleItems</span> <span class="operator">=</span> DEF_VISIBLE_ITEMS;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Item height</span></span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> <span class="variable">itemHeight</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Center Line</span></span><br><span class="line">	<span class="keyword">private</span> Drawable centerDrawable;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Wheel drawables</span></span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> <span class="variable">wheelBackground</span> <span class="operator">=</span> R.drawable.wheel_bg;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> <span class="variable">wheelForeground</span> <span class="operator">=</span> R.drawable.wheel_val;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Shadows drawables</span></span><br><span class="line">	<span class="keyword">private</span> GradientDrawable topShadow;</span><br><span class="line">	<span class="keyword">private</span> GradientDrawable bottomShadow;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Draw Shadows</span></span><br><span class="line">	<span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">drawShadows</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Scrolling</span></span><br><span class="line">	<span class="keyword">private</span> WheelScroller scroller;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">boolean</span> isScrollingPerformed;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> scrollingOffset;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Cyclic</span></span><br><span class="line">	<span class="type">boolean</span> <span class="variable">isCyclic</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Items layout</span></span><br><span class="line">	<span class="keyword">private</span> LinearLayout itemsLayout;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// The number of first item in layout</span></span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> firstItem;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// View adapter</span></span><br><span class="line">	<span class="keyword">private</span> WheelViewAdapter viewAdapter;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Recycle</span></span><br><span class="line">	<span class="keyword">private</span> <span class="type">WheelRecycle</span> <span class="variable">recycle</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">WheelRecycle</span>(<span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Listeners</span></span><br><span class="line">	<span class="keyword">private</span> List&lt;OnWheelChangedListener&gt; changingListeners = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;OnWheelChangedListener&gt;();</span><br><span class="line">	<span class="keyword">private</span> List&lt;OnWheelScrollListener&gt; scrollingListeners = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;OnWheelScrollListener&gt;();</span><br><span class="line">	<span class="keyword">private</span> List&lt;OnWheelClickedListener&gt; clickingListeners = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;OnWheelClickedListener&gt;();</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Constructor</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">WheelView</span><span class="params">(Context context, AttributeSet attrs, <span class="type">int</span> defStyle)</span> &#123;</span><br><span class="line">		<span class="built_in">super</span>(context, attrs, defStyle);</span><br><span class="line">		initData(context);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Constructor</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">WheelView</span><span class="params">(Context context, AttributeSet attrs)</span> &#123;</span><br><span class="line">		<span class="built_in">super</span>(context, attrs);</span><br><span class="line">		initData(context);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Constructor</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">WheelView</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">		<span class="built_in">super</span>(context);</span><br><span class="line">		initData(context);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Initializes class data</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> context the context</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initData</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">		scroller = <span class="keyword">new</span> <span class="title class_">WheelScroller</span>(getContext(), scrollingListener);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Scrolling listener</span></span><br><span class="line">	WheelScroller.<span class="type">ScrollingListener</span> <span class="variable">scrollingListener</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">WheelScroller</span>.ScrollingListener() &#123;</span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">		<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onStarted</span><span class="params">()</span> &#123;</span><br><span class="line">			isScrollingPerformed = <span class="literal">true</span>;</span><br><span class="line">			notifyScrollingListenersAboutStart();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">		<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onScroll</span><span class="params">(<span class="type">int</span> distance)</span> &#123;</span><br><span class="line">			doScroll(distance);</span><br><span class="line"></span><br><span class="line">			<span class="type">int</span> <span class="variable">height</span> <span class="operator">=</span> getHeight();</span><br><span class="line">			<span class="keyword">if</span> (scrollingOffset &gt; height) &#123;</span><br><span class="line">				scrollingOffset = height;</span><br><span class="line">				scroller.stopScrolling();</span><br><span class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (scrollingOffset &lt; -height) &#123;</span><br><span class="line">				scrollingOffset = -height;</span><br><span class="line">				scroller.stopScrolling();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">		<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onFinished</span><span class="params">()</span> &#123;</span><br><span class="line">			<span class="keyword">if</span> (isScrollingPerformed) &#123;</span><br><span class="line">				notifyScrollingListenersAboutEnd();</span><br><span class="line">				isScrollingPerformed = <span class="literal">false</span>;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			scrollingOffset = <span class="number">0</span>;</span><br><span class="line">			invalidate();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">		<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onJustify</span><span class="params">()</span> &#123;</span><br><span class="line">			<span class="keyword">if</span> (Math.abs(scrollingOffset) &gt; WheelScroller.MIN_DELTA_FOR_SCROLLING) &#123;</span><br><span class="line">				scroller.scroll(scrollingOffset, <span class="number">0</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Set the the specified scrolling interpolator</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> interpolator the interpolator</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setInterpolator</span><span class="params">(Interpolator interpolator)</span> &#123;</span><br><span class="line">		scroller.setInterpolator(interpolator);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Gets count of visible items</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> the count of visible items</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getVisibleItems</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> visibleItems;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Sets the desired count of visible items.</span></span><br><span class="line"><span class="comment">	 * Actual amount of visible items depends on wheel layout parameters.</span></span><br><span class="line"><span class="comment">	 * To apply changes and rebuild view call measure().</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> count the desired count for visible items</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setVisibleItems</span><span class="params">(<span class="type">int</span> count)</span> &#123;</span><br><span class="line">		visibleItems = count;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Gets view adapter</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> the view adapter</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> WheelViewAdapter <span class="title function_">getViewAdapter</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> viewAdapter;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Adapter listener</span></span><br><span class="line">	<span class="keyword">private</span> <span class="type">DataSetObserver</span> <span class="variable">dataObserver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataSetObserver</span>() &#123;</span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">		<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onChanged</span><span class="params">()</span> &#123;</span><br><span class="line">			invalidateWheel(<span class="literal">false</span>);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">		<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onInvalidated</span><span class="params">()</span> &#123;</span><br><span class="line">			invalidateWheel(<span class="literal">true</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Sets view adapter. Usually new adapters contain different views, so</span></span><br><span class="line"><span class="comment">	 * it needs to rebuild view by calling measure().</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> viewAdapter the view adapter</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setViewAdapter</span><span class="params">(WheelViewAdapter viewAdapter)</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="built_in">this</span>.viewAdapter != <span class="literal">null</span>) &#123;</span><br><span class="line">			<span class="built_in">this</span>.viewAdapter.unregisterDataSetObserver(dataObserver);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">this</span>.viewAdapter = viewAdapter;</span><br><span class="line">		<span class="keyword">if</span> (<span class="built_in">this</span>.viewAdapter != <span class="literal">null</span>) &#123;</span><br><span class="line">			<span class="built_in">this</span>.viewAdapter.registerDataSetObserver(dataObserver);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		invalidateWheel(<span class="literal">false</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Adds wheel changing listener</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> listener the listener</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addChangingListener</span><span class="params">(OnWheelChangedListener listener)</span> &#123;</span><br><span class="line">		changingListeners.add(listener);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Removes wheel changing listener</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> listener the listener</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">removeChangingListener</span><span class="params">(OnWheelChangedListener listener)</span> &#123;</span><br><span class="line">		changingListeners.remove(listener);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Notifies changing listeners</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> oldValue the old wheel value</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> newValue the new wheel value</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">notifyChangingListeners</span><span class="params">(<span class="type">int</span> oldValue, <span class="type">int</span> newValue)</span> &#123;</span><br><span class="line">		<span class="keyword">for</span> (OnWheelChangedListener listener : changingListeners) &#123;</span><br><span class="line">			listener.onChanged(<span class="built_in">this</span>, oldValue, newValue);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Adds wheel scrolling listener</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> listener the listener</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addScrollingListener</span><span class="params">(OnWheelScrollListener listener)</span> &#123;</span><br><span class="line">		scrollingListeners.add(listener);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Removes wheel scrolling listener</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> listener the listener</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">removeScrollingListener</span><span class="params">(OnWheelScrollListener listener)</span> &#123;</span><br><span class="line">		scrollingListeners.remove(listener);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Notifies listeners about starting scrolling</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">notifyScrollingListenersAboutStart</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">for</span> (OnWheelScrollListener listener : scrollingListeners) &#123;</span><br><span class="line">			listener.onScrollingStarted(<span class="built_in">this</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Notifies listeners about ending scrolling</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">notifyScrollingListenersAboutEnd</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">for</span> (OnWheelScrollListener listener : scrollingListeners) &#123;</span><br><span class="line">			listener.onScrollingFinished(<span class="built_in">this</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Adds wheel clicking listener</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> listener the listener</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addClickingListener</span><span class="params">(OnWheelClickedListener listener)</span> &#123;</span><br><span class="line">		clickingListeners.add(listener);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Removes wheel clicking listener</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> listener the listener</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">removeClickingListener</span><span class="params">(OnWheelClickedListener listener)</span> &#123;</span><br><span class="line">		clickingListeners.remove(listener);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Notifies listeners about clicking</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">notifyClickListenersAboutClick</span><span class="params">(<span class="type">int</span> item)</span> &#123;</span><br><span class="line">		<span class="keyword">for</span> (OnWheelClickedListener listener : clickingListeners) &#123;</span><br><span class="line">			listener.onItemClicked(<span class="built_in">this</span>, item);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Gets current value</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> the current value</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCurrentItem</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> currentItem;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Sets the current item. Does nothing when index is wrong.</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> index the item index</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> animated the animation flag</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCurrentItem</span><span class="params">(<span class="type">int</span> index, <span class="type">boolean</span> animated)</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (viewAdapter == <span class="literal">null</span> || viewAdapter.getItemsCount() == <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span>; <span class="comment">// throw?</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="type">int</span> <span class="variable">itemCount</span> <span class="operator">=</span> viewAdapter.getItemsCount();</span><br><span class="line">		<span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt;= itemCount) &#123;</span><br><span class="line">			<span class="keyword">if</span> (isCyclic) &#123;</span><br><span class="line">				<span class="keyword">while</span> (index &lt; <span class="number">0</span>) &#123;</span><br><span class="line">					index += itemCount;</span><br><span class="line">				&#125;</span><br><span class="line">				index %= itemCount;</span><br><span class="line">			&#125; <span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="keyword">return</span>; <span class="comment">// throw?</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (index != currentItem) &#123;</span><br><span class="line">			<span class="keyword">if</span> (animated) &#123;</span><br><span class="line">				<span class="type">int</span> <span class="variable">itemsToScroll</span> <span class="operator">=</span> index - currentItem;</span><br><span class="line">				<span class="keyword">if</span> (isCyclic) &#123;</span><br><span class="line">					<span class="type">int</span> <span class="variable">scroll</span> <span class="operator">=</span> itemCount + Math.min(index, currentItem) - Math.max(index, currentItem);</span><br><span class="line">					<span class="keyword">if</span> (scroll &lt; Math.abs(itemsToScroll)) &#123;</span><br><span class="line">						itemsToScroll = itemsToScroll &lt; <span class="number">0</span> ? scroll : -scroll;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">				scroll(itemsToScroll, <span class="number">0</span>);</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				scrollingOffset = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">				<span class="type">int</span> <span class="variable">old</span> <span class="operator">=</span> currentItem;</span><br><span class="line">				currentItem = index;</span><br><span class="line"></span><br><span class="line">				notifyChangingListeners(old, currentItem);</span><br><span class="line"></span><br><span class="line">				invalidate();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Sets the current item w/o animation. Does nothing when index is wrong.</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> index the item index</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCurrentItem</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">		setCurrentItem(index, <span class="literal">false</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Tests if wheel is cyclic. That means before the 1st item there is shown the last one</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> true if wheel is cyclic</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isCyclic</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> isCyclic;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Set wheel cyclic flag</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> isCyclic the flag to set</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCyclic</span><span class="params">(<span class="type">boolean</span> isCyclic)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.isCyclic = isCyclic;</span><br><span class="line">		invalidateWheel(<span class="literal">false</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Determine whether shadows are drawn</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> true is shadows are drawn</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">drawShadows</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> drawShadows;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Set whether shadows should be drawn</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> drawShadows flag as true or false</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDrawShadows</span><span class="params">(<span class="type">boolean</span> drawShadows)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.drawShadows = drawShadows;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Set the shadow gradient color</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> start</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> middle</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> end</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setShadowColor</span><span class="params">(<span class="type">int</span> start, <span class="type">int</span> middle, <span class="type">int</span> end)</span> &#123;</span><br><span class="line">		SHADOWS_COLORS = <span class="keyword">new</span> <span class="title class_">int</span>[] &#123;start, middle, end&#125;;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Sets the drawable for the wheel background</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> resource</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setWheelBackground</span><span class="params">(<span class="type">int</span> resource)</span> &#123;</span><br><span class="line">		wheelBackground = resource;</span><br><span class="line">		setBackgroundResource(wheelBackground);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Sets the drawable for the wheel foreground</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> resource</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setWheelForeground</span><span class="params">(<span class="type">int</span> resource)</span> &#123;</span><br><span class="line">		wheelForeground = resource;</span><br><span class="line">		centerDrawable = getContext().getResources().getDrawable(wheelForeground);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Invalidates wheel</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> clearCaches if true then cached views will be clear</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">invalidateWheel</span><span class="params">(<span class="type">boolean</span> clearCaches)</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (clearCaches) &#123;</span><br><span class="line">			recycle.clearAll();</span><br><span class="line">			<span class="keyword">if</span> (itemsLayout != <span class="literal">null</span>) &#123;</span><br><span class="line">				itemsLayout.removeAllViews();</span><br><span class="line">			&#125;</span><br><span class="line">			scrollingOffset = <span class="number">0</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (itemsLayout != <span class="literal">null</span>) &#123;</span><br><span class="line">			<span class="comment">// cache all items</span></span><br><span class="line">			recycle.recycleItems(itemsLayout, firstItem, <span class="keyword">new</span> <span class="title class_">ItemsRange</span>());</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		invalidate();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Initializes resources</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initResourcesIfNecessary</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (centerDrawable == <span class="literal">null</span>) &#123;</span><br><span class="line">			centerDrawable = getContext().getResources().getDrawable(wheelForeground);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (topShadow == <span class="literal">null</span>) &#123;</span><br><span class="line">			topShadow = <span class="keyword">new</span> <span class="title class_">GradientDrawable</span>(Orientation.TOP_BOTTOM, SHADOWS_COLORS);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (bottomShadow == <span class="literal">null</span>) &#123;</span><br><span class="line">			bottomShadow = <span class="keyword">new</span> <span class="title class_">GradientDrawable</span>(Orientation.BOTTOM_TOP, SHADOWS_COLORS);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		setBackgroundResource(wheelBackground);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Calculates desired height for layout</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> layout</span></span><br><span class="line"><span class="comment">	 *            the source layout</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> the desired layout height</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getDesiredHeight</span><span class="params">(LinearLayout layout)</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (layout != <span class="literal">null</span> &amp;&amp; layout.getChildAt(<span class="number">0</span>) != <span class="literal">null</span>) &#123;</span><br><span class="line">			itemHeight = layout.getChildAt(<span class="number">0</span>).getMeasuredHeight();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="type">int</span> <span class="variable">desired</span> <span class="operator">=</span> itemHeight * visibleItems - itemHeight * ITEM_OFFSET_PERCENT / <span class="number">50</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> Math.max(desired, getSuggestedMinimumHeight());</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Returns height of wheel item</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> the item height</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getItemHeight</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (itemHeight != <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span> itemHeight;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (itemsLayout != <span class="literal">null</span> &amp;&amp; itemsLayout.getChildAt(<span class="number">0</span>) != <span class="literal">null</span>) &#123;</span><br><span class="line">			itemHeight = itemsLayout.getChildAt(<span class="number">0</span>).getHeight();</span><br><span class="line">			<span class="keyword">return</span> itemHeight;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> getHeight() / visibleItems;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Calculates control width and creates text layouts</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> widthSize the input layout width</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> mode the layout mode</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> the calculated control width</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> <span class="title function_">calculateLayoutWidth</span><span class="params">(<span class="type">int</span> widthSize, <span class="type">int</span> mode)</span> &#123;</span><br><span class="line">		initResourcesIfNecessary();</span><br><span class="line"></span><br><span class="line">		<span class="comment">// <span class="doctag">TODO:</span> make it static</span></span><br><span class="line">		itemsLayout.setLayoutParams(<span class="keyword">new</span> <span class="title class_">LayoutParams</span>(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));</span><br><span class="line">		itemsLayout.measure(MeasureSpec.makeMeasureSpec(widthSize, MeasureSpec.UNSPECIFIED),</span><br><span class="line">				MeasureSpec.makeMeasureSpec(<span class="number">0</span>, MeasureSpec.UNSPECIFIED));</span><br><span class="line">		<span class="type">int</span> <span class="variable">width</span> <span class="operator">=</span> itemsLayout.getMeasuredWidth();</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (mode == MeasureSpec.EXACTLY) &#123;</span><br><span class="line">			width = widthSize;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			width += <span class="number">2</span> * PADDING;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// Check against our minimum width</span></span><br><span class="line">			width = Math.max(width, getSuggestedMinimumWidth());</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (mode == MeasureSpec.AT_MOST &amp;&amp; widthSize &lt; width) &#123;</span><br><span class="line">				width = widthSize;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		itemsLayout.measure(MeasureSpec.makeMeasureSpec(width - <span class="number">2</span> * PADDING, MeasureSpec.EXACTLY),</span><br><span class="line">				MeasureSpec.makeMeasureSpec(<span class="number">0</span>, MeasureSpec.UNSPECIFIED));</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> width;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onMeasure</span><span class="params">(<span class="type">int</span> widthMeasureSpec, <span class="type">int</span> heightMeasureSpec)</span> &#123;</span><br><span class="line">		<span class="type">int</span> <span class="variable">widthMode</span> <span class="operator">=</span> MeasureSpec.getMode(widthMeasureSpec);</span><br><span class="line">		<span class="type">int</span> <span class="variable">heightMode</span> <span class="operator">=</span> MeasureSpec.getMode(heightMeasureSpec);</span><br><span class="line">		<span class="type">int</span> <span class="variable">widthSize</span> <span class="operator">=</span> MeasureSpec.getSize(widthMeasureSpec);</span><br><span class="line">		<span class="type">int</span> <span class="variable">heightSize</span> <span class="operator">=</span> MeasureSpec.getSize(heightMeasureSpec);</span><br><span class="line"></span><br><span class="line">		buildViewForMeasuring();</span><br><span class="line"></span><br><span class="line">		<span class="type">int</span> <span class="variable">width</span> <span class="operator">=</span> calculateLayoutWidth(widthSize, widthMode);</span><br><span class="line"></span><br><span class="line">		<span class="type">int</span> height;</span><br><span class="line">		<span class="keyword">if</span> (heightMode == MeasureSpec.EXACTLY) &#123;</span><br><span class="line">			height = heightSize;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			height = getDesiredHeight(itemsLayout);</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (heightMode == MeasureSpec.AT_MOST) &#123;</span><br><span class="line">				height = Math.min(height, heightSize);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		setMeasuredDimension(width, height);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onLayout</span><span class="params">(<span class="type">boolean</span> changed, <span class="type">int</span> l, <span class="type">int</span> t, <span class="type">int</span> r, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">		layout(r - l, b - t);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Sets layouts width and height</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> width the layout width</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> height the layout height</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">layout</span><span class="params">(<span class="type">int</span> width, <span class="type">int</span> height)</span> &#123;</span><br><span class="line">		<span class="type">int</span> <span class="variable">itemsWidth</span> <span class="operator">=</span> width - <span class="number">2</span> * PADDING;</span><br><span class="line"></span><br><span class="line">		itemsLayout.layout(<span class="number">0</span>, <span class="number">0</span>, itemsWidth, height);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onDraw</span><span class="params">(Canvas canvas)</span> &#123;</span><br><span class="line">		<span class="built_in">super</span>.onDraw(canvas);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (viewAdapter != <span class="literal">null</span> &amp;&amp; viewAdapter.getItemsCount() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">			updateView();</span><br><span class="line"></span><br><span class="line">			drawItems(canvas);</span><br><span class="line">			drawCenterRect(canvas);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (drawShadows) drawShadows(canvas);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Draws shadows on top and bottom of control</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> canvas the canvas for drawing</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">drawShadows</span><span class="params">(Canvas canvas)</span> &#123;</span><br><span class="line">		<span class="comment">/*/ Modified by wulianghuan 2014-11-25</span></span><br><span class="line"><span class="comment">		int height = (int)(1.5 * getItemHeight());</span></span><br><span class="line"><span class="comment">		//*/</span></span><br><span class="line">		<span class="type">int</span> <span class="variable">height</span> <span class="operator">=</span> (<span class="type">int</span>)(<span class="number">3</span> * getItemHeight());</span><br><span class="line">		<span class="comment">//*/</span></span><br><span class="line">		topShadow.setBounds(<span class="number">0</span>, <span class="number">0</span>, getWidth(), height);</span><br><span class="line">		topShadow.draw(canvas);</span><br><span class="line"></span><br><span class="line">		bottomShadow.setBounds(<span class="number">0</span>, getHeight() - height, getWidth(), getHeight());</span><br><span class="line">		bottomShadow.draw(canvas);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Draws items</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> canvas the canvas for drawing</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">drawItems</span><span class="params">(Canvas canvas)</span> &#123;</span><br><span class="line">		canvas.save();</span><br><span class="line"></span><br><span class="line">		<span class="type">int</span> <span class="variable">top</span> <span class="operator">=</span> (currentItem - firstItem) * getItemHeight() + (getItemHeight() - getHeight()) / <span class="number">2</span>;</span><br><span class="line">		canvas.translate(PADDING, - top + scrollingOffset);</span><br><span class="line"></span><br><span class="line">		itemsLayout.draw(canvas);</span><br><span class="line"></span><br><span class="line">		canvas.restore();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Draws rect for current value</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> canvas the canvas for drawing</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">drawCenterRect</span><span class="params">(Canvas canvas)</span> &#123;</span><br><span class="line">		<span class="type">int</span> <span class="variable">center</span> <span class="operator">=</span> getHeight() / <span class="number">2</span>;</span><br><span class="line">		<span class="type">int</span> <span class="variable">offset</span> <span class="operator">=</span> (<span class="type">int</span>) (getItemHeight() / <span class="number">2</span> * <span class="number">1.2</span>);</span><br><span class="line">		<span class="comment">/*/ Remarked by wulianghuan 2014-11-27  使用自己的画线，而不是描边</span></span><br><span class="line"><span class="comment">		Rect rect = new Rect(left, top, right, bottom)</span></span><br><span class="line"><span class="comment">		centerDrawable.setBounds(bounds)</span></span><br><span class="line"><span class="comment">		centerDrawable.setBounds(0, center - offset, getWidth(), center + offset);</span></span><br><span class="line"><span class="comment">		centerDrawable.draw(canvas);</span></span><br><span class="line"><span class="comment">		//*/</span></span><br><span class="line">		<span class="type">Paint</span> <span class="variable">paint</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Paint</span>();</span><br><span class="line">		paint.setColor(getResources().getColor(R.color.province_line_border));</span><br><span class="line">		<span class="comment">// 设置线宽</span></span><br><span class="line">		paint.setStrokeWidth((<span class="type">float</span>) <span class="number">3</span>);</span><br><span class="line">		<span class="comment">// 绘制上边直线</span></span><br><span class="line">		canvas.drawLine(<span class="number">0</span>, center - offset, getWidth(), center - offset, paint);</span><br><span class="line">		<span class="comment">// 绘制下边直线</span></span><br><span class="line">		canvas.drawLine(<span class="number">0</span>, center + offset, getWidth(), center + offset, paint);</span><br><span class="line">		<span class="comment">//*/</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onTouchEvent</span><span class="params">(MotionEvent event)</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (!isEnabled() || getViewAdapter() == <span class="literal">null</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">switch</span> (event.getAction()) &#123;</span><br><span class="line">			<span class="keyword">case</span> MotionEvent.ACTION_MOVE:</span><br><span class="line">				<span class="keyword">if</span> (getParent() != <span class="literal">null</span>) &#123;</span><br><span class="line">					getParent().requestDisallowInterceptTouchEvent(<span class="literal">true</span>);</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">case</span> MotionEvent.ACTION_UP:</span><br><span class="line">				<span class="keyword">if</span> (!isScrollingPerformed) &#123;</span><br><span class="line">					<span class="type">int</span> <span class="variable">distance</span> <span class="operator">=</span> (<span class="type">int</span>) event.getY() - getHeight() / <span class="number">2</span>;</span><br><span class="line">					<span class="keyword">if</span> (distance &gt; <span class="number">0</span>) &#123;</span><br><span class="line">						distance += getItemHeight() / <span class="number">2</span>;</span><br><span class="line">					&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">						distance -= getItemHeight() / <span class="number">2</span>;</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="type">int</span> <span class="variable">items</span> <span class="operator">=</span> distance / getItemHeight();</span><br><span class="line">					<span class="keyword">if</span> (items != <span class="number">0</span> &amp;&amp; isValidItemIndex(currentItem + items)) &#123;</span><br><span class="line">						notifyClickListenersAboutClick(currentItem + items);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> scroller.onTouchEvent(event);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Scrolls the wheel</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> delta the scrolling value</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">doScroll</span><span class="params">(<span class="type">int</span> delta)</span> &#123;</span><br><span class="line">		scrollingOffset += delta;</span><br><span class="line"></span><br><span class="line">		<span class="type">int</span> <span class="variable">itemHeight</span> <span class="operator">=</span> getItemHeight();</span><br><span class="line">		<span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> scrollingOffset / itemHeight;</span><br><span class="line"></span><br><span class="line">		<span class="type">int</span> <span class="variable">pos</span> <span class="operator">=</span> currentItem - count;</span><br><span class="line">		<span class="type">int</span> <span class="variable">itemCount</span> <span class="operator">=</span> viewAdapter.getItemsCount();</span><br><span class="line"></span><br><span class="line">		<span class="type">int</span> <span class="variable">fixPos</span> <span class="operator">=</span> scrollingOffset % itemHeight;</span><br><span class="line">		<span class="keyword">if</span> (Math.abs(fixPos) &lt;= itemHeight / <span class="number">2</span>) &#123;</span><br><span class="line">			fixPos = <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (isCyclic &amp;&amp; itemCount &gt; <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">if</span> (fixPos &gt; <span class="number">0</span>) &#123;</span><br><span class="line">				pos--;</span><br><span class="line">				count++;</span><br><span class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (fixPos &lt; <span class="number">0</span>) &#123;</span><br><span class="line">				pos++;</span><br><span class="line">				count--;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">// fix position by rotating</span></span><br><span class="line">			<span class="keyword">while</span> (pos &lt; <span class="number">0</span>) &#123;</span><br><span class="line">				pos += itemCount;</span><br><span class="line">			&#125;</span><br><span class="line">			pos %= itemCount;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="comment">//</span></span><br><span class="line">			<span class="keyword">if</span> (pos &lt; <span class="number">0</span>) &#123;</span><br><span class="line">				count = currentItem;</span><br><span class="line">				pos = <span class="number">0</span>;</span><br><span class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (pos &gt;= itemCount) &#123;</span><br><span class="line">				count = currentItem - itemCount + <span class="number">1</span>;</span><br><span class="line">				pos = itemCount - <span class="number">1</span>;</span><br><span class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (pos &gt; <span class="number">0</span> &amp;&amp; fixPos &gt; <span class="number">0</span>) &#123;</span><br><span class="line">				pos--;</span><br><span class="line">				count++;</span><br><span class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (pos &lt; itemCount - <span class="number">1</span> &amp;&amp; fixPos &lt; <span class="number">0</span>) &#123;</span><br><span class="line">				pos++;</span><br><span class="line">				count--;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="type">int</span> <span class="variable">offset</span> <span class="operator">=</span> scrollingOffset;</span><br><span class="line">		<span class="keyword">if</span> (pos != currentItem) &#123;</span><br><span class="line">			setCurrentItem(pos, <span class="literal">false</span>);</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			invalidate();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// update offset</span></span><br><span class="line">		scrollingOffset = offset - count * itemHeight;</span><br><span class="line">		<span class="keyword">if</span> (scrollingOffset &gt; getHeight()) &#123;</span><br><span class="line">			scrollingOffset = scrollingOffset % getHeight() + getHeight();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Scroll the wheel</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> itemsToSkip items to scroll</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> time scrolling duration</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">scroll</span><span class="params">(<span class="type">int</span> itemsToScroll, <span class="type">int</span> time)</span> &#123;</span><br><span class="line">		<span class="type">int</span> <span class="variable">distance</span> <span class="operator">=</span> itemsToScroll * getItemHeight() - scrollingOffset;</span><br><span class="line">		scroller.scroll(distance, time);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Calculates range for wheel items</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> the items range</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> ItemsRange <span class="title function_">getItemsRange</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (getItemHeight() == <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="type">int</span> <span class="variable">first</span> <span class="operator">=</span> currentItem;</span><br><span class="line">		<span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">while</span> (count * getItemHeight() &lt; getHeight()) &#123;</span><br><span class="line">			first--;</span><br><span class="line">			count += <span class="number">2</span>; <span class="comment">// top + bottom items</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (scrollingOffset != <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">if</span> (scrollingOffset &gt; <span class="number">0</span>) &#123;</span><br><span class="line">				first--;</span><br><span class="line">			&#125;</span><br><span class="line">			count++;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// process empty items above the first or below the second</span></span><br><span class="line">			<span class="type">int</span> <span class="variable">emptyItems</span> <span class="operator">=</span> scrollingOffset / getItemHeight();</span><br><span class="line">			first -= emptyItems;</span><br><span class="line">			count += Math.asin(emptyItems);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ItemsRange</span>(first, count);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Rebuilds wheel items if necessary. Caches all unused items.</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> true if items are rebuilt</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">rebuildItems</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="type">boolean</span> <span class="variable">updated</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">		<span class="type">ItemsRange</span> <span class="variable">range</span> <span class="operator">=</span> getItemsRange();</span><br><span class="line">		<span class="keyword">if</span> (itemsLayout != <span class="literal">null</span>) &#123;</span><br><span class="line">			<span class="type">int</span> <span class="variable">first</span> <span class="operator">=</span> recycle.recycleItems(itemsLayout, firstItem, range);</span><br><span class="line">			updated = firstItem != first;</span><br><span class="line">			firstItem = first;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			createItemsLayout();</span><br><span class="line">			updated = <span class="literal">true</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (!updated) &#123;</span><br><span class="line">			updated = firstItem != range.getFirst() || itemsLayout.getChildCount() != range.getCount();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (firstItem &gt; range.getFirst() &amp;&amp; firstItem &lt;= range.getLast()) &#123;</span><br><span class="line">			<span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> firstItem - <span class="number">1</span>; i &gt;= range.getFirst(); i--) &#123;</span><br><span class="line">				<span class="keyword">if</span> (!addViewItem(i, <span class="literal">true</span>)) &#123;</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				firstItem = i;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			firstItem = range.getFirst();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="type">int</span> <span class="variable">first</span> <span class="operator">=</span> firstItem;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> itemsLayout.getChildCount(); i &lt; range.getCount(); i++) &#123;</span><br><span class="line">			<span class="keyword">if</span> (!addViewItem(firstItem + i, <span class="literal">false</span>) &amp;&amp; itemsLayout.getChildCount() == <span class="number">0</span>) &#123;</span><br><span class="line">				first++;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		firstItem = first;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> updated;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Updates view. Rebuilds items and label if necessary, recalculate items sizes.</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">updateView</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (rebuildItems()) &#123;</span><br><span class="line">			calculateLayoutWidth(getWidth(), MeasureSpec.EXACTLY);</span><br><span class="line">			layout(getWidth(), getHeight());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Creates item layouts if necessary</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">createItemsLayout</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (itemsLayout == <span class="literal">null</span>) &#123;</span><br><span class="line">			itemsLayout = <span class="keyword">new</span> <span class="title class_">LinearLayout</span>(getContext());</span><br><span class="line">			itemsLayout.setOrientation(LinearLayout.VERTICAL);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Builds view for measuring</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">buildViewForMeasuring</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="comment">// clear all items</span></span><br><span class="line">		<span class="keyword">if</span> (itemsLayout != <span class="literal">null</span>) &#123;</span><br><span class="line">			recycle.recycleItems(itemsLayout, firstItem, <span class="keyword">new</span> <span class="title class_">ItemsRange</span>());</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			createItemsLayout();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// add views</span></span><br><span class="line">		<span class="type">int</span> <span class="variable">addItems</span> <span class="operator">=</span> visibleItems / <span class="number">2</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> currentItem + addItems; i &gt;= currentItem - addItems; i--) &#123;</span><br><span class="line">			<span class="keyword">if</span> (addViewItem(i, <span class="literal">true</span>)) &#123;</span><br><span class="line">				firstItem = i;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Adds view for item to items layout</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> index the item index</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> first the flag indicates if view should be first</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> true if corresponding item exists and is added</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">addViewItem</span><span class="params">(<span class="type">int</span> index, <span class="type">boolean</span> first)</span> &#123;</span><br><span class="line">		<span class="type">View</span> <span class="variable">view</span> <span class="operator">=</span> getItemView(index);</span><br><span class="line">		<span class="keyword">if</span> (view != <span class="literal">null</span>) &#123;</span><br><span class="line">			<span class="keyword">if</span> (first) &#123;</span><br><span class="line">				itemsLayout.addView(view, <span class="number">0</span>);</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				itemsLayout.addView(view);</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Checks whether intem index is valid</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> index the item index</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> true if item index is not out of bounds or the wheel is cyclic</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isValidItemIndex</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> viewAdapter != <span class="literal">null</span> &amp;&amp; viewAdapter.getItemsCount() &gt; <span class="number">0</span> &amp;&amp;</span><br><span class="line">				(isCyclic || index &gt;= <span class="number">0</span> &amp;&amp; index &lt; viewAdapter.getItemsCount());</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Returns view for specified item</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> index the item index</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> item view or empty view if index is out of bounds</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> View <span class="title function_">getItemView</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (viewAdapter == <span class="literal">null</span> || viewAdapter.getItemsCount() == <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> viewAdapter.getItemsCount();</span><br><span class="line">		<span class="keyword">if</span> (!isValidItemIndex(index)) &#123;</span><br><span class="line">			<span class="keyword">return</span> viewAdapter.getEmptyItem(recycle.getEmptyItem(), itemsLayout);</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">while</span> (index &lt; <span class="number">0</span>) &#123;</span><br><span class="line">				index = count + index;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		index %= count;</span><br><span class="line">		<span class="keyword">return</span> viewAdapter.getItem(index, recycle.getItem(), itemsLayout);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Stops scrolling</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">stopScrolling</span><span class="params">()</span> &#123;</span><br><span class="line">		scroller.stopScrolling();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="调用"><a href="#调用" class="headerlink" title="调用"></a>调用</h3><p><strong>dialog_choose_date.xml 这是dialog的布局</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="line">&lt;RelativeLayout xmlns:android=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="line">    android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">    android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">    android:background=<span class="string">&quot;@drawable/radius_style&quot;</span></span><br><span class="line">    android:paddingBottom=<span class="string">&quot;25dp&quot;</span></span><br><span class="line">    android:paddingTop=<span class="string">&quot;20dp&quot;</span></span><br><span class="line">    android:paddingLeft=<span class="string">&quot;@dimen/dp_10&quot;</span></span><br><span class="line">    android:paddingRight=<span class="string">&quot;@dimen/dp_10&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;TextView</span><br><span class="line">        android:id=<span class="string">&quot;@+id/tv_start_date&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:gravity=<span class="string">&quot;center_vertical|center&quot;</span></span><br><span class="line">        android:text=<span class="string">&quot;2020-01-01&quot;</span></span><br><span class="line">        android:textColor=<span class="string">&quot;#444&quot;</span></span><br><span class="line">        android:padding=<span class="string">&quot;@dimen/dp_10&quot;</span></span><br><span class="line">        android:background=<span class="string">&quot;@color/default_app_bg&quot;</span></span><br><span class="line">        android:textSize=<span class="string">&quot;16sp&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;TextView</span><br><span class="line">        android:id=<span class="string">&quot;@+id/tv_to&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:layout_below=<span class="string">&quot;@+id/tv_start_date&quot;</span></span><br><span class="line">        android:layout_marginTop=<span class="string">&quot;20dp&quot;</span></span><br><span class="line">        android:gravity=<span class="string">&quot;center_vertical|center&quot;</span></span><br><span class="line">        android:text=<span class="string">&quot;至&quot;</span></span><br><span class="line">        android:textColor=<span class="string">&quot;#444&quot;</span></span><br><span class="line">        android:textSize=<span class="string">&quot;16sp&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;TextView</span><br><span class="line">        android:id=<span class="string">&quot;@+id/tv_end_date&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:padding=<span class="string">&quot;@dimen/dp_10&quot;</span></span><br><span class="line">        android:background=<span class="string">&quot;@color/default_app_bg&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:layout_below=<span class="string">&quot;@+id/tv_to&quot;</span></span><br><span class="line">        android:layout_marginTop=<span class="string">&quot;20dp&quot;</span></span><br><span class="line">        android:gravity=<span class="string">&quot;center_vertical|center&quot;</span></span><br><span class="line">        android:text=<span class="string">&quot;2020-02-01&quot;</span></span><br><span class="line">        android:textColor=<span class="string">&quot;#444&quot;</span></span><br><span class="line">        android:textSize=<span class="string">&quot;16sp&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id=<span class="string">&quot;@+id/btn_ok&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:layout_centerHorizontal=<span class="string">&quot;true&quot;</span></span><br><span class="line">        android:layout_below=<span class="string">&quot;@+id/tv_end_date&quot;</span></span><br><span class="line">        android:background=<span class="string">&quot;@android:color/holo_blue_dark&quot;</span></span><br><span class="line">        android:padding=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">        android:layout_marginTop=<span class="string">&quot;33dp&quot;</span></span><br><span class="line">        android:text=<span class="string">&quot;确定&quot;</span></span><br><span class="line">        android:textColor=<span class="string">&quot;#FFFFFF&quot;</span></span><br><span class="line">        android:textSize=<span class="string">&quot;16dp&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">&lt;/RelativeLayout&gt;</span><br></pre></td></tr></table></figure>

<p><strong>Activity中调用</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> AlertDialog alertDialog;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 弹出日期范围选择弹窗</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">showDateRangeDialog</span><span class="params">()</span> &#123;</span><br><span class="line">    alertDialog = <span class="keyword">new</span> <span class="title class_">AlertDialog</span>.Builder(<span class="built_in">this</span>).create();</span><br><span class="line">    <span class="keyword">final</span> <span class="type">Window</span> <span class="variable">window</span> <span class="operator">=</span> alertDialog.getWindow();</span><br><span class="line">    alertDialog.show();</span><br><span class="line">    window.clearFlags(WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM);<span class="comment">// 显示软键盘</span></span><br><span class="line">    window.setContentView(R.layout.dialog_choose_date);<span class="comment">// 加载自定义布局</span></span><br><span class="line">    <span class="keyword">final</span> <span class="type">TextView</span> <span class="variable">startDateTv</span> <span class="operator">=</span> (TextView) window.findViewById(R.id.tv_start_date);</span><br><span class="line">    <span class="keyword">final</span> <span class="type">TextView</span> <span class="variable">endDateTv</span> <span class="operator">=</span> (TextView) window.findViewById(R.id.tv_end_date);</span><br><span class="line">    startDateTv.setText(<span class="string">&quot;2020-01-01&quot;</span>);</span><br><span class="line">    endDateTv.setText(<span class="string">&quot;2020-02-01&quot;</span>);</span><br><span class="line">    startDateTv.setOnClickListener(<span class="keyword">new</span> <span class="title class_">OnClickListener</span>() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">dateStr</span> <span class="operator">=</span> startDateTv.getText().toString().trim().replace(<span class="string">&quot; &quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">            showDatePickerDialog(startDateTv, dateStr);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    endDateTv.setOnClickListener(<span class="keyword">new</span> <span class="title class_">OnClickListener</span>() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">dateStr</span> <span class="operator">=</span> endDateTv.getText().toString().trim().replace(<span class="string">&quot; &quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">            showDatePickerDialog(endDateTv, dateStr);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 确定按键监听</span></span><br><span class="line">    window.findViewById(R.id.btn_ok).setOnClickListener(<span class="keyword">new</span> <span class="title class_">OnClickListener</span>() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">startDateStr</span> <span class="operator">=</span> startDateTv.getText().toString().trim().replace(<span class="string">&quot; &quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">endDateStr</span> <span class="operator">=</span> endDateTv.getText().toString().trim().replace(<span class="string">&quot; &quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (StringUtils.isEmpty(startDateStr) || StringUtils.isEmpty(endDateStr)) &#123;</span><br><span class="line">                ToastUtil.showToastLong(MainStoreActivity.<span class="built_in">this</span>, <span class="string">&quot;请选择日期！&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//比较开始日期和结束日期，哪个比较大则作为结束日期传入</span></span><br><span class="line">                String temp;</span><br><span class="line">                <span class="keyword">if</span> (startDateStr.compareTo(endDateStr) &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                    temp = endDateStr;</span><br><span class="line">                    endDateStr = startDateStr;</span><br><span class="line">                    startDateStr = temp;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//todo：可以使用这两个日期进行其他的操作</span></span><br><span class="line">                </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 打开日期选择器，选择具体某一天</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">showDatePickerDialog</span><span class="params">(<span class="keyword">final</span> TextView dateTv, String dateStr)</span> &#123;</span><br><span class="line">    <span class="type">DateOrCityChooseLdy</span> <span class="variable">datePickerDialog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DateOrCityChooseLdy</span>(mContext, R.style.FullScreenDialog, <span class="literal">true</span>, <span class="literal">true</span>);</span><br><span class="line">    <span class="comment">//生日参数不为空。设置日期选择框为用户生日信息</span></span><br><span class="line">    String[] dates = dateStr.split(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">    datePickerDialog.setYear(Integer.valueOf(dates[<span class="number">0</span>]));</span><br><span class="line">    datePickerDialog.setMonth(Integer.valueOf(dates[<span class="number">1</span>]));</span><br><span class="line">    datePickerDialog.setDay(Integer.valueOf(dates[<span class="number">2</span>]));<span class="comment">//设置为当前用户的年月日</span></span><br><span class="line"></span><br><span class="line">    datePickerDialog.setDateOrCityChooseListener(<span class="keyword">new</span> <span class="title class_">DateOrCityChooseLdy</span>.DateOrCityChooseListener() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCancel</span><span class="params">(DateOrCityChooseLdy chooseLdy)</span> &#123;</span><br><span class="line">            chooseLdy.dismiss();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onConfirm</span><span class="params">(String date, DateOrCityChooseLdy dateChooseLdy)</span> &#123;</span><br><span class="line">            dateTv.setText(date);</span><br><span class="line">            dateChooseLdy.dismiss();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="type">Window</span> <span class="variable">window</span> <span class="operator">=</span> datePickerDialog.getWindow();</span><br><span class="line">    window.setWindowAnimations(R.style.PopupAnimation);</span><br><span class="line">    window.setGravity(Gravity.BOTTOM);</span><br><span class="line">    window.getDecorView().setPadding(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    WindowManager.<span class="type">LayoutParams</span> <span class="variable">lp</span> <span class="operator">=</span> window.getAttributes();</span><br><span class="line">    lp.width = WindowManager.LayoutParams.MATCH_PARENT;</span><br><span class="line">    lp.height = WindowManager.LayoutParams.WRAP_CONTENT;</span><br><span class="line">    window.setAttributes(lp);</span><br><span class="line">    datePickerDialog.show();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="带输入框的弹窗"><a href="#带输入框的弹窗" class="headerlink" title="带输入框的弹窗"></a>带输入框的弹窗</h2><p><strong>示例图</strong></p>
<img src="https://tvax1.sinaimg.cn/large/981009fdgy1gcbrvbikqej20bk06e3yh.jpg" alt="带输入框的弹窗" style="zoom: 50%;">

<p><strong>ChangePriceDialog.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 用以更改价格or库存的dialog</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shenbh</span></span><br><span class="line"><span class="comment"> * time 2020-02-13 11:55</span></span><br><span class="line"><span class="comment"> * email shenbh@qq.com</span></span><br><span class="line"><span class="comment"> * 维护者</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ChangePriceDialog</span> <span class="keyword">extends</span> <span class="title class_">BaseDialog</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> View customView;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> TextView titleTv;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> EditText editText;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Button confirmBtn;</span><br><span class="line">    <span class="keyword">private</span> Button cancelBtn;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ChangePriceDialog</span><span class="params">(Activity context)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context);</span><br><span class="line">        setCancelable(<span class="literal">true</span>);</span><br><span class="line">        customView = LayoutInflater.from(getContext()).inflate(R.layout.dialog_change_price, <span class="literal">null</span>);</span><br><span class="line">        setContentView(customView);</span><br><span class="line"></span><br><span class="line">        titleTv = (TextView) customView.findViewById(R.id.dialog_change_type);</span><br><span class="line">        editText = (EditText) customView.findViewById(R.id.dialog_change_et);</span><br><span class="line"><span class="comment">//        editText.setKeyListener(new DigitsKeyListener() &#123;</span></span><br><span class="line"><span class="comment">//            @Override</span></span><br><span class="line"><span class="comment">//            public int getInputType() &#123;</span></span><br><span class="line"><span class="comment">//                return InputType.TYPE_TEXT_VARIATION_PASSWORD;</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//            @Override</span></span><br><span class="line"><span class="comment">//            protected char[] getAcceptedChars() &#123;</span></span><br><span class="line"><span class="comment">//                char[] data = getStringData(R.string.login_only_can_input).toCharArray();</span></span><br><span class="line"><span class="comment">//                return data;</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line"><span class="comment">//        &#125;);</span></span><br><span class="line">        confirmBtn = (Button) customView.findViewById(R.id.ok_btn);</span><br><span class="line">        cancelBtn = (Button) customView.findViewById(R.id.cancel_btn);</span><br><span class="line"></span><br><span class="line">        cancelBtn.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">                ChangePriceDialog.<span class="built_in">this</span>.dismiss();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        WindowManager.<span class="type">LayoutParams</span> <span class="variable">params</span> <span class="operator">=</span> getWindow().getAttributes();</span><br><span class="line">        params.width = dpToPixels(context, <span class="number">288</span>);</span><br><span class="line">        params.height = WindowManager.LayoutParams.WRAP_CONTENT;</span><br><span class="line">        getWindow().setAttributes(params);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取输入框内容</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getText</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> editText.getText().toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setText</span><span class="params">(String text)</span> &#123;</span><br><span class="line">        editText.setText(text);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> View <span class="title function_">getCustomView</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> customView;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置输入的位数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTextLimit</span><span class="params">(<span class="type">int</span> digit)</span> &#123;</span><br><span class="line">        editText.setFilters(<span class="keyword">new</span> <span class="title class_">InputFilter</span>[]&#123;<span class="keyword">new</span> <span class="title class_">InputFilter</span>.LengthFilter(digit)&#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置小数点后两位数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDecimalLimit</span><span class="params">()</span>&#123;</span><br><span class="line">        editText.addTextChangedListener(<span class="keyword">new</span> <span class="title class_">TextWatcher</span>() &#123;</span><br><span class="line">            <span class="keyword">private</span> <span class="type">int</span> selectionStart;</span><br><span class="line">            <span class="keyword">private</span> <span class="type">int</span> selectionEnd;</span><br><span class="line">            <span class="keyword">private</span> CharSequence temp;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">beforeTextChanged</span><span class="params">(CharSequence s, <span class="type">int</span> start, <span class="type">int</span> count, <span class="type">int</span> after)</span> &#123;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onTextChanged</span><span class="params">(CharSequence s, <span class="type">int</span> start, <span class="type">int</span> before, <span class="type">int</span> count)</span> &#123;</span><br><span class="line">                temp = s;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterTextChanged</span><span class="params">(Editable s)</span> &#123;</span><br><span class="line">                selectionStart = editText.getSelectionStart();</span><br><span class="line">                selectionEnd = editText.getSelectionEnd();</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (!isOnlyPointNumber(editText.getText().toString()))&#123;</span><br><span class="line">                    <span class="comment">//删除多余输入的字（不会显示出来）</span></span><br><span class="line">                    s.delete(selectionStart - <span class="number">1</span>, selectionEnd);</span><br><span class="line">                    editText.setText(s);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置保留两位小数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> number</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isOnlyPointNumber</span><span class="params">(String number)</span> &#123;<span class="comment">//保留两位小数正则</span></span><br><span class="line">        <span class="type">Pattern</span> <span class="variable">pattern</span> <span class="operator">=</span> Pattern.compile(<span class="string">&quot;^\\d+\\.?\\d&#123;0,2&#125;$&quot;</span>);</span><br><span class="line">        <span class="type">Matcher</span> <span class="variable">matcher</span> <span class="operator">=</span> pattern.matcher(number);</span><br><span class="line">        <span class="keyword">return</span> matcher.matches();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**设置输入框的inputType</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> inputType</span></span><br><span class="line"><span class="comment">     *              InputType.TYPE_CLASS_NUMBER         输入类型为数字文本</span></span><br><span class="line"><span class="comment">     *              InputType.TYPE_NUMBER_FLAG_DECIMAL  输入类型为小数数字，允许十进制小数点提供分数值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEdtInputType</span><span class="params">(<span class="type">int</span> inputType)</span>&#123;</span><br><span class="line">        editText.setInputType(inputType);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置标题的文案</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> text</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCustomTitle</span><span class="params">(String text)</span> &#123;</span><br><span class="line">        titleTv.setText(text);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置确认按钮的文案</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> text</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setConfirmText</span><span class="params">(String text)</span> &#123;</span><br><span class="line">        confirmBtn.setText(text);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置取消按钮的文案</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> text</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCancelText</span><span class="params">(String text)</span> &#123;</span><br><span class="line">        cancelBtn.setText(text);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置&quot;确认&quot;的监听事件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> onClickListener</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setConfirmListener</span><span class="params">(View.OnClickListener onClickListener)</span> &#123;</span><br><span class="line">        confirmBtn.setOnClickListener(onClickListener);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置&quot;取消&quot;的监听事件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> onClickListener</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCancelListener</span><span class="params">(View.OnClickListener onClickListener)</span> &#123;</span><br><span class="line">        cancelBtn.setOnClickListener(onClickListener);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.show();</span><br><span class="line">        keyBoradHandler(editText);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">keyBoradHandler</span><span class="params">(View v)</span> &#123;</span><br><span class="line">        getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_VISIBLE);</span><br><span class="line">        <span class="type">InputMethodManager</span> <span class="variable">imm</span> <span class="operator">=</span> (InputMethodManager) getContext().</span><br><span class="line">                getSystemService(Context.INPUT_METHOD_SERVICE);</span><br><span class="line">        imm.showSoftInput(customView, <span class="number">0</span>); <span class="comment">//显示软键盘</span></span><br><span class="line">        imm.toggleSoftInput(<span class="number">0</span>, InputMethodManager.HIDE_NOT_ALWAYS); <span class="comment">//显示软键盘</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置光标位置</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPosition</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">CharSequence</span> <span class="variable">text</span> <span class="operator">=</span> editText.getText();</span><br><span class="line">        <span class="comment">//Debug.asserts(text instanceof Spannable);</span></span><br><span class="line">        <span class="keyword">if</span> (text <span class="keyword">instanceof</span> Spannable) &#123;</span><br><span class="line">            <span class="type">Spannable</span> <span class="variable">spanText</span> <span class="operator">=</span> (Spannable) text;</span><br><span class="line">            Selection.setSelection(spanText, text.length());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">dpToPixels</span><span class="params">(Context context, <span class="type">float</span> dp)</span> &#123;</span><br><span class="line">        <span class="type">Resources</span> <span class="variable">res</span> <span class="operator">=</span> context.getResources();</span><br><span class="line">        <span class="type">float</span> <span class="variable">px</span> <span class="operator">=</span> TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, dp, res.getDisplayMetrics());</span><br><span class="line">        <span class="keyword">return</span> (<span class="type">int</span>) px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>dialog_change_price.xml</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="line">&lt;RelativeLayout xmlns:android=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="line">    android:layout_width=<span class="string">&quot;288dp&quot;</span></span><br><span class="line">    android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">    android:background=<span class="string">&quot;@color/white&quot;</span></span><br><span class="line">    android:gravity=<span class="string">&quot;center&quot;</span></span><br><span class="line">    android:padding=<span class="string">&quot;27dp&quot;</span></span><br><span class="line">    android:orientation=<span class="string">&quot;vertical&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;TextView</span><br><span class="line">        android:id=<span class="string">&quot;@+id/dialog_change_type&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:singleLine=<span class="string">&quot;true&quot;</span></span><br><span class="line">        android:text=<span class="string">&quot;售价&quot;</span></span><br><span class="line">        android:paddingBottom=<span class="string">&quot;@dimen/dp_10&quot;</span></span><br><span class="line">        android:paddingTop=<span class="string">&quot;@dimen/dp_10&quot;</span></span><br><span class="line">        android:gravity=<span class="string">&quot;center_vertical&quot;</span></span><br><span class="line">        android:textColor=<span class="string">&quot;#444&quot;</span></span><br><span class="line">        android:textSize=<span class="string">&quot;16sp&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;EditText</span><br><span class="line">        android:id=<span class="string">&quot;@+id/dialog_change_et&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;40dp&quot;</span></span><br><span class="line">        android:layout_alignTop=<span class="string">&quot;@+id/dialog_change_type&quot;</span></span><br><span class="line">        android:layout_marginLeft=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">        android:layout_toRightOf=<span class="string">&quot;@+id/dialog_change_type&quot;</span></span><br><span class="line">        android:layout_alignBottom=<span class="string">&quot;@+id/dialog_change_type&quot;</span></span><br><span class="line">        android:background=<span class="string">&quot;@drawable/bg_about_app_item&quot;</span></span><br><span class="line">        android:paddingLeft=<span class="string">&quot;8dp&quot;</span></span><br><span class="line">        android:paddingRight=<span class="string">&quot;8dp&quot;</span></span><br><span class="line">        android:textColor=<span class="string">&quot;#444&quot;</span></span><br><span class="line">        android:textColorHint=<span class="string">&quot;#999&quot;</span></span><br><span class="line">        android:textSize=<span class="string">&quot;16dp&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;LinearLayout</span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:layout_below=<span class="string">&quot;@+id/dialog_change_type&quot;</span></span><br><span class="line">        android:orientation=<span class="string">&quot;horizontal&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">        &lt;Button</span><br><span class="line">            android:id=<span class="string">&quot;@+id/ok_btn&quot;</span></span><br><span class="line">            android:layout_width=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">            android:layout_height=<span class="string">&quot;40dp&quot;</span></span><br><span class="line">            android:layout_marginTop=<span class="string">&quot;28dp&quot;</span></span><br><span class="line">            android:layout_weight=<span class="string">&quot;1&quot;</span></span><br><span class="line">            android:background=<span class="string">&quot;@drawable/bg_solid_23b4f3_corners_3&quot;</span></span><br><span class="line">            android:gravity=<span class="string">&quot;center&quot;</span></span><br><span class="line">            android:text=<span class="string">&quot;确认&quot;</span></span><br><span class="line">            android:textColor=<span class="string">&quot;#ffffff&quot;</span></span><br><span class="line">            android:textSize=<span class="string">&quot;15sp&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &lt;Button</span><br><span class="line">            android:id=<span class="string">&quot;@+id/cancel_btn&quot;</span></span><br><span class="line">            android:layout_width=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">            android:layout_height=<span class="string">&quot;40dp&quot;</span></span><br><span class="line">            android:layout_marginTop=<span class="string">&quot;28dp&quot;</span></span><br><span class="line">            android:layout_weight=<span class="string">&quot;1&quot;</span></span><br><span class="line">            android:layout_marginLeft=<span class="string">&quot;@dimen/dp_10&quot;</span></span><br><span class="line">            android:background=<span class="string">&quot;@drawable/bg_border_dddddd_corners_3&quot;</span></span><br><span class="line">            android:gravity=<span class="string">&quot;center&quot;</span></span><br><span class="line">            android:text=<span class="string">&quot;取消&quot;</span></span><br><span class="line">            android:textColor=<span class="string">&quot;#999999&quot;</span></span><br><span class="line">            android:textSize=<span class="string">&quot;15sp&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;/LinearLayout&gt;</span><br><span class="line"></span><br><span class="line">&lt;/RelativeLayout&gt;</span><br></pre></td></tr></table></figure>

<p><strong>在Activity中调用</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ChangePriceDialog</span> <span class="variable">changePriceDialog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ChangePriceDialog</span>(<span class="built_in">this</span>);</span><br><span class="line">changePriceDialog.setCustomTitle(changeType == <span class="number">0</span> ? <span class="string">&quot;售价&quot;</span>: <span class="string">&quot;库存&quot;</span>);</span><br><span class="line">changePriceDialog.setEdtInputType(changeType == <span class="number">0</span> ? (InputType.TYPE_CLASS_NUMBER|InputType.TYPE_NUMBER_FLAG_DECIMAL|InputType.TYPE_NUMBER_VARIATION_NORMAL) : InputType.TYPE_CLASS_NUMBER);</span><br><span class="line"><span class="keyword">if</span> (changeType == <span class="number">0</span>) &#123;</span><br><span class="line">		changePriceDialog.setDecimalLimit();</span><br><span class="line">&#125;</span><br><span class="line">changePriceDialog.setTextLimit(<span class="number">8</span>);</span><br><span class="line">changePriceDialog.setConfirmListener(<span class="keyword">new</span> <span class="title class_">OnClickListener</span>() &#123;</span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">		<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">				</span><br><span class="line">		&#125;</span><br><span class="line">&#125;);</span><br><span class="line">changePriceDialog.show();</span><br></pre></td></tr></table></figure>



<h2 id="带一个-x2F-两个按钮的提示dialog"><a href="#带一个-x2F-两个按钮的提示dialog" class="headerlink" title="带一个&#x2F;两个按钮的提示dialog"></a>带一个&#x2F;两个按钮的提示dialog</h2><p><strong>效果图</strong></p>
<p><img src="http://ww1.sinaimg.cn/large/981009fdly1gikdvhu2c1j20cg0o7tak.jpg" alt="带一个确认按钮的dialog.png" style="zoom:50%;"><img src="http://ww1.sinaimg.cn/large/981009fdly1gikef203xmj20ch0p041b.jpg" alt="带两个按钮的dialog.png"></p>
<img src="http://ww1.sinaimg.cn/large/981009fdly1gikef203xmj20ch0p041b.jpg" alt="带两个按钮的dialog.png" style="zoom:50%;">


<p><strong>CommentTipDialog.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 拥有确定和确定与取消2种样式dialog</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CommentTipDialog</span> <span class="keyword">implements</span> <span class="title class_">View</span>.OnClickListener&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">OK</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">OK_AND_CANCEL</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * dialog类型</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> mDialogType;</span><br><span class="line">    <span class="keyword">private</span> Context mContext;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> TextView okBtn;</span><br><span class="line">    <span class="keyword">private</span> TextView cancelBtn;</span><br><span class="line">    <span class="keyword">private</span> TextView dialogTitleTv;</span><br><span class="line">    <span class="keyword">private</span> AlertDialog alertDialog;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 内容文本</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String dialogTitle;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 确定文本</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String okStr;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 取消文本</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String cancelStr;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CommentTipDialog</span><span class="params">(Context context, <span class="type">int</span> dialogType)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.mContext = context;</span><br><span class="line">        <span class="built_in">this</span>.mDialogType = dialogType;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">()</span>&#123;</span><br><span class="line">        alertDialog = <span class="keyword">new</span> <span class="title class_">AlertDialog</span>.Builder(mContext).create();</span><br><span class="line">        alertDialog.show();</span><br><span class="line">        <span class="keyword">if</span>(mDialogType == OK)&#123;</span><br><span class="line">            alertDialog.setContentView(R.layout.dialog_alert);</span><br><span class="line">            okBtn = (TextView) alertDialog.findViewById(R.id.ok_btn);</span><br><span class="line">            okBtn.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(mDialogType == OK_AND_CANCEL)&#123;</span><br><span class="line">            alertDialog.setContentView(R.layout.dialog_confirm);</span><br><span class="line">            okBtn = (TextView) alertDialog.findViewById(R.id.ok_btn);</span><br><span class="line">            cancelBtn = (TextView) alertDialog.findViewById(R.id.cancel_btn);</span><br><span class="line">            okBtn.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">            cancelBtn.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        dialogTitleTv = (TextView) alertDialog.findViewById(R.id.dialog_title);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(!StringUtils.isEmpty(dialogTitle))&#123;</span><br><span class="line">            dialogTitleTv.setText(dialogTitle);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!StringUtils.isEmpty(okStr))&#123;</span><br><span class="line">            okBtn.setText(okStr);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!StringUtils.isEmpty(cancelStr))&#123;</span><br><span class="line">            cancelBtn.setText(cancelStr);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCancelStr</span><span class="params">(String cancelStr)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.cancelStr = cancelStr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDialogTitle</span><span class="params">(String dialogTitle)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.dialogTitle = dialogTitle;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setOkStr</span><span class="params">(String okStr)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.okStr = okStr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> (view.getId())&#123;</span><br><span class="line">            <span class="keyword">case</span> R.id.ok_btn:</span><br><span class="line">                listener.commonDialogClick(view);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.cancel_btn:</span><br><span class="line">                dismiss();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">OnCommonDialogClickListener</span>&#123;</span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">commonDialogClick</span><span class="params">(View view)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> OnCommonDialogClickListener listener;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setOnCommonDialogClickListener</span><span class="params">(OnCommonDialogClickListener l)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.listener = l;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * dialog消失</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dismiss</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(alertDialog.isShowing())&#123;</span><br><span class="line">            alertDialog.dismiss();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>dialog_alert.xml</strong> 带一个按钮的dialog的布局文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:paddingLeft</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:paddingRight</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:paddingTop</span>=<span class="string">&quot;28dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:paddingBottom</span>=<span class="string">&quot;28dp&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;@drawable/corner_white&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/dialog_title&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:lineSpacingExtra</span>=<span class="string">&quot;7dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;#444444&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;16sp&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/ok_btn&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;28dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:minWidth</span>=<span class="string">&quot;400dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;40dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;#ffffff&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;15sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;我知道了&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@drawable/corner_ff5252&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>drawable&#x2F;corner_ff5252.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">&quot;#ff5252&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">&quot;3dp&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">padding</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:bottom</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:left</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:right</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:top</span>=<span class="string">&quot;5dp&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>dialog_confirm.xml</strong> 带两个按钮的dialog的布局文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">android:padding</span>=<span class="string">&quot;28dp&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">android:background</span>=<span class="string">&quot;@drawable/corner_white&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/dialog_title&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:lineSpacingExtra</span>=<span class="string">&quot;7dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;#444444&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;16sp&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/cancel_btn&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;28dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;40dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;#999999&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;15sp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;取消&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;@drawable/corner_ffffff&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/ok_btn&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;28dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;40dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;#ffffff&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;15sp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;27dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;我知道了&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;@drawable/corner_ff5252&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>使用</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 一个按钮</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">showRuleDialog</span><span class="params">(String rule)</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">CommentTipDialog</span> <span class="variable">dialog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CommentTipDialog</span>(<span class="built_in">this</span>, CommentTipDialog.OK);</span><br><span class="line">    dialog.setOkStr(<span class="string">&quot;我知道了&quot;</span>);</span><br><span class="line">    dialog.setDialogTitle(rule);</span><br><span class="line">    dialog.show();</span><br><span class="line">    dialog.setOnCommonDialogClickListener(<span class="keyword">new</span> <span class="title class_">CommentTipDialog</span>.OnCommonDialogClickListener() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">commonDialogClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">            <span class="comment">//点击按钮后的一些事件</span></span><br><span class="line">            dialog.dismiss();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 两个按钮</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">showRuleDialog</span><span class="params">(String rule)</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">CommentTipDialog</span> <span class="variable">dialog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CommentTipDialog</span>(<span class="built_in">this</span>, CommentTipDialog.OK_AND_CANCEL);</span><br><span class="line">    dialog.setOkStr(<span class="string">&quot;确定&quot;</span>);</span><br><span class="line">    dialog.setCancelStr(<span class="string">&quot;取消&quot;</span>);</span><br><span class="line">    dialog.setDialogTitle(rule);</span><br><span class="line">    dialog.show();</span><br><span class="line">    dialog.setOnCommonDialogClickListener(<span class="keyword">new</span> <span class="title class_">CommentTipDialog</span>.OnCommonDialogClickListener() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">commonDialogClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">            <span class="comment">//点确认按钮后的一些事件</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Dialog去除边框"><a href="#Dialog去除边框" class="headerlink" title="Dialog去除边框"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_36838630/article/details/78541869">Dialog去除边框</a></h2><p>先新建一个Style</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--Dialog样式   没有四周边框--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;ShareDialog&quot;</span>  <span class="attr">parent</span>=<span class="string">&quot;android:Theme.Dialog&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowFrame&quot;</span>&gt;</span>@null<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowNoTitle&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:background&quot;</span>&gt;</span>@color/colorTransparent<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowBackground&quot;</span>&gt;</span>@android:color/transparent<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowIsFloating&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowContentOverlay&quot;</span>&gt;</span>@null<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:backgroundDimAmount&quot;</span>&gt;</span>0.7<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>新建一个类继承Dialog</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OBDPopDialog</span> <span class="keyword">extends</span> <span class="title class_">Dialog</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">OBDPopDialog</span><span class="params">(<span class="meta">@NonNull</span> Context context)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, R.style.ShareDialog);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后就和一般的Dialog用法一样了（下面代码附带让Dialog出现位置以及展示大小）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="type">OBDPopDialog</span> <span class="variable">dialog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OBDPopDialog</span>(mContext);</span><br><span class="line"><span class="type">View</span> <span class="variable">view_rd</span> <span class="operator">=</span> LayoutInflater.from(mContext).inflate(R.layout.dialog_display_remove_display, <span class="literal">null</span>);</span><br><span class="line">setPromptWin(dialog);</span><br><span class="line">dialog.setContentView(view_rd);</span><br><span class="line">dialog.setCanceledOnTouchOutside(<span class="literal">true</span>);</span><br><span class="line">dialog.show();</span><br></pre></td></tr></table></figure>

<p>里面的那个方法就是控制位置和大小的</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">setPromptWin</span><span class="params">(OBDPopDialog dia)</span> &#123;</span><br><span class="line">    <span class="type">Window</span> <span class="variable">win</span> <span class="operator">=</span> dia.getWindow();</span><br><span class="line">    WindowManager.<span class="type">LayoutParams</span> <span class="variable">lp</span> <span class="operator">=</span> win.getAttributes();</span><br><span class="line">    win.setGravity(Gravity.LEFT | Gravity.TOP);</span><br><span class="line">    lp.x = (<span class="type">int</span>) (ScreenUtils.getScreenWidth(mContext) * <span class="number">0.141333</span>);</span><br><span class="line">    lp.y = (<span class="type">int</span>) (ScreenUtils.getScreenHeight(mContext) * <span class="number">0.293663</span>);</span><br><span class="line">    win.setAttributes(lp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="Dialog设置全屏时隐藏状态栏"><a href="#Dialog设置全屏时隐藏状态栏" class="headerlink" title="Dialog设置全屏时隐藏状态栏"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_36838630/article/details/78541869">Dialog设置全屏时隐藏状态栏</a></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OBDDialogP</span> <span class="keyword">extends</span> <span class="title class_">Dialog</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">OBDDialogP</span><span class="params">(<span class="meta">@NonNull</span> Context context)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context , R.style.kdialog);</span><br><span class="line">        setCancelable(<span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        applyCompat();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">applyCompat</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (Build.VERSION.SDK_INT &lt; <span class="number">19</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        getWindow().setFlags(</span><br><span class="line">            WindowManager.LayoutParams.FLAG_FULLSCREEN,</span><br><span class="line">            WindowManager.LayoutParams.FLAG_FULLSCREEN);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>里面的Style 文件：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--Dialog 样式  四周没有边框 加 全屏时不会有隐藏标题栏--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;kdialog&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;@android:style/Theme.Dialog&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowBackground&quot;</span>&gt;</span>@android:color/transparent<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowFrame&quot;</span>&gt;</span>@null<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowNoTitle&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowIsFloating&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowIsTranslucent&quot;</span>&gt;</span>false<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:backgroundDimEnabled&quot;</span>&gt;</span>false<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>调用的时候</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">OBDDialogP</span> <span class="variable">dialog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OBDDialogP</span>(<span class="built_in">this</span>);</span><br><span class="line"><span class="type">View</span> <span class="variable">viewDialog</span> <span class="operator">=</span> LayoutInflater.from(<span class="built_in">this</span>).inflate(R.layout.dialog_perfoemance_other, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">dialog.setContentView(viewDialog);</span><br><span class="line">dialog.setCanceledOnTouchOutside(<span class="literal">false</span>);</span><br><span class="line">dialog.show();</span><br><span class="line">setPromptWin(dialog);</span><br></pre></td></tr></table></figure>

<p>自定义方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">setPromptWin</span><span class="params">(OBDDialogP dia)</span> &#123;</span><br><span class="line">    <span class="type">WindowManager</span> <span class="variable">windowManager</span> <span class="operator">=</span> getWindowManager();</span><br><span class="line">    <span class="type">Display</span> <span class="variable">display</span> <span class="operator">=</span> windowManager.getDefaultDisplay();</span><br><span class="line">    WindowManager.<span class="type">LayoutParams</span> <span class="variable">lp</span> <span class="operator">=</span> dia.getWindow().getAttributes();</span><br><span class="line">    lp.width = WindowManager.LayoutParams.MATCH_PARENT;</span><br><span class="line">    lp.height = WindowManager.LayoutParams.MATCH_PARENT;</span><br><span class="line">    dia.getWindow().setAttributes(lp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Dialog全屏（不隐藏状态栏）"><a href="#Dialog全屏（不隐藏状态栏）" class="headerlink" title="Dialog全屏（不隐藏状态栏）"></a>Dialog全屏（不隐藏状态栏）</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.app.Activity;</span><br><span class="line"><span class="keyword">import</span> android.app.Dialog;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Color;</span><br><span class="line"><span class="keyword">import</span> android.os.Build;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NewSearchMoreDialog</span> <span class="keyword">extends</span> <span class="title class_">Dialog</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Activity mContext;</span><br><span class="line">    <span class="keyword">private</span> FrameLayout toolbar_search_more_fl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">NewSearchMoreDialog</span><span class="params">(<span class="keyword">final</span> Activity context)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(context, R.style.MyDialogStyle);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">NewSearchMoreDialog</span><span class="params">(<span class="keyword">final</span> Activity context, <span class="type">int</span> themeId)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, themeId);</span><br><span class="line">        mContext = context;</span><br><span class="line">        getWindow().setGravity(Gravity.CENTER);</span><br><span class="line">        setCancelable(<span class="literal">true</span>);</span><br><span class="line">        setCanceledOnTouchOutside(<span class="literal">true</span>);</span><br><span class="line">        <span class="type">LayoutInflater</span> <span class="variable">from</span> <span class="operator">=</span> LayoutInflater.from(context);</span><br><span class="line">        <span class="type">View</span> <span class="variable">contentView</span> <span class="operator">=</span> from.inflate(R.layout.dialog_searchmore, <span class="literal">null</span>);</span><br><span class="line">        setContentView(contentView);</span><br><span class="line">        getWindow().setLayout(WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LayoutParams.MATCH_PARENT);</span><br><span class="line">        getWindow().getDecorView().setBackground(<span class="literal">null</span>);</span><br><span class="line">        <span class="comment">//设置状态栏字体颜色是“黑色”</span></span><br><span class="line">        <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP_MR1) &#123;</span><br><span class="line">            getWindow().getDecorView().setSystemUiVisibility(</span><br><span class="line">                    View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN | View.SYSTEM_UI_FLAG_LIGHT_STATUS_BAR);</span><br><span class="line">            getWindow().setStatusBarColor(Color.BLACK);</span><br><span class="line">        &#125;</span><br><span class="line">        initView(contentView);</span><br><span class="line">        <span class="comment">//initData();</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initView</span><span class="params">(View view)</span> &#123;</span><br><span class="line">        toolbar_search_more_fl = view.findViewById(R.id.toolbar_search_more_fl);</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resources</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span> <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 非全屏（不延伸到状态栏下） --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;MyDialogStyle&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowBackground&quot;</span>&gt;</span>@android:color/transparent<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowFrame&quot;</span>&gt;</span>@null<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowNoTitle&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowIsFloating&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowIsTranslucent&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowContentOverlay&quot;</span>&gt;</span>@null<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowAnimationStyle&quot;</span>&gt;</span>@android:style/Animation.Dialog<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:backgroundDimEnabled&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 全屏（延伸到状态栏底下） --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;MyDialogStyleFullScreen&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowBackground&quot;</span>&gt;</span>@android:color/transparent<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowFrame&quot;</span>&gt;</span>@null<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowNoTitle&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowIsFloating&quot;</span>&gt;</span>false<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowIsTranslucent&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowContentOverlay&quot;</span>&gt;</span>@null<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowAnimationStyle&quot;</span>&gt;</span>@android:style/Animation.Dialog<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:backgroundDimEnabled&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>使用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (newSearchMoreDialog == <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (Dialog不要全屏的条件) &#123;</span><br><span class="line">        newSearchMoreDialog = <span class="keyword">new</span> <span class="title class_">NewSearchMoreDialog</span>(getActivity());</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// </span></span><br><span class="line">        newSearchMoreDialog = <span class="keyword">new</span> <span class="title class_">NewSearchMoreDialog</span>(getActivity(), R.style.MyDialogStyleFullScreen);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="dialog禁止系统返回键（包含手势）"><a href="#dialog禁止系统返回键（包含手势）" class="headerlink" title="dialog禁止系统返回键（包含手势）"></a>dialog禁止系统返回键（包含手势）</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//dialog禁止系统返回键（包含手势）</span></span><br><span class="line">DialogInterface.<span class="type">OnKeyListener</span> <span class="variable">keyListener</span> <span class="operator">=</span> (dialog, keyCode, event) -&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (keyCode == KeyEvent.KEYCODE_BACK &amp;&amp; event.getRepeatCount() == <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//在把这个listener注册到dialog里面去 当初始化dialog的时候</span></span><br><span class="line">builder.setTitle(getText(R.string.XXXX))</span><br><span class="line">    .setMessage(getText(R.XXXXXX))</span><br><span class="line">    .setOnKeyListener(key).setCancelable(<span class="literal">false</span>)</span><br><span class="line">    .setPositiveButton(android.R.string.ok, someOKButtonListener)</span><br><span class="line">    .setCanceledOnTouchOutside(<span class="literal">false</span>)</span><br><span class="line">    .setNegativeButton(android.R.string.cancel, <span class="literal">null</span>);</span><br></pre></td></tr></table></figure>





<h2 id="弹软键盘后再弹Dialog，软键盘不要收缩"><a href="#弹软键盘后再弹Dialog，软键盘不要收缩" class="headerlink" title="弹软键盘后再弹Dialog，软键盘不要收缩"></a>弹软键盘后再弹Dialog，软键盘不要收缩</h2><blockquote>
<p>Dialog中加载了ProgressBar，来当全局的loading</p>
</blockquote>
<ol>
<li>Activity的清单文件中不要设置<code>android:windowSoftInputMode</code>，即用默认的</li>
<li>Dialog的style中添加<code>&lt;item name=&quot;android:windowSoftInputMode&quot;&gt;stateUnchanged&lt;/item&gt;</code></li>
<li>在Activity初始化完成的时候，editText获取下焦点，让它弹出软键盘</li>
</ol>
<p>完整代码：</p>
<ol>
<li><p>Dialog的style</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;Loading&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;@android:style/Theme.Dialog&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowFrame&quot;</span>&gt;</span>@null<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowIsFloating&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowIsTranslucent&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowNoTitle&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- 设置背景色 透明--&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:background&quot;</span>&gt;</span>@android:color/transparent<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowBackground&quot;</span>&gt;</span>@android:color/transparent<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- 设置是否显示背景 --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:backgroundDimEnabled&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- 设置背景透明度 --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:backgroundDimAmount&quot;</span>&gt;</span>0<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- 设置点击空白不消失 --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowCloseOnTouchOutside&quot;</span>&gt;</span>false<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowSoftInputMode&quot;</span>&gt;</span>stateUnchanged<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>LoadingDialog.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">LoadingDialog</span> <span class="keyword">extends</span> <span class="title class_">Dialog</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Window window;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">cancle</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LoadingDialog</span><span class="params">(<span class="meta">@NonNull</span> <span class="meta">@NotNull</span> Context context)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, R.style.Loading);</span><br><span class="line">        <span class="comment">//加载布局</span></span><br><span class="line">        setContentView(R.layout.view_loading);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置Dialog参数</span></span><br><span class="line">        <span class="keyword">if</span> (window == <span class="literal">null</span>) &#123;</span><br><span class="line">            window = getWindow();</span><br><span class="line">        &#125;</span><br><span class="line">        WindowManager.<span class="type">LayoutParams</span> <span class="variable">params</span> <span class="operator">=</span> window.getAttributes();</span><br><span class="line">        params.gravity = Gravity.CENTER;</span><br><span class="line">        window.setAttributes(params);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onBackPressed</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//回调</span></span><br><span class="line">        cancle();</span><br><span class="line">        <span class="comment">//关闭Loading</span></span><br><span class="line">        dismiss();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>view_loading.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;@dimen/dp64&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;@dimen/dp64&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;@drawable/loading_background_20&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">RelativeLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/loading_rl&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;@dimen/dp40&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;@dimen/dp40&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">ProgressBar</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/loading&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:indeterminateBehavior</span>=<span class="string">&quot;repeat&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:indeterminateDrawable</span>=<span class="string">&quot;@drawable/anim&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>调用Dialog的地方</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> LoadingDialog loadingDialog;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showLoading</span><span class="params">()</span> &#123;</span><br><span class="line">    showLoading(<span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showLoading</span><span class="params">(<span class="type">boolean</span> cancelable)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (loadingDialog == <span class="literal">null</span>) &#123;</span><br><span class="line">            loadingDialog = <span class="keyword">new</span> <span class="title class_">LoadingDialog</span>(mView.getUIContext()) &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">cancle</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">        loadingDialog.setCanceledOnTouchOutside(cancelable);</span><br><span class="line">        <span class="keyword">if</span> (mView != <span class="literal">null</span> &amp;&amp; !(mView.getUIContext() <span class="keyword">instanceof</span> ViewPager.DecorView)</span><br><span class="line">            &amp;&amp; !loadingDialog.isShowing()) &#123;</span><br><span class="line">            loadingDialog.show();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dismissLoading</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (mView != <span class="literal">null</span> &amp;&amp; !(mView.getUIContext() <span class="keyword">instanceof</span> ViewPager.DecorView)</span><br><span class="line">            &amp;&amp; loadingDialog != <span class="literal">null</span> &amp;&amp; loadingDialog.isShowing()) &#123;</span><br><span class="line">            loadingDialog.dismiss();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="xm597的Dialog"><a href="#xm597的Dialog" class="headerlink" title="xm597的Dialog"></a>xm597的Dialog</h1><h2 id="BaseDialog"><a href="#BaseDialog" class="headerlink" title="BaseDialog"></a>BaseDialog</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.app.Activity;</span><br><span class="line"><span class="keyword">import</span> android.app.Dialog;</span><br><span class="line"><span class="keyword">import</span> android.view.Gravity;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.WindowManager;</span><br><span class="line"><span class="keyword">import</span> androidx.annotation.NonNull;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">BaseDialog</span> <span class="keyword">extends</span> <span class="title class_">Dialog</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> View view;</span><br><span class="line">    <span class="keyword">public</span> Activity mcontext;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BaseDialog</span><span class="params">(<span class="keyword">final</span> Activity context)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, R.style.BaseDialogStyle);</span><br><span class="line">        <span class="keyword">if</span> (view == <span class="literal">null</span>) &#123;</span><br><span class="line">            mcontext = context;</span><br><span class="line">            view = LayoutInflater.from(context).inflate(getLayoutId(), <span class="literal">null</span>);</span><br><span class="line">            getWindow().setGravity(setGravity());</span><br><span class="line">            setCanceledOnTouchOutside(<span class="literal">true</span>);</span><br><span class="line">            setContentView(view);</span><br><span class="line">            WindowManager.<span class="type">LayoutParams</span> <span class="variable">params</span> <span class="operator">=</span> getLayoutParams(context);</span><br><span class="line">            getWindow().setAttributes(params);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 需要重写高度的话重写这个方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@NonNull</span></span><br><span class="line">    <span class="keyword">protected</span> WindowManager.LayoutParams <span class="title function_">getLayoutParams</span><span class="params">(Activity context)</span> &#123;</span><br><span class="line">        WindowManager.<span class="type">LayoutParams</span> <span class="variable">params</span> <span class="operator">=</span> getWindow().getAttributes();</span><br><span class="line"></span><br><span class="line">        params.width = getScreenWidthPixels(context);</span><br><span class="line">        params.height = WindowManager.LayoutParams.WRAP_CONTENT;</span><br><span class="line">        <span class="keyword">return</span> params;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="type">int</span> <span class="title function_">getLayoutId</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> View <span class="title function_">getview</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> view;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//其他位置的话重写这方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">setGravity</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Gravity.CENTER;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!isShowing())&#123;</span><br><span class="line">            <span class="built_in">super</span>.show();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取屏幕widthPixels</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context 上下文</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> widthPixels 屏幕宽</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getScreenWidthPixels</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getDeviceMetrics(context).widthPixels;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取屏幕相关参数</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context 上下文</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> metrics</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> DisplayMetrics <span class="title function_">getDeviceMetrics</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">        <span class="type">DisplayMetrics</span> <span class="variable">metrics</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DisplayMetrics</span>();</span><br><span class="line">        <span class="type">WindowManager</span> <span class="variable">wm</span> <span class="operator">=</span> (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);</span><br><span class="line">        <span class="keyword">if</span> (wm != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="type">Display</span> <span class="variable">display</span> <span class="operator">=</span> wm.getDefaultDisplay();</span><br><span class="line">            display.getMetrics(metrics);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> metrics;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其中的 <code>R.style.BaseDialogStyle</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">//styles.xml</span><br><span class="line"><span class="comment">&lt;!-- 底部弹出动画 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;DialogBottomAnim&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;android:Animation&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowEnterAnimation&quot;</span>&gt;</span>@anim/anim_bottom_in<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowExitAnimation&quot;</span>&gt;</span>@anim/anim_bottom_out<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;MyDialogStyle&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowBackground&quot;</span>&gt;</span>@android:color/transparent<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowFrame&quot;</span>&gt;</span>@null<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowNoTitle&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowIsFloating&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowIsTranslucent&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowContentOverlay&quot;</span>&gt;</span>@null<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowAnimationStyle&quot;</span>&gt;</span>@android:style/Animation.Dialog<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:backgroundDimEnabled&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;BaseDialogStyle&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;MyDialogStyle&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowAnimationStyle&quot;</span>&gt;</span>@style/DialogBottomAnim<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">//anim_bottom_in.xml</span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">translate</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:duration</span>=<span class="string">&quot;@android:integer/config_shortAnimTime&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fromYDelta</span>=<span class="string">&quot;100%p&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:toYDelta</span>=<span class="string">&quot;0&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//anim_bottom_out.xml</span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">translate</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:duration</span>=<span class="string">&quot;@android:integer/config_shortAnimTime&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fromYDelta</span>=<span class="string">&quot;0&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:toYDelta</span>=<span class="string">&quot;100%p&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><ol>
<li><p>单个Rv内容的底部弹窗 <code>public class BaseOneRvDialog&lt;T extends IPickerViewData&gt; extends BaseDialog &#123;&#125;</code></p>
</li>
<li><p>单列或两列滚轮的弹窗 <code>public class MultiSalaryDialog extends BaseDialog &#123;&#125;</code></p>
</li>
</ol>
<h1 id="另一套Dialog（DataBinding）"><a href="#另一套Dialog（DataBinding）" class="headerlink" title="另一套Dialog（DataBinding）"></a>另一套Dialog（DataBinding）</h1><h2 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.app.Dialog;</span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Color;</span><br><span class="line"><span class="keyword">import</span> android.graphics.drawable.ColorDrawable;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"><span class="keyword">import</span> android.view.Window;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.NonNull;</span><br><span class="line"><span class="keyword">import</span> androidx.databinding.DataBindingUtil;</span><br><span class="line"><span class="keyword">import</span> androidx.databinding.ViewDataBinding;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">KBaseFullScreenDialog</span>&lt;VD <span class="keyword">extends</span> <span class="title class_">ViewDataBinding</span>&gt; <span class="keyword">extends</span> <span class="title class_">Dialog</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">protected</span> VD mBinding;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">KBaseFullScreenDialog</span><span class="params">(<span class="meta">@NonNull</span> Context context)</span> &#123;</span><br><span class="line">		<span class="built_in">super</span>(context);</span><br><span class="line">		init();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">KBaseFullScreenDialog</span><span class="params">(<span class="meta">@NonNull</span> Context context, <span class="type">int</span> themeResId)</span> &#123;</span><br><span class="line">		<span class="built_in">super</span>(context, themeResId);</span><br><span class="line">		init();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">		setCancelable(<span class="literal">false</span>);</span><br><span class="line">		setCanceledOnTouchOutside(<span class="literal">false</span>);</span><br><span class="line">		requestWindowFeature(Window.FEATURE_NO_TITLE);</span><br><span class="line">		<span class="type">View</span> <span class="variable">contentView</span> <span class="operator">=</span> getLayoutInflater().inflate(setContentViewRes(), <span class="literal">null</span>);</span><br><span class="line">		setContentView(contentView);</span><br><span class="line">		mBinding = DataBindingUtil.bind(contentView);</span><br><span class="line">		<span class="type">Window</span> <span class="variable">window</span> <span class="operator">=</span> getWindow();</span><br><span class="line">		<span class="keyword">if</span> (window != <span class="literal">null</span>) &#123;</span><br><span class="line">			window.setBackgroundDrawable(<span class="keyword">new</span> <span class="title class_">ColorDrawable</span>(Color.TRANSPARENT));</span><br><span class="line">			window.setLayout(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT);</span><br><span class="line">		&#125;</span><br><span class="line">		onContentViewCreated();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dismissDialog</span><span class="params">(View view)</span> &#123;</span><br><span class="line">		dismiss();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="type">int</span> <span class="title function_">setContentViewRes</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">onContentViewCreated</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="使用-普通弹窗"><a href="#使用-普通弹窗" class="headerlink" title="使用-普通弹窗"></a>使用-普通弹窗</h2><p>继承上面的</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.text.TextUtils;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.NonNull;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">BaseShowTipsDialog</span></span><br><span class="line">        <span class="keyword">extends</span> <span class="title class_">KBaseFullScreenDialog</span>&lt;LayoutBaseShowTipsDialogBinding&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BaseShowTipsDialog</span><span class="params">(<span class="meta">@NonNull</span> Context context)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context);</span><br><span class="line">        initDialog();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BaseShowTipsDialog</span><span class="params">(<span class="meta">@NonNull</span> Context context, <span class="type">int</span> themeResId)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, themeResId);</span><br><span class="line">        initDialog();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initDialog</span><span class="params">()</span> &#123;</span><br><span class="line">        setCancelable(<span class="literal">true</span>);</span><br><span class="line">        setCanceledOnTouchOutside(<span class="literal">true</span>);</span><br><span class="line">        setSubContent(<span class="string">&quot;&quot;</span>, <span class="number">0</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> <span class="title function_">setContentViewRes</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> R.layout.layout_base_show_tips_dialog;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onContentViewCreated</span><span class="params">()</span> &#123;</span><br><span class="line">        mBinding.setView(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTipTitle</span><span class="params">(String title)</span> &#123;</span><br><span class="line">        mBinding.setTipTitle(title);</span><br><span class="line">        <span class="keyword">if</span> (TextUtils.isEmpty(title)) &#123;</span><br><span class="line">            mBinding.tvTitleBaseShowTipDialog.setVisibility(View.GONE);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            mBinding.tvTitleBaseShowTipDialog.setVisibility(View.VISIBLE);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTipContent</span><span class="params">(String content)</span> &#123;</span><br><span class="line">        mBinding.setTipContent(content);</span><br><span class="line">        <span class="keyword">if</span> (TextUtils.isEmpty(content)) &#123;</span><br><span class="line">            mBinding.tvContentBaseShowTipDialog.setVisibility(View.GONE);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            mBinding.tvContentBaseShowTipDialog.setVisibility(View.VISIBLE);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSubContent</span><span class="params">(String subTipTitle, <span class="type">int</span> subTipIcon, String subTipContent)</span> &#123;</span><br><span class="line">        mBinding.setSubTipTitle(subTipTitle);</span><br><span class="line">        <span class="keyword">if</span> (TextUtils.isEmpty(subTipTitle)) &#123;</span><br><span class="line">            mBinding.tvSubTipTitleBaseShowTipDialog.setVisibility(View.GONE);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            mBinding.tvSubTipTitleBaseShowTipDialog.setVisibility(View.VISIBLE);</span><br><span class="line">        &#125;</span><br><span class="line">        mBinding.setSubTipIcon(subTipIcon);</span><br><span class="line"></span><br><span class="line">        mBinding.setSubTipContent(subTipContent);</span><br><span class="line">        <span class="keyword">if</span> (TextUtils.isEmpty(subTipContent)) &#123;</span><br><span class="line">            mBinding.tvSubTipBaseShowTipDialog.setVisibility(View.GONE);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            mBinding.tvSubTipBaseShowTipDialog.setVisibility(View.VISIBLE);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">subTitleVisible</span> <span class="operator">=</span> mBinding.tvSubTipTitleBaseShowTipDialog.getVisibility();</span><br><span class="line">        <span class="type">int</span> <span class="variable">subTipIconVisible</span> <span class="operator">=</span> mBinding.ivSubTipBaseShowTipDialog.getVisibility();</span><br><span class="line">        <span class="type">int</span> <span class="variable">subTipVisible</span> <span class="operator">=</span> mBinding.tvSubTipBaseShowTipDialog.getVisibility();</span><br><span class="line">        <span class="keyword">if</span> (subTitleVisible != View.VISIBLE &amp;&amp; subTipIconVisible != View.VISIBLE &amp;&amp; subTipVisible != View.VISIBLE) &#123;</span><br><span class="line">            mBinding.llSubContentBaseShowTipDialog.setVisibility(View.GONE);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            mBinding.llSubContentBaseShowTipDialog.setVisibility(View.VISIBLE);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setButtons</span><span class="params">(String left, String center, String right, String single)</span> &#123;</span><br><span class="line">        mBinding.setLeftButton(left);</span><br><span class="line">        <span class="keyword">if</span> (TextUtils.isEmpty(left)) &#123;</span><br><span class="line">            mBinding.btnLeftBaseShowTipDialog.setVisibility(View.GONE);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            mBinding.btnLeftBaseShowTipDialog.setVisibility(View.VISIBLE);</span><br><span class="line">        &#125;</span><br><span class="line">        mBinding.setCenterButton(center);</span><br><span class="line">        <span class="keyword">if</span> (TextUtils.isEmpty(center)) &#123;</span><br><span class="line">            mBinding.btnCenterBaseShowTipDialog.setVisibility(View.GONE);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            mBinding.btnCenterBaseShowTipDialog.setVisibility(View.VISIBLE);</span><br><span class="line">        &#125;</span><br><span class="line">        mBinding.setRightButton(right);</span><br><span class="line">        <span class="keyword">if</span> (TextUtils.isEmpty(right)) &#123;</span><br><span class="line">            mBinding.btnRightBaseShowTipDialog.setVisibility(View.GONE);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            mBinding.btnRightBaseShowTipDialog.setVisibility(View.VISIBLE);</span><br><span class="line">        &#125;</span><br><span class="line">        mBinding.setSingleButton(single);</span><br><span class="line">        <span class="keyword">if</span> (TextUtils.isEmpty(single)) &#123;</span><br><span class="line">            mBinding.btnSingleBaseShowTipDialog.setVisibility(View.GONE);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            mBinding.btnSingleBaseShowTipDialog.setVisibility(View.VISIBLE);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">onLeftButtonClick</span><span class="params">(View view)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">onCenterButtonClick</span><span class="params">(View view)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">onRightButtonClick</span><span class="params">(View view)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">onSingleButtonClick</span><span class="params">(View view)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="其中的布局"><a href="#其中的布局" class="headerlink" title="其中的布局"></a>其中的布局</h3><p><code>layout_base_show_tips_dialog.xml</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">layout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">data</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">import</span> <span class="attr">type</span>=<span class="string">&quot;android.view.View&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">import</span> <span class="attr">type</span>=<span class="string">&quot;android.text.TextUtils&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">variable</span></span></span><br><span class="line"><span class="tag">            <span class="attr">name</span>=<span class="string">&quot;view&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">&quot;xxx.dialog.base.BaseShowTipsDialog&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">variable</span></span></span><br><span class="line"><span class="tag">            <span class="attr">name</span>=<span class="string">&quot;tipTitle&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">&quot;String&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">variable</span></span></span><br><span class="line"><span class="tag">            <span class="attr">name</span>=<span class="string">&quot;tipContent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">&quot;String&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">variable</span></span></span><br><span class="line"><span class="tag">            <span class="attr">name</span>=<span class="string">&quot;subTipTitle&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">&quot;String&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">variable</span></span></span><br><span class="line"><span class="tag">            <span class="attr">name</span>=<span class="string">&quot;subTipContent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">&quot;String&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">variable</span></span></span><br><span class="line"><span class="tag">            <span class="attr">name</span>=<span class="string">&quot;subTipIcon&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">&quot;Integer&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">variable</span></span></span><br><span class="line"><span class="tag">            <span class="attr">name</span>=<span class="string">&quot;leftButton&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">&quot;String&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">variable</span></span></span><br><span class="line"><span class="tag">            <span class="attr">name</span>=<span class="string">&quot;centerButton&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">&quot;String&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">variable</span></span></span><br><span class="line"><span class="tag">            <span class="attr">name</span>=<span class="string">&quot;rightButton&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">&quot;String&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">variable</span></span></span><br><span class="line"><span class="tag">            <span class="attr">name</span>=<span class="string">&quot;singleButton&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">&quot;String&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">FrameLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/fl_bg_base_show_tips_dialog&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@color/color00FFFFFF&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:onClick</span>=<span class="string">&quot;@&#123;view::dismissDialog&#125;&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:padding</span>=<span class="string">&quot;@dimen/viewSize48&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">androidx.cardview.widget.CardView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/root_base_show_tips_dialog&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;@color/colorWhite&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:cardCornerRadius</span>=<span class="string">&quot;@dimen/viewSize5&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:cardElevation</span>=<span class="string">&quot;0dp&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:paddingStart</span>=<span class="string">&quot;@dimen/viewSize16&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:paddingTop</span>=<span class="string">&quot;@dimen/viewSize12&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:paddingEnd</span>=<span class="string">&quot;@dimen/viewSize16&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_title_base_show_tip_dialog&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_marginBottom</span>=<span class="string">&quot;@dimen/viewSize12&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;@&#123;tipTitle&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textColor</span>=<span class="string">&quot;@color/colorAppMainText&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textSize</span>=<span class="string">&quot;@dimen/textSize16&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textStyle</span>=<span class="string">&quot;bold&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:layout_constraintBottom_toTopOf</span>=<span class="string">&quot;@id/tv_content_base_show_tip_dialog&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">tools:text</span>=<span class="string">&quot;标题&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_content_base_show_tip_dialog&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;@dimen/viewSize6&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:lineSpacingExtra</span>=<span class="string">&quot;@dimen/viewSize3&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;@&#123;tipContent&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textColor</span>=<span class="string">&quot;@color/color333333&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textSize</span>=<span class="string">&quot;@dimen/textSize14&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/tv_title_base_show_tip_dialog&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">tools:text</span>=<span class="string">&quot;提示内容&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/ll_sub_content_base_show_tip_dialog&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;@dimen/viewSize12&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:visibility</span>=<span class="string">&quot;gone&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/tv_content_base_show_tip_dialog&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_sub_tip_title_base_show_tip_dialog&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:text</span>=<span class="string">&quot;@&#123;subTipTitle&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:textColor</span>=<span class="string">&quot;@color/color333333&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:textSize</span>=<span class="string">&quot;@dimen/textSize13&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">tools:text</span>=<span class="string">&quot;二级内容标题:&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:id</span>=<span class="string">&quot;@+id/iv_sub_Tip_base_show_tip_dialog&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;@dimen/viewSize4&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:contentDescription</span>=<span class="string">&quot;@string/app_name&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:src</span>=<span class="string">&quot;@&#123;subTipIcon&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">tools:src</span>=<span class="string">&quot;@drawable/icon_mobile_0&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_sub_Tip_base_show_tip_dialog&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;@dimen/viewSize8&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:text</span>=<span class="string">&quot;@&#123;subTipContent&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:textColor</span>=<span class="string">&quot;@color/colorAppTheme&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">tools:text</span>=<span class="string">&quot;二级提示内容&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">View</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/h_line_base_show_tip_dialog&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;@dimen/viewSize1&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;@dimen/viewSize12&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:background</span>=<span class="string">&quot;@color/colorAppDivider&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/ll_sub_content_base_show_tip_dialog&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn_left_base_show_tip_dialog&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:onClick</span>=<span class="string">&quot;@&#123;view::onLeftButtonClick&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:paddingTop</span>=<span class="string">&quot;@dimen/viewSize12&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:paddingBottom</span>=<span class="string">&quot;@dimen/viewSize12&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;@&#123;leftButton&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textColor</span>=<span class="string">&quot;@color/colorAppNormalText&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textSize</span>=<span class="string">&quot;@dimen/textSize14&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:layout_constraintEnd_toStartOf</span>=<span class="string">&quot;@id/btn_center_base_show_tip_dialog&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:layout_constraintHorizontal_chainStyle</span>=<span class="string">&quot;spread&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/h_line_base_show_tip_dialog&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">tools:text</span>=<span class="string">&quot;左边按钮&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn_center_base_show_tip_dialog&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:onClick</span>=<span class="string">&quot;@&#123;view::onCenterButtonClick&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:paddingTop</span>=<span class="string">&quot;@dimen/viewSize12&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:paddingBottom</span>=<span class="string">&quot;@dimen/viewSize12&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;@&#123;centerButton&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textColor</span>=<span class="string">&quot;@color/colorAppMainText&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textSize</span>=<span class="string">&quot;@dimen/textSize14&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:layout_constraintEnd_toStartOf</span>=<span class="string">&quot;@id/btn_right_base_show_tip_dialog&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:layout_constraintHorizontal_chainStyle</span>=<span class="string">&quot;spread&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:layout_constraintStart_toEndOf</span>=<span class="string">&quot;@id/btn_left_base_show_tip_dialog&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/h_line_base_show_tip_dialog&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">tools:text</span>=<span class="string">&quot;中间按钮&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn_right_base_show_tip_dialog&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:onClick</span>=<span class="string">&quot;@&#123;view::onRightButtonClick&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:paddingTop</span>=<span class="string">&quot;@dimen/viewSize12&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:paddingBottom</span>=<span class="string">&quot;@dimen/viewSize12&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;@&#123;rightButton&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textColor</span>=<span class="string">&quot;@color/colorAppTheme&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textSize</span>=<span class="string">&quot;@dimen/textSize14&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:layout_constraintHorizontal_chainStyle</span>=<span class="string">&quot;spread&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:layout_constraintStart_toEndOf</span>=<span class="string">&quot;@id/btn_center_base_show_tip_dialog&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/h_line_base_show_tip_dialog&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">tools:text</span>=<span class="string">&quot;右边按钮&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn_single_base_show_tip_dialog&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_margin</span>=<span class="string">&quot;@dimen/viewSize12&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:background</span>=<span class="string">&quot;@drawable/selector_background_1&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:onClick</span>=<span class="string">&quot;@&#123;view::onSingleButtonClick&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:paddingTop</span>=<span class="string">&quot;@dimen/viewSize10&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:paddingBottom</span>=<span class="string">&quot;@dimen/viewSize10&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;@&#123;singleButton&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textColor</span>=<span class="string">&quot;@color/colorWhite&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textSize</span>=<span class="string">&quot;@dimen/textSize16&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/h_line_base_show_tip_dialog&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">tools:text</span>=<span class="string">&quot;单一按钮&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">androidx.cardview.widget.CardView</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="调用-1"><a href="#调用-1" class="headerlink" title="调用"></a>调用</h3><p><img src="/posts/1852176610/dialog%E7%9A%84%E6%95%88%E6%9E%9C%E5%9B%BE.png" alt="安卓/dialog的效果图"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">SimpleTipDialog</span> <span class="variable">tipDialog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleTipDialog</span>(getActivity());</span><br><span class="line">tipDialog.setTipTitle(<span class="string">&quot;提示&quot;</span>);<span class="comment">//如果不需要标题，那么这一句删除</span></span><br><span class="line">tipDialog.setTipContent(<span class="string">&quot;确定要退出登录吗?&quot;</span>);<span class="comment">//如果不需要内容，那么这一句删除</span></span><br><span class="line">tipDialog.setButtons(<span class="string">&quot;点错了&quot;</span>, <span class="string">&quot;&quot;</span>, <span class="string">&quot;退出&quot;</span>, <span class="string">&quot;&quot;</span>);<span class="comment">//如果不需要对应按钮，那么对应按钮的文案设置为空字符串</span></span><br><span class="line">tipDialog.setSimpleTipDialogListener(() -&gt; &#123;</span><br><span class="line">    MySPUtils.logout(getActivity());</span><br><span class="line">    getActivity().finish();</span><br><span class="line">&#125;);</span><br><span class="line">tipDialog.show();</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果两个按钮都有点击事件，那么用</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">tipDialog</span><span class="selector-class">.setSimpleTipDialogListener1</span>(new SimpleTipDialog.ISimpleTipDialogListener1() &#123;</span><br><span class="line">    <span class="variable">@Override</span></span><br><span class="line">    public void onCancelClick() &#123;</span><br><span class="line">        <span class="comment">//这个是左侧按钮的点击事件</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable">@Override</span></span><br><span class="line">    public void onConfirmClick() &#123;</span><br><span class="line">        <span class="comment">//这个是左侧按钮的点击事件</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="使用-图片-一个按钮"><a href="#使用-图片-一个按钮" class="headerlink" title="使用-图片+一个按钮"></a>使用-图片+一个按钮</h2><p><img src="/posts/1852176610/dialog%E7%9A%84%E6%95%88%E6%9E%9C%E5%9B%BE1.png" alt="安卓/dialog的效果图1"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.text.TextUtils;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.NonNull;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> xxx.project.api.impl.bean.ResumeBean;</span><br><span class="line"><span class="keyword">import</span> xxx.project.cache.GeRenAppCache;</span><br><span class="line"><span class="keyword">import</span> xxx.project.manager.WechatSDKUtils;</span><br><span class="line"><span class="keyword">import</span> xxx.utils.datetime.KDateTimeUtils;</span><br><span class="line"><span class="keyword">import</span> xxx.widget.kdialog.KBaseFullScreenDialog;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Calendar;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BindWechatCheckDialog</span> <span class="keyword">extends</span> <span class="title class_">KBaseFullScreenDialog</span>&lt;LayoutDialogBindWechatBinding&gt; &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">BindWechatCheckDialog</span><span class="params">(<span class="meta">@NonNull</span> Context context)</span> &#123;</span><br><span class="line">		<span class="built_in">super</span>(context);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">protected</span> <span class="type">int</span> <span class="title function_">setContentViewRes</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> R.layout.layout_dialog_bind_wechat;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onContentViewCreated</span><span class="params">()</span> &#123;</span><br><span class="line">		mBinding.setView(<span class="built_in">this</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">check</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="type">ResumeBean</span> <span class="variable">resumeBean</span> <span class="operator">=</span> GeRenAppCache.getResumeCache();</span><br><span class="line">		<span class="keyword">if</span> (resumeBean != <span class="literal">null</span> &amp;&amp; resumeBean.getResumeRow() != <span class="literal">null</span>) &#123;</span><br><span class="line">			<span class="type">String</span> <span class="variable">showTime</span> <span class="operator">=</span> GeRenAppCache.getWechatCheckTime();</span><br><span class="line">			<span class="type">String</span> <span class="variable">currentDate</span> <span class="operator">=</span> KDateTimeUtils.getCurrentDate();</span><br><span class="line">			<span class="keyword">if</span> (TextUtils.isEmpty(showTime) || showTime.compareTo(currentDate) &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">				<span class="type">Calendar</span> <span class="variable">instance</span> <span class="operator">=</span> Calendar.getInstance();</span><br><span class="line">				instance.add(Calendar.DATE, <span class="number">7</span>);</span><br><span class="line">				<span class="type">int</span> <span class="variable">year</span> <span class="operator">=</span> instance.get(Calendar.YEAR);</span><br><span class="line">				<span class="type">int</span> <span class="variable">month</span> <span class="operator">=</span> instance.get(Calendar.MONTH) + <span class="number">1</span>;</span><br><span class="line">				<span class="type">int</span> <span class="variable">date</span> <span class="operator">=</span> instance.get(Calendar.DATE);</span><br><span class="line">				<span class="type">String</span> <span class="variable">nextShowTime</span> <span class="operator">=</span> year + <span class="string">&quot;-&quot;</span> + month + <span class="string">&quot;-&quot;</span> + date;</span><br><span class="line">				GeRenAppCache.saveWechatCheckTime(nextShowTime);</span><br><span class="line">				show();</span><br><span class="line">				<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">cancelDialog</span><span class="params">(View view)</span> &#123;</span><br><span class="line">		dismiss();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">launchMiniProgramRelease</span><span class="params">(View view)</span> &#123;</span><br><span class="line">		dismiss();</span><br><span class="line">		WechatSDKUtils.launchMiniProgramRelease(getContext());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="其中的布局-1"><a href="#其中的布局-1" class="headerlink" title="其中的布局"></a>其中的布局</h3><p><code>R.layout.layout_dialog_bind_wechat.xml</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">layout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">data</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">variable</span></span></span><br><span class="line"><span class="tag">            <span class="attr">name</span>=<span class="string">&quot;view&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">&quot;com.xm597.app.project.view.dialog.BindWechatCheckDialog&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">FrameLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">androidx.cardview.widget.CardView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;320dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;380dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:cardBackgroundColor</span>=<span class="string">&quot;@android:color/white&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:cardCornerRadius</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:cardElevation</span>=<span class="string">&quot;0dp&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn_close_wechat_bind_tips_dialog&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_gravity</span>=<span class="string">&quot;end&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:onClick</span>=<span class="string">&quot;@&#123;view::cancelDialog&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:paddingLeft</span>=<span class="string">&quot;16dp&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:paddingRight</span>=<span class="string">&quot;16dp&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;×&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textColor</span>=<span class="string">&quot;#6E6E6E&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textSize</span>=<span class="string">&quot;34sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;绑定微信提醒&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textColor</span>=<span class="string">&quot;#1D1D1D&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textSize</span>=<span class="string">&quot;22sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;4dp&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;聊天沟通回复及时知道，重要信息不再错过&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textColor</span>=<span class="string">&quot;#A6A6A6&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textSize</span>=<span class="string">&quot;12sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center_horizontal&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;4dp&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:background</span>=<span class="string">&quot;@android:color/white&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:src</span>=<span class="string">&quot;@drawable/icon_bind_wechat&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn_bind_wechat_bind_tips_dialog&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;58dp&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;58dp&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:background</span>=<span class="string">&quot;@drawable/selector_background_0&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:onClick</span>=<span class="string">&quot;@&#123;view::launchMiniProgramRelease&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:paddingTop</span>=<span class="string">&quot;12dp&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:paddingBottom</span>=<span class="string">&quot;12dp&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;去开启&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textColor</span>=<span class="string">&quot;@drawable/selector_txtcolor_0&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:textSize</span>=<span class="string">&quot;16sp&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">androidx.cardview.widget.CardView</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="调用-2"><a href="#调用-2" class="headerlink" title="调用"></a>调用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> BindWechatCheckDialog mBindWechatCheckDialog;<span class="comment">//成员变量</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (mBindWechatCheckDialog == <span class="literal">null</span>) &#123;</span><br><span class="line">    mBindWechatCheckDialog = <span class="keyword">new</span> <span class="title class_">BindWechatCheckDialog</span>(<span class="built_in">this</span>);</span><br><span class="line">    mBindWechatCheckDialog.setOnDismissListener(dialog -&gt; mPresenter.mWxSubscribe.setValue(-<span class="number">1</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">boolean</span> <span class="variable">check</span> <span class="operator">=</span> mBindWechatCheckDialog.check();</span><br><span class="line"><span class="keyword">if</span> (!check) &#123;</span><br><span class="line">    mPresenter.mWxSubscribe.setValue(-<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h1 id="Activity伪装成Dialog"><a href="#Activity伪装成Dialog" class="headerlink" title="Activity伪装成Dialog"></a>Activity伪装成Dialog</h1><p>在注册清单文件中把这个Activity的theme改成dialog的样式即可。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">package</span>=<span class="string">&quot;com.easymorse.dialog&quot;</span> <span class="attr">android:versionCode</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:versionName</span>=<span class="string">&quot;1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">application</span> <span class="attr">android:icon</span>=<span class="string">&quot;@drawable/icon&quot;</span> <span class="attr">android:label</span>=<span class="string">&quot;@string/app_name&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;.DialogActivity&quot;</span> <span class="attr">android:label</span>=<span class="string">&quot;@string/app_name&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">android:theme</span>=<span class="string">&quot;@android:style/Theme.Dialog&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.action.MAIN&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.category.LAUNCHER&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-sdk</span> <span class="attr">android:minSdkVersion</span>=<span class="string">&quot;8&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure>





<h1 id="DialogFragment"><a href="#DialogFragment" class="headerlink" title="DialogFragment"></a>DialogFragment</h1><p><a target="_blank" rel="noopener" href="https://github.com/crazyqiang/AndroidStudy">https://github.com/crazyqiang/AndroidStudy</a></p>
<h2 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h2><ol>
<li>不用提供布局，内置项目中常用默认的样式</li>
<li>支持自定义复杂的布局、动画、对话框大小、背景色等设置</li>
<li>统一管理多个dialog并顺序弹出</li>
</ol>
<h2 id="使用-1"><a href="#使用-1" class="headerlink" title="使用"></a>使用</h2><h3 id="引入lib-dialog这个库"><a href="#引入lib-dialog这个库" class="headerlink" title="引入lib_dialog这个库"></a>引入lib_dialog这个库</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//settings.gradle</span></span><br><span class="line">include <span class="string">&#x27;:lib_dialog&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//app的build.gradle</span></span><br><span class="line">implementation project(<span class="attr">path:</span> <span class="string">&quot;:lib_dialog&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="在代码中使用"><a href="#在代码中使用" class="headerlink" title="在代码中使用"></a><a target="_blank" rel="noopener" href="https://developer.aliyun.com/article/645531">在代码中使用</a></h3><h4 id="一个按钮"><a href="#一个按钮" class="headerlink" title="一个按钮"></a>一个按钮</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//一个按钮</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">SYDialog</span>.Builder(<span class="built_in">this</span>)</span><br><span class="line">    .setTitle(<span class="string">&quot;我是标题&quot;</span>)</span><br><span class="line">    .setContent(<span class="string">&quot;您好,我们将在30分钟处理，稍后通知您订单结果！&quot;</span>)</span><br><span class="line">    .setPositiveButton(<span class="keyword">new</span> <span class="title class_">IDialog</span>.OnClickListener() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(IDialog dialog)</span> &#123;</span><br><span class="line">            dialog.dismiss();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .show();</span><br></pre></td></tr></table></figure>

<h4 id="两个按钮"><a href="#两个按钮" class="headerlink" title="两个按钮"></a>两个按钮</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//两个按钮</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">SYDialog</span>.Builder(<span class="built_in">this</span>)</span><br><span class="line">    .setTitle(<span class="string">&quot;我是标题&quot;</span>)</span><br><span class="line">    .setContent(<span class="string">&quot;您好,我们将在30分钟处理，稍后通知您订单结果！&quot;</span>)</span><br><span class="line">    .setPositiveButton(<span class="keyword">new</span> <span class="title class_">IDialog</span>.OnClickListener() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(IDialog dialog)</span> &#123;</span><br><span class="line">            dialog.dismiss();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .setNegativeButton(<span class="keyword">new</span> <span class="title class_">IDialog</span>.OnClickListener() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(IDialog dialog)</span> &#123;</span><br><span class="line">            dialog.dismiss();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .show();</span><br></pre></td></tr></table></figure>

<h4 id="使用自定义布局"><a href="#使用自定义布局" class="headerlink" title="使用自定义布局"></a>使用自定义布局</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用自定义布局</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">SYDialog</span>.Builder(<span class="built_in">this</span>)</span><br><span class="line">    .setDialogView(R.layout.layout_dialog)<span class="comment">//设置dialog布局</span></span><br><span class="line">    .setAnimStyle(R.style.translate_style)<span class="comment">//设置动画 默认没有动画</span></span><br><span class="line">    .setScreenWidthP(<span class="number">0.85f</span>) <span class="comment">//设置屏幕宽度比例 0.0f-1.0f</span></span><br><span class="line">    .setGravity(Gravity.CENTER)<span class="comment">//设置Gravity</span></span><br><span class="line">    .setWindowBackgroundP(<span class="number">0.2f</span>)<span class="comment">//设置背景透明度 0.0f-1.0f 1.0f完全不透明</span></span><br><span class="line">    .setCancelable(<span class="literal">true</span>)<span class="comment">//设置是否屏蔽物理返回键 true不屏蔽 false屏蔽</span></span><br><span class="line">    .setCancelableOutSide(<span class="literal">true</span>)<span class="comment">//设置dialog外点击是否可以让dialog消失</span></span><br><span class="line">    .setBuildChildListener(<span class="keyword">new</span> <span class="title class_">IDialog</span>.OnBuildListener() &#123;</span><br><span class="line">        <span class="comment">//设置子View</span></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onBuildChildView</span><span class="params">(<span class="keyword">final</span> IDialog dialog, View view, <span class="type">int</span> layoutRes)</span> &#123;</span><br><span class="line">            <span class="comment">//dialog: IDialog</span></span><br><span class="line">            <span class="comment">//view： DialogView</span></span><br><span class="line">            <span class="comment">//layoutRes :Dialog的资源文件 如果一个Activity里有多个dialog 可以通过layoutRes来区分</span></span><br><span class="line">            <span class="keyword">final</span> <span class="type">EditText</span> <span class="variable">editText</span> <span class="operator">=</span> view.findViewById(R.id.et_content);</span><br><span class="line">            <span class="type">Button</span> <span class="variable">btn_ok</span> <span class="operator">=</span> view.findViewById(R.id.btn_ok);</span><br><span class="line">            btn_ok.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">                    <span class="type">String</span> <span class="variable">editTextStr</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">                    <span class="keyword">if</span> (!TextUtils.isEmpty(editText.getText())) &#123;</span><br><span class="line">                        editTextStr = editText.getText().toString();</span><br><span class="line">                    &#125;</span><br><span class="line">                    dialog.dismiss();</span><br><span class="line">                    Toast.makeText(MyApplication.getApplication(), editTextStr, Toast.LENGTH_SHORT).show();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).show();</span><br></pre></td></tr></table></figure>

<h4 id="统一管理多个Dialog依次弹出"><a href="#统一管理多个Dialog依次弹出" class="headerlink" title="统一管理多个Dialog依次弹出"></a>统一管理多个Dialog依次弹出</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SYDialog.<span class="type">Builder</span> <span class="variable">builder1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SYDialog</span>.Builder(<span class="built_in">this</span>);</span><br><span class="line">SYDialog.<span class="type">Builder</span> <span class="variable">builder2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SYDialog</span>.Builder(<span class="built_in">this</span>);</span><br><span class="line"><span class="comment">//添加第一个Dialog</span></span><br><span class="line">SYDialogsManager.getInstance().requestShow(<span class="keyword">new</span> <span class="title class_">DialogWrapper</span>(builder1));</span><br><span class="line"><span class="comment">//添加第二个Dialog</span></span><br><span class="line">SYDialogsManager.getInstance().requestShow(<span class="keyword">new</span> <span class="title class_">DialogWrapper</span>(builder2));</span><br></pre></td></tr></table></figure>



<h1 id="Dialog引发的内存泄露"><a href="#Dialog引发的内存泄露" class="headerlink" title="Dialog引发的内存泄露"></a>Dialog引发的内存泄露</h1><p>就是在activity关闭的时候dialog还在show状态</p>
<p>解决 ：(添加lifecycleObserver进行生命周期监听)</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> androidx.activity.ComponentActivity;</span><br><span class="line"><span class="keyword">import</span> androidx.lifecycle.Lifecycle;</span><br><span class="line"><span class="keyword">import</span> androidx.lifecycle.LifecycleObserver;</span><br><span class="line"><span class="keyword">import</span> androidx.lifecycle.OnLifecycleEvent;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TipDialog</span></span>(context: Context) : Dialog(context), LifecycleObserver&#123;</span><br><span class="line">    <span class="keyword">init</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(context  <span class="keyword">is</span> ComponentActivity)&#123;</span><br><span class="line">            (context <span class="keyword">as</span> ComponentActivity).lifecycle.addObserver(<span class="keyword">this</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState)</span><br><span class="line">        setContentView(R.layout.item_tip_dialog)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@OnLifecycleEvent(Lifecycle.Event.ON_DEESTROY)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">onDestroy</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(isShowing)&#123;</span><br><span class="line">            dismiss()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>









<h1 id="Dialog相关问题"><a href="#Dialog相关问题" class="headerlink" title="Dialog相关问题"></a>Dialog相关问题</h1><h2 id="Dialog上使用加载框progressdialog不显示"><a href="#Dialog上使用加载框progressdialog不显示" class="headerlink" title="Dialog上使用加载框progressdialog不显示"></a>Dialog上使用加载框progressdialog不显示</h2><h2 id="Dialog改变message无效的问题"><a href="#Dialog改变message无效的问题" class="headerlink" title="Dialog改变message无效的问题"></a>Dialog改变message无效的问题</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//关于加载框或者是dialogfragment，中途改变message消息无效的问题：</span></span><br><span class="line"><span class="comment">//参考如下写法，验证有效：</span></span><br><span class="line">mConnectResultTv.setText(mess);</span><br><span class="line">mConnectResultTv.invalidate();</span><br><span class="line">mConnectResultTv.postDelayed(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        dismiss();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,<span class="number">1000</span>);</span><br></pre></td></tr></table></figure>

<h2 id="dialog不居中的问题"><a href="#dialog不居中的问题" class="headerlink" title="dialog不居中的问题"></a>dialog不居中的问题</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Window</span> <span class="variable">dialogWindow</span> <span class="operator">=</span> mProgressDlg.getWindow();</span><br><span class="line">WindowManager.<span class="type">LayoutParams</span> <span class="variable">lp</span> <span class="operator">=</span> dialogWindow.getAttributes();</span><br><span class="line">dialogWindow.setGravity(Gravity.CENTER);</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//去除tile布局     mProgressDlg.requestWindowFeature(Window.FEATURE_NO_TITLE);</span></span><br><span class="line">mProgressDlg.setContentView(R.layout.dialog_progress);</span><br></pre></td></tr></table></figure>

<h2 id="Unable-to-add-window-–-token-null-is-not-valid"><a href="#Unable-to-add-window-–-token-null-is-not-valid" class="headerlink" title="Unable to add window – token null is not valid"></a>Unable to add window – token null is not valid</h2><p>问题详情：<code>android.view.WindowManager$BadTokenException: Unable to add window -- token null is not valid; is your activity running?</code></p>
<p>排查：dialog和progressbar等不能在ApplicationContext中创建，需要依托于Activity</p>
<p>解决：</p>
<h2 id="添加了windowSoftInputMode-x3D-adjustPan-adjustResize还是会被软键盘盖住"><a href="#添加了windowSoftInputMode-x3D-adjustPan-adjustResize还是会被软键盘盖住" class="headerlink" title="添加了windowSoftInputMode&#x3D;adjustPan|adjustResize还是会被软键盘盖住"></a>添加了windowSoftInputMode&#x3D;adjustPan|adjustResize还是会被软键盘盖住</h2><p>Activity的清单文件中加了 <code>android:windowSoftInputMode=&quot;adjustResize|adjustPan&quot;</code>，但dialog带edittext还是会被软键盘盖住（不会顶起来）</p>
<p>解决：原来是Activity在清单文件中的主题带有　<code>&lt;item name=&quot;android:windowTranslucentStatus&quot; tools:targetApi=&quot;19&quot;&gt;true&lt;/item&gt;</code> 属性，导致这个顶起效果失效，改activity的主题为<code>android:theme=&quot;@style/Theme.AppCompat.Light.NoActionBar&quot;</code></p>

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>请我喝杯奶茶吧~</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>Donate</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.jpg" alt=" WeChat Pay"/>
        <p>WeChat Pay</p>
      </div>
    

    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/%E5%AE%89%E5%8D%93%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5UI/" rel="tag"># 安卓代码片段UI</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/posts/a6fcb4d0/" rel="next" title="UI-Toast">
                <i class="fa fa-chevron-left"></i> UI-Toast
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/posts/810ca785/" rel="prev" title="UI-LoadingBar">
                UI-LoadingBar <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="" />
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">139</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">42</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="mailto:shenbh@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://blog.csdn.net/ptwenzi?spm=1010.2135.3001.5113" target="_blank" title="CSDN">
                      
                        <i class="fa fa-fw fa-clone"></i>CSDN</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/shenbh" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://gitee.com/shen_bh" target="_blank" title="Gitee">
                      
                        <i class="fa fa-fw fa-git"></i>Gitee</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Dialog%E7%9B%B8%E5%85%B3"><span class="nav-text">Dialog相关</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B8%83%E5%B1%80%E7%9A%84Dialog"><span class="nav-text">自定义布局的Dialog</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B8%83%E5%B1%80%E7%9A%84Dialog-%E9%80%89%E6%8B%A9%E6%97%A5%E6%9C%9FDialog"><span class="nav-text">自定义布局的Dialog+选择日期Dialog</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B7%A5%E5%85%B7"><span class="nav-text">工具</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B0%83%E7%94%A8"><span class="nav-text">调用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%A6%E8%BE%93%E5%85%A5%E6%A1%86%E7%9A%84%E5%BC%B9%E7%AA%97"><span class="nav-text">带输入框的弹窗</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%A6%E4%B8%80%E4%B8%AA-x2F-%E4%B8%A4%E4%B8%AA%E6%8C%89%E9%92%AE%E7%9A%84%E6%8F%90%E7%A4%BAdialog"><span class="nav-text">带一个&#x2F;两个按钮的提示dialog</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Dialog%E5%8E%BB%E9%99%A4%E8%BE%B9%E6%A1%86"><span class="nav-text">Dialog去除边框</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Dialog%E8%AE%BE%E7%BD%AE%E5%85%A8%E5%B1%8F%E6%97%B6%E9%9A%90%E8%97%8F%E7%8A%B6%E6%80%81%E6%A0%8F"><span class="nav-text">Dialog设置全屏时隐藏状态栏</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Dialog%E5%85%A8%E5%B1%8F%EF%BC%88%E4%B8%8D%E9%9A%90%E8%97%8F%E7%8A%B6%E6%80%81%E6%A0%8F%EF%BC%89"><span class="nav-text">Dialog全屏（不隐藏状态栏）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#dialog%E7%A6%81%E6%AD%A2%E7%B3%BB%E7%BB%9F%E8%BF%94%E5%9B%9E%E9%94%AE%EF%BC%88%E5%8C%85%E5%90%AB%E6%89%8B%E5%8A%BF%EF%BC%89"><span class="nav-text">dialog禁止系统返回键（包含手势）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%B9%E8%BD%AF%E9%94%AE%E7%9B%98%E5%90%8E%E5%86%8D%E5%BC%B9Dialog%EF%BC%8C%E8%BD%AF%E9%94%AE%E7%9B%98%E4%B8%8D%E8%A6%81%E6%94%B6%E7%BC%A9"><span class="nav-text">弹软键盘后再弹Dialog，软键盘不要收缩</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#xm597%E7%9A%84Dialog"><span class="nav-text">xm597的Dialog</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#BaseDialog"><span class="nav-text">BaseDialog</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8"><span class="nav-text">使用</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8F%A6%E4%B8%80%E5%A5%97Dialog%EF%BC%88DataBinding%EF%BC%89"><span class="nav-text">另一套Dialog（DataBinding）</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80"><span class="nav-text">基础</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-%E6%99%AE%E9%80%9A%E5%BC%B9%E7%AA%97"><span class="nav-text">使用-普通弹窗</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B6%E4%B8%AD%E7%9A%84%E5%B8%83%E5%B1%80"><span class="nav-text">其中的布局</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B0%83%E7%94%A8-1"><span class="nav-text">调用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-%E5%9B%BE%E7%89%87-%E4%B8%80%E4%B8%AA%E6%8C%89%E9%92%AE"><span class="nav-text">使用-图片+一个按钮</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B6%E4%B8%AD%E7%9A%84%E5%B8%83%E5%B1%80-1"><span class="nav-text">其中的布局</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B0%83%E7%94%A8-2"><span class="nav-text">调用</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Activity%E4%BC%AA%E8%A3%85%E6%88%90Dialog"><span class="nav-text">Activity伪装成Dialog</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DialogFragment"><span class="nav-text">DialogFragment</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9C%BA%E6%99%AF"><span class="nav-text">场景</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-1"><span class="nav-text">使用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%95%E5%85%A5lib-dialog%E8%BF%99%E4%B8%AA%E5%BA%93"><span class="nav-text">引入lib_dialog这个库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8%E4%BB%A3%E7%A0%81%E4%B8%AD%E4%BD%BF%E7%94%A8"><span class="nav-text">在代码中使用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%80%E4%B8%AA%E6%8C%89%E9%92%AE"><span class="nav-text">一个按钮</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%A4%E4%B8%AA%E6%8C%89%E9%92%AE"><span class="nav-text">两个按钮</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B8%83%E5%B1%80"><span class="nav-text">使用自定义布局</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%9F%E4%B8%80%E7%AE%A1%E7%90%86%E5%A4%9A%E4%B8%AADialog%E4%BE%9D%E6%AC%A1%E5%BC%B9%E5%87%BA"><span class="nav-text">统一管理多个Dialog依次弹出</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Dialog%E5%BC%95%E5%8F%91%E7%9A%84%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2"><span class="nav-text">Dialog引发的内存泄露</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Dialog%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98"><span class="nav-text">Dialog相关问题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Dialog%E4%B8%8A%E4%BD%BF%E7%94%A8%E5%8A%A0%E8%BD%BD%E6%A1%86progressdialog%E4%B8%8D%E6%98%BE%E7%A4%BA"><span class="nav-text">Dialog上使用加载框progressdialog不显示</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Dialog%E6%94%B9%E5%8F%98message%E6%97%A0%E6%95%88%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-text">Dialog改变message无效的问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#dialog%E4%B8%8D%E5%B1%85%E4%B8%AD%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-text">dialog不居中的问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Unable-to-add-window-%E2%80%93-token-null-is-not-valid"><span class="nav-text">Unable to add window – token null is not valid</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E4%BA%86windowSoftInputMode-x3D-adjustPan-adjustResize%E8%BF%98%E6%98%AF%E4%BC%9A%E8%A2%AB%E8%BD%AF%E9%94%AE%E7%9B%98%E7%9B%96%E4%BD%8F"><span class="nav-text">添加了windowSoftInputMode&#x3D;adjustPan|adjustResize还是会被软键盘盖住</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2018 &mdash; <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">阿炳</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('-1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

  
  <style>
    .copy-btn {
      display: inline-block;
      padding: 6px 12px;
      font-size: 13px;
      font-weight: 700;
      line-height: 20px;
      color: #333;
      white-space: nowrap;
      vertical-align: middle;
      cursor: pointer;
      background-color: #eee;
      background-image: linear-gradient(#fcfcfc, #eee);
      border: 1px solid #d5d5d5;
      border-radius: 3px;
      user-select: none;
      outline: 0;
    }

    .highlight-wrap .copy-btn {
      transition: opacity .3s ease-in-out;
      opacity: 0;
      padding: 2px 6px;
      position: absolute;
      right: 4px;
      top: 8px;
    }

    .highlight-wrap:hover .copy-btn,
    .highlight-wrap .copy-btn:focus {
      opacity: 1
    }

    .highlight-wrap {
      position: relative;
    }
  </style>
  
  <script>
    $('.highlight').each(function (i, e) {
      var $wrap = $('<div>').addClass('highlight-wrap')
      $(e).after($wrap)
      $wrap.append($('<button>').addClass('copy-btn').append('Copy').on('click', function (e) {
        var code = $(this).parent().find('.code').find('.line').map(function (i, e) {
          return $(e).text()
        }).toArray().join('\n')
        var ta = document.createElement('textarea')
        document.body.appendChild(ta)
        ta.style.position = 'absolute'
        ta.style.top = '0px'
        ta.style.left = '0px'
        ta.value = code
        ta.select()
        ta.focus()
        var result = document.execCommand('copy')
        document.body.removeChild(ta)
        
          if(result)$(this).text('Copied')
          else $(this).text('Copy failed')
        
        $(this).blur()
      })).on('mouseleave', function (e) {
        var $b = $(this).find('.copy-btn')
        setTimeout(function () {
          $b.text('Copy')
        }, 300)
      }).append(e)
    })
  </script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/clicklove.js"></script>