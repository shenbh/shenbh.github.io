<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="工具," />










<meta name="description" content="AS 快捷键速查表列出了keymap快捷键的名称. 可以直接通过AS setting界面搜索keymap. 通过对应的快捷键名称来添加或者修改快捷键.    功能描述 keymap对应名字 Mac Win&#x2F;Linux    提示错误解决方案 Show Intention Actions option + enter alt + enter   AS配置界面 Preferences com">
<meta property="og:type" content="article">
<meta property="og:title" content="AndroidStudio-代码快捷键&amp;模板">
<meta property="og:url" content="http://shenbh.github.io/posts/8f94baaa/index.html">
<meta property="og:site_name" content="YULI">
<meta property="og:description" content="AS 快捷键速查表列出了keymap快捷键的名称. 可以直接通过AS setting界面搜索keymap. 通过对应的快捷键名称来添加或者修改快捷键.    功能描述 keymap对应名字 Mac Win&#x2F;Linux    提示错误解决方案 Show Intention Actions option + enter alt + enter   AS配置界面 Preferences com">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://shenbh.github.io/posts/8f94baaa/%E5%B0%86%E8%BE%93%E5%85%A5%E5%86%85%E5%AE%B9%E9%A6%96%E5%AD%97%E6%AF%8D%E5%B0%8F%E5%86%99.png">
<meta property="og:image" content="http://shenbh.github.io/posts/8f94baaa/idea%E5%A2%9E%E5%8A%A0%E6%96%B9%E6%B3%95%E6%B3%A8%E9%87%8A%E6%A8%A1%E6%9D%BF.jpg">
<meta property="og:image" content="http://shenbh.github.io/posts/8f94baaa/AS%E7%94%9F%E6%88%90%E6%A8%A1%E6%9D%BF.jpg">
<meta property="og:image" content="http://shenbh.github.io/posts/8f94baaa/AS%E7%94%9F%E6%88%90%E6%A8%A1%E6%9D%BF-%E9%85%8D%E7%BD%AE%E5%8F%98%E9%87%8F.jpg">
<meta property="og:image" content="http://shenbh.github.io/posts/8f94baaa/AS4%E4%BB%A5%E4%B8%8A%E5%86%99%E6%A8%A1%E6%9D%BF.png">
<meta property="article:published_time" content="2020-08-19T03:38:01.000Z">
<meta property="article:modified_time" content="2024-12-06T01:55:09.981Z">
<meta property="article:author" content="阿炳">
<meta property="article:tag" content="工具">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://shenbh.github.io/posts/8f94baaa/%E5%B0%86%E8%BE%93%E5%85%A5%E5%86%85%E5%AE%B9%E9%A6%96%E5%AD%97%E6%AF%8D%E5%B0%8F%E5%86%99.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":true,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://shenbh.github.io/posts/8f94baaa/"/>





  <title>AndroidStudio-代码快捷键&模板 | YULI</title>
  








<meta name="generator" content="Hexo 6.1.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">YULI</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Just do IT Now.</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://shenbh.github.io/posts/8f94baaa/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YULI">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">AndroidStudio-代码快捷键&模板</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-08-19T11:38:01+08:00">
                2020-08-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%B7%A5%E5%85%B7/" itemprop="url" rel="index">
                    <span itemprop="name">工具</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="AS-快捷键"><a href="#AS-快捷键" class="headerlink" title="AS 快捷键"></a><a target="_blank" rel="noopener" href="https://github.com/suzeyu1992/repo/tree/master/project/AS">AS 快捷键</a></h1><p>速查表列出了<code>keymap</code>快捷键的名称. 可以直接通过<code>AS setting</code>界面搜索<code>keymap</code>. 通过对应的快捷键名称来添加或者修改快捷键.</p>
<table>
<thead>
<tr>
<th>功能描述</th>
<th>keymap对应名字</th>
<th>Mac</th>
<th>Win&#x2F;Linux</th>
</tr>
</thead>
<tbody><tr>
<td><strong>提示错误解决方案</strong></td>
<td><strong>Show Intention Actions</strong></td>
<td><strong><code>option + enter</code></strong></td>
<td><strong><code>alt + enter</code></strong></td>
</tr>
<tr>
<td>AS配置界面</td>
<td>Preferences</td>
<td><code>command + ,</code></td>
<td><code>control+alt+S</code></td>
</tr>
<tr>
<td>工程项目配置界面</td>
<td>Project Structure</td>
<td><code>command + ;</code></td>
<td><code>Control＋Alt+Shift+S</code></td>
</tr>
<tr>
<td><strong>快速构成代码</strong></td>
<td><strong>Code Generate</strong></td>
<td><strong><code>command + N</code></strong></td>
<td><strong><code>alt + insert</code></strong></td>
</tr>
<tr>
<td>代码提示</td>
<td>Completion&#x2F;Basic</td>
<td><code>control + space</code>(mac会冲突, 手动修改)</td>
<td><code>ctrl + 空格</code>(win同样大部分和输入法冲突, 手动修改)</td>
</tr>
<tr>
<td>选择视图</td>
<td>select in any view</td>
<td><code>option + F1</code></td>
<td><code>alt + F1</code></td>
</tr>
<tr>
<td>添加书签标识</td>
<td>Toggle Bookmark</td>
<td><code>option + F3</code></td>
<td><code>ctrl + F11</code></td>
</tr>
<tr>
<td><strong>显示书签</strong></td>
<td><strong>Show Bookmarks</strong></td>
<td><strong><code>command + F3</code></strong></td>
<td><strong><code>shift + F11</code></strong></td>
</tr>
<tr>
<td><strong>添加书签</strong></td>
<td><strong>Toggle Bookmark</strong></td>
<td><strong><code>F3</code></strong></td>
<td><strong><code>F11</code></strong></td>
</tr>
<tr>
<td><strong>向下移动一行</strong></td>
<td><strong>Move Line Down</strong></td>
<td><strong><code>option + shift + Down</code></strong></td>
<td><strong><code>alt + shift + Down</code></strong></td>
</tr>
<tr>
<td><strong>向上移动一行</strong></td>
<td><strong>Move Line Up</strong></td>
<td><strong><code>option + shift + Up</code></strong></td>
<td><strong><code>alt + shift + Up</code></strong></td>
</tr>
<tr>
<td>注释代码</td>
<td>Comment with Line Comment</td>
<td><code>command + /</code></td>
<td><code>ctrl + /</code></td>
</tr>
<tr>
<td>用代码模板包裹代码</td>
<td>surround with Live Template</td>
<td><code>command + option + J</code></td>
<td><code>ctrl + alt + J</code></td>
</tr>
<tr>
<td><strong>格式化代码</strong></td>
<td><strong>Reformat Code</strong></td>
<td><strong><code>command + option + L</code></strong></td>
<td><strong><code>ctrl + alt + L</code></strong></td>
</tr>
<tr>
<td>Copy Reference</td>
<td>Copy Reference</td>
<td><code>command + option + shift + C</code></td>
<td><code>ctrl + alt + shift + C</code></td>
</tr>
<tr>
<td><strong>if&#x2F;try等包裹代码</strong></td>
<td><strong>Surround With..</strong></td>
<td><strong><code>command + option + T</code></strong></td>
<td><strong><code>ctrl + alt + T</code></strong></td>
</tr>
<tr>
<td>查看声明</td>
<td>Declaration</td>
<td><code>command + B</code></td>
<td><code>ctrl + B</code></td>
</tr>
<tr>
<td><strong>快捷向下复制行</strong></td>
<td><strong>Duplicate Line or Block</strong></td>
<td><strong><code>command + D</code></strong></td>
<td><strong><code>ctrl + D</code></strong></td>
</tr>
<tr>
<td><strong>删除行</strong></td>
<td><strong>Delete Line</strong></td>
<td><strong><code>command + delete</code></strong></td>
<td><strong><code>ctrl + Y</code></strong></td>
</tr>
<tr>
<td>快捷最近打开</td>
<td>Recent Files</td>
<td><code>command + E</code></td>
<td><code>ctrl + E</code></td>
</tr>
<tr>
<td><strong>查找</strong></td>
<td><strong>Edit&#x2F;Find&#x2F;Find</strong></td>
<td><strong><code>command + F</code></strong></td>
<td><strong><code>ctrl + F</code></strong></td>
</tr>
<tr>
<td><strong>全路径查找</strong></td>
<td><strong>Find in Path</strong></td>
<td><strong><code>command + shift + F</code></strong></td>
<td><strong><code>ctrl + shift + F</code></strong></td>
</tr>
<tr>
<td><strong>文件方法结构（类似eclipse中的Ctrl+O)</strong></td>
<td><strong>File Structure</strong></td>
<td><strong><code>command + F12</code></strong></td>
<td><strong><code>ctrl + F12</code></strong></td>
</tr>
<tr>
<td>代码高亮向下查找</td>
<td>Move To Next Occurrence</td>
<td><code>command + G</code></td>
<td><code>F3</code></td>
</tr>
<tr>
<td>代码高亮向上查找</td>
<td>Move To Previous Occurrence</td>
<td><code>command + shift + G</code></td>
<td><code>shift + F3</code></td>
</tr>
<tr>
<td>按照模板生成代码</td>
<td>Insert Live Template</td>
<td><code>command + J</code></td>
<td><code>ctrl + J</code></td>
</tr>
<tr>
<td><strong>定位到行</strong></td>
<td><strong>Navigate&#x2F;Line</strong></td>
<td><strong><code>command + L</code></strong></td>
<td><strong><code>ctrl + G</code></strong></td>
</tr>
<tr>
<td>快速到行首&#x2F;尾</td>
<td>Move Caret to Line Start&#x2F;End</td>
<td><code>command + Left/Right</code></td>
<td><code>ctrl + Left/Right</code></td>
</tr>
<tr>
<td>代码折叠&#x2F;展开</td>
<td>Collapse&#x2F;Expand</td>
<td><code>command + 减号/加号</code></td>
<td><code>ctrl + 减号/加号</code></td>
</tr>
<tr>
<td>查找类</td>
<td>Navigate&#x2F;Class</td>
<td><code>command + O</code></td>
<td><code>ctrl + N</code></td>
</tr>
<tr>
<td>多行注释</td>
<td>**Code&#x2F;Comment **</td>
<td><code>command + option + /</code></td>
<td><code>ctrl + alt + /</code></td>
</tr>
<tr>
<td>格式化代码</td>
<td>Reformat Code</td>
<td><code>command + option + L</code></td>
<td><code>ctrl + alt + L</code></td>
</tr>
<tr>
<td>提示参数类型</td>
<td>Parameter Info</td>
<td><code>command + P</code></td>
<td><code>ctrl + P</code></td>
</tr>
<tr>
<td><strong>查找替换</strong></td>
<td><strong>Replace</strong></td>
<td><strong><code>command + R</code></strong></td>
<td><strong><code>ctrl + R</code></strong></td>
</tr>
<tr>
<td>查找命令</td>
<td>Find Action</td>
<td><code>command + shift + A</code></td>
<td><code>ctrl + shift + A</code></td>
</tr>
<tr>
<td>拷贝文件路径</td>
<td>Copy Paths</td>
<td><code>command + shift + C</code></td>
<td><code>ctrl + shift + C</code></td>
</tr>
<tr>
<td><strong>移动代码块</strong></td>
<td><strong>Move Statement Up&#x2F;Down</strong></td>
<td><strong><code>command + shift + down/up</code></strong></td>
<td><strong><code>ctrl + shift + down/up</code></strong></td>
</tr>
<tr>
<td><strong>代码补全</strong></td>
<td><strong>Complete Current Statement</strong></td>
<td><strong><code>command + shift + enter</code></strong></td>
<td><strong><code>ctrl + shift + enter</code></strong></td>
</tr>
<tr>
<td>代码高亮</td>
<td>Highlight Usages in File</td>
<td><code>command + shift + F7</code></td>
<td><code>alt + J</code></td>
</tr>
<tr>
<td>窗口内所有代码折叠&#x2F;展开</td>
<td>Collapse&#x2F;Expand All</td>
<td><code>command + shift + 减号/加号</code></td>
<td><code>ctrl + shift + 减号/加号</code></td>
</tr>
<tr>
<td>查找文件</td>
<td>Navigate&#x2F;File</td>
<td><code>command + shift + O</code></td>
<td><code>ctrl + shift + N</code></td>
</tr>
<tr>
<td>全路径中替换</td>
<td>Replace in Path</td>
<td><code>command + shift + R</code></td>
<td><code>ctrl + shift + R</code></td>
</tr>
<tr>
<td>大小写转换</td>
<td>Toggle Case</td>
<td><code>command + shift + U</code></td>
<td><code>ctrl + shift + U</code></td>
</tr>
<tr>
<td>显示粘贴版历史</td>
<td>Paste from History</td>
<td><code>command + shift + V</code></td>
<td><code>ctrl + shift + V</code></td>
</tr>
<tr>
<td>快速查找定义</td>
<td></td>
<td><code>command + space</code></td>
<td><code>ctrl + shift + I</code></td>
</tr>
<tr>
<td>粘贴</td>
<td>Paste</td>
<td><code>command + V</code></td>
<td><code>ctrl + V</code></td>
</tr>
<tr>
<td>复制</td>
<td>Copy</td>
<td><code>command + C</code></td>
<td><code>ctrl + C</code></td>
</tr>
<tr>
<td><strong>去除无效包引用</strong></td>
<td><strong>Optimize Imports</strong></td>
<td><strong><code>control + option + O</code></strong></td>
<td><strong><code>ctrl + alt + O</code></strong></td>
</tr>
<tr>
<td>显示类关系继承体系</td>
<td>Type Hierarchy</td>
<td><code>control + H</code></td>
<td><code>ctrl + H</code></td>
</tr>
<tr>
<td>快速覆写方法</td>
<td>override Methods</td>
<td><code>control + O</code></td>
<td><code>ctrl + O</code></td>
</tr>
<tr>
<td>查找调用的位置</td>
<td>Call hierarchy</td>
<td><code>control + option + H</code></td>
<td><code>ctrl + alt + H</code></td>
</tr>
<tr>
<td>扩大缩小选中范围</td>
<td>Extend Selection&#x2F;Shrink Selection</td>
<td><code>option + UP/Down</code></td>
<td><code>ctrl + W + shift + W</code></td>
</tr>
<tr>
<td>跳转到父类</td>
<td>Super method</td>
<td><code>command + U</code></td>
<td><code>ctrl + U</code></td>
</tr>
<tr>
<td>关闭当前tab标签</td>
<td>Editor Tabs &#x2F; Close</td>
<td><code>command + W</code></td>
<td><code>ctrl + shift + a</code></td>
</tr>
<tr>
<td>关闭除编辑窗口的其余窗口</td>
<td>Hide All Tool Windows</td>
<td><code>command + shift + F12</code></td>
<td><code>ctrl + shift + F12</code></td>
</tr>
<tr>
<td>预览方法定义</td>
<td>Quick Definition</td>
<td><code>command + Y</code></td>
<td><code>ctrl + shift + I</code></td>
</tr>
<tr>
<td>返回光标最后编辑位置</td>
<td>Last Edit Location</td>
<td><code>command + shift + delete</code></td>
<td><code>control + shift + Backspace</code></td>
</tr>
<tr>
<td>调到代码块首部&#x2F;尾部</td>
<td>Move Caret To Code Block</td>
<td><code>Option + Command + [ 或者 ]</code></td>
<td><code>Control+[ 或者 ]</code></td>
</tr>
<tr>
<td>重命名</td>
<td>Rename</td>
<td><code>shift + F6</code></td>
<td><code>shift + F6</code></td>
</tr>
<tr>
<td>抽取方法</td>
<td>Extract Method</td>
<td><code>command + option + M</code></td>
<td><code>control+alt+M</code></td>
</tr>
<tr>
<td>抽取变量</td>
<td>Extract Variable</td>
<td><code>command + option + V</code></td>
<td><code>control+alt+V</code></td>
</tr>
<tr>
<td>抽取字段</td>
<td>Extract Field</td>
<td><code>command + option + F</code></td>
<td><code>control+alt+F</code></td>
</tr>
<tr>
<td>抽取常量</td>
<td>Extract Constant</td>
<td><code>command + option + C</code></td>
<td><code>control+alt+C</code></td>
</tr>
<tr>
<td>抽取参数</td>
<td>Extract Parameter</td>
<td><code>command + option + P</code></td>
<td><code>control+alt+P</code></td>
</tr>
<tr>
<td>重构入口</td>
<td>Refactor This</td>
<td><code>control + T</code></td>
<td><code>ctrl + alt + shift + T</code></td>
</tr>
<tr>
<td><strong>打开文件</strong></td>
<td></td>
<td><strong>双击Shift</strong></td>
<td><strong>双击Shift</strong></td>
</tr>
<tr>
<td><strong>撤销</strong></td>
<td></td>
<td><strong>Command+Z</strong></td>
<td><strong>Ctrl+Z</strong></td>
</tr>
<tr>
<td><strong>前进</strong></td>
<td></td>
<td><strong>Command+Shift+Z</strong></td>
<td><strong>Ctrl+Shift+Z</strong></td>
</tr>
</tbody></table>
<p>Idea的<code>Structure</code>（View–Tool Windows–Structure）类似于eclipse中的<code>outline</code></p>
<h1 id="代码中快捷键-Live-Templates"><a href="#代码中快捷键-Live-Templates" class="headerlink" title="代码中快捷键(Live Templates)"></a>代码中快捷键(Live Templates)</h1><figure class="highlight moonscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="name">C</span>:\Users\monecity\.AndroidStudio3<span class="number">.6</span>\config\templates</span><br></pre></td></tr></table></figure>

<figure class="highlight moonscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="name">C</span>:\Users\monecity\.AndroidStudio3<span class="number">.6</span>\config\fileTemplates</span><br></pre></td></tr></table></figure>

<p>注意，上面的路径在AS4.1之后变了，具体可以这么找<code>AS&gt;File&gt;Manage IDE Settings&gt;Restore Default Settings...</code>在弹出框中可以看到新的路径（已经没有了<code>config</code>和<code>system</code>这俩目录）</p>
<figure class="highlight moonscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="name">C</span>:\Users\Administrator\AppData\Roaming\Google\AndroidStudio4<span class="number">.1</span>\templates</span><br><span class="line"><span class="name">C</span>:\Users\Administrator\AppData\Roaming\Google\AndroidStudio4<span class="number">.1</span>\fileTemplates</span><br></pre></td></tr></table></figure>


<h2 id="模板变量表达式含义表"><a href="#模板变量表达式含义表" class="headerlink" title="模板变量表达式含义表"></a><a target="_blank" rel="noopener" href="https://www.cnblogs.com/masahiro/p/15161432.html">模板变量表达式含义表</a></h2><p>以下是定义变量时支持的表达式基本含义（当匹配多个结果时结果将出现在待选列表中）：</p>
<table>
<thead>
<tr>
<th align="left">表达式</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>annotated(&lt;annotation&gt;)</code></td>
<td align="center">返回具有指定注解的类，方法或字段名</td>
</tr>
<tr>
<td align="left"><code>arrayVariable()</code></td>
<td align="center">返回当前范围内数组变量，最近的优先展示</td>
</tr>
<tr>
<td align="left"><code>lineCommentStart()</code></td>
<td align="center">返回当前语言指示行注释开始的字符</td>
</tr>
<tr>
<td align="left"><code>blockCommentStart()</code></td>
<td align="center">返回当前语言指示块注释开始的字符</td>
</tr>
<tr>
<td align="left"><code>blockCommentEnd()</code></td>
<td align="center">返回当前语言指示块注释结束的字符</td>
</tr>
<tr>
<td align="left"><code>commentStart()</code></td>
<td align="center">返回当前语言指示注释开始的字符，对有行注释的返回行注释开头</td>
</tr>
<tr>
<td align="left"><code>commentEnd()</code></td>
<td align="center">返回当前语言指示注释结束的字符，对有行注释的返回空（行注释通常没有结束字符）</td>
</tr>
<tr>
<td align="left"><code>camelCase(&lt;String&gt;)</code></td>
<td align="center">将字符串转换为驼峰形式</td>
</tr>
<tr>
<td align="left"><code>snakeCase(&lt;String&gt;)</code></td>
<td align="center">将字符串转换为下划线分割形式</td>
</tr>
<tr>
<td align="left"><code>spaceSeparated(&lt;String&gt;)</code></td>
<td align="center">将字符串转换为空格分开形式</td>
</tr>
<tr>
<td align="left"><code>spacesToUnderscores(&lt;String&gt;)</code></td>
<td align="center">将字符串的空格替换为下划线</td>
</tr>
<tr>
<td align="left"><code>capitalize(&lt;String&gt;)</code></td>
<td align="center">将字符串首字母设为大写</td>
</tr>
<tr>
<td align="left"><code>capitalizeAndUnderscore(&lt;String&gt;)</code></td>
<td align="center">将字符串转换为大写并用下划线隔开</td>
</tr>
<tr>
<td align="left"><code>decapitalize(&lt;String&gt;)</code></td>
<td align="center">将字符串首字母设为小写</td>
</tr>
<tr>
<td align="left"><code>underscoresToCamelCase(&lt;String&gt;)</code></td>
<td align="center">将下划线形式字符串转换为驼峰形式</td>
</tr>
<tr>
<td align="left"><code>underscoresToSpaces(&lt;String&gt;)</code></td>
<td align="center">将下划线形式字符串转换为空格隔开形式</td>
</tr>
<tr>
<td align="left"><code>lowercaseAndDash(&lt;String&gt;)</code></td>
<td align="center">将字符串转为小写并使用中划线分割</td>
</tr>
<tr>
<td align="left"><code>escapeString(&lt;String&gt;)</code></td>
<td align="center">将字符串中的特殊符号进行转义，便于在java字符串中使用</td>
</tr>
<tr>
<td align="left"><code>substringBefore(&lt;String&gt;, &lt;Delimeter&gt;)</code></td>
<td align="center">截取字符串在<code>&lt;Delimeter&gt;</code>之前的部分</td>
</tr>
<tr>
<td align="left"><code>firstWord(&lt;String&gt;)</code></td>
<td align="center">返回字符串中的首个单词</td>
</tr>
<tr>
<td align="left"><code>castToLeftSideType()</code></td>
<td align="center">获取左侧变量的类型判断是否需要强转</td>
</tr>
<tr>
<td align="left"><code>rightSideType()</code></td>
<td align="center">获取右侧表达式的变量类型</td>
</tr>
<tr>
<td align="left"><code>className()</code></td>
<td align="center">返回当前所在类（在内部类则返回内部类）类名</td>
</tr>
<tr>
<td align="left"><code>currentPackage()</code></td>
<td align="center">返回当前所在包名</td>
</tr>
<tr>
<td align="left"><code>qualifiedClassName()</code></td>
<td align="center">返回当前所在类（在内部类则返回内部类）的全限定类名（包+类名）</td>
</tr>
<tr>
<td align="left"><code>classNameComplete()</code></td>
<td align="center">触发类名相关的代码补全</td>
</tr>
<tr>
<td align="left"><code>clipboard()</code></td>
<td align="center">返回系统剪贴板的内容</td>
</tr>
<tr>
<td align="left"><code>complete()</code></td>
<td align="center">调用一次代码补全，相当于调用一次<code>_Ctrl+Space_</code></td>
</tr>
<tr>
<td align="left"><code>completeSmart()</code></td>
<td align="center">调用一次智能代码补全，相当于调用一次<code>_Ctrl+Alt+Space_</code></td>
</tr>
<tr>
<td align="left"><code>componentTypeOf(&lt;array&gt;)</code></td>
<td align="center">返回数组类型</td>
</tr>
<tr>
<td align="left"><code>concat(&lt;String&gt;, …)</code></td>
<td align="center">拼接字符串</td>
</tr>
<tr>
<td align="left"><code>date([format])</code></td>
<td align="center">指定格式化方式返回当前系统时间字符串（根据<code>_SimpleDateFormat_</code>格式）</td>
</tr>
<tr>
<td align="left"><code>time([format])</code></td>
<td align="center">指定格式化方式返回当前系统时间字符串（无日期，根据<code>_SimpleDateFormat_</code>格式）</td>
</tr>
<tr>
<td align="left"><code>descendantClassesEnum(&lt;String&gt;)</code></td>
<td align="center">返回指定类的子类</td>
</tr>
<tr>
<td align="left"><code>lineNumber()</code></td>
<td align="center">返回当前行行号</td>
</tr>
<tr>
<td align="left"><code>enum(&lt;String&gt;, …)</code></td>
<td align="center">返回建议的字符串列表</td>
</tr>
<tr>
<td align="left"><code>expectedType()</code></td>
<td align="center">自动识别并返回期望的类型，一般用于赋值，方法参数，返回语句处。</td>
</tr>
<tr>
<td align="left"><code>fileName()</code></td>
<td align="center">返回当前文件名（带拓展名）</td>
</tr>
<tr>
<td align="left"><code>fileNameWithoutExtension()</code></td>
<td align="center">返回当前文件名（不带拓展名）</td>
</tr>
<tr>
<td align="left"><code>filePath()</code></td>
<td align="center">返回当前文件路径（带拓展名）</td>
</tr>
<tr>
<td align="left"><code>fileRelativePath()</code></td>
<td align="center">返回当前文件相对当前项目的路径（带拓展名）</td>
</tr>
<tr>
<td align="left"><code>groovyScript(&lt;String&gt;, [arg, …])</code></td>
<td align="center">执行作为字符串形式传递的<code>_groovy_</code>脚本</td>
</tr>
<tr>
<td align="left"><code>guessElementType(&lt;Collection&gt;)</code></td>
<td align="center">返回集合中元素的类型</td>
</tr>
<tr>
<td align="left"><code>iterableComponentType(&lt;Iterable&gt;)</code></td>
<td align="center">返回可迭代对象的类型</td>
</tr>
<tr>
<td align="left"><code>iterableVariable()</code></td>
<td align="center">返回当前范围内可迭代类型对象，最近的优先展示</td>
</tr>
<tr>
<td align="left"><code>methodName()</code></td>
<td align="center">返回当前所在方法名</td>
</tr>
<tr>
<td align="left"><code>methodParameters()</code></td>
<td align="center">返回当前所在方法的所有参数名</td>
</tr>
<tr>
<td align="left"><code>methodReturnType()</code></td>
<td align="center">返回当前所在方法的返回类型</td>
</tr>
<tr>
<td align="left"><code>regularExpression(&lt;String&gt;, &lt;Pattern&gt;, &lt;Replacement&gt;)</code></td>
<td align="center">查找字符串中满足<code>&lt;Pattern&gt;</code>的所有部分并替换为<code>&lt;Replacement&gt;</code></td>
</tr>
<tr>
<td align="left"><code>typeOfVariable(&lt;String&gt;)</code></td>
<td align="center">返回变量的类型</td>
</tr>
<tr>
<td align="left"><code>variableOfType(&lt;String&gt;)</code></td>
<td align="center">返回当前范围内满足类型条件的变量，最近的优先展示</td>
</tr>
<tr>
<td align="left"><code>suggestFirstVariableName(&lt;String&gt;)</code></td>
<td align="center">返回当前范围内满足类型条件的部分变量，最近的优先展示和<code>_variableOfType_</code>类似但不推荐true，false，this，和super</td>
</tr>
<tr>
<td align="left"><code>subtypes(&lt;String&gt;)</code></td>
<td align="center">返回指定类型的子类型</td>
</tr>
<tr>
<td align="left"><code>suggestIndexName()</code></td>
<td align="center">返回当前范围中未使用的第一个常用迭代下标变量名（i，j，k等）</td>
</tr>
<tr>
<td align="left"><code>suggestVariableName()</code></td>
<td align="center">根据变量命名规则的代码风格设置返回建议的变量名</td>
</tr>
<tr>
<td align="left"><code>suggestShortVariableName()</code></td>
<td align="center">建议的变量名精简版</td>
</tr>
<tr>
<td align="left"><code>user()</code></td>
<td align="center">返回当前系统的用户名称</td>
</tr>
<tr>
<td align="left"><img src="/posts/8f94baaa/%E5%B0%86%E8%BE%93%E5%85%A5%E5%86%85%E5%AE%B9%E9%A6%96%E5%AD%97%E6%AF%8D%E5%B0%8F%E5%86%99.png" alt="将输入内容首字母小写"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h2 id="shenbh"><a href="#shenbh" class="headerlink" title="shenbh"></a>shenbh</h2><h3 id="方法注释"><a href="#方法注释" class="headerlink" title="* 方法注释"></a>* <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/2b17c3879879">方法注释</a></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* &lt;pre&gt;</span><br><span class="line">*     <span class="meta">@desc</span>   : $cursor$</span><br><span class="line">*     <span class="meta">@Param</span>  : $PARAM$</span><br><span class="line">*     <span class="meta">@Return</span> : $RETURN$</span><br><span class="line">*     <span class="meta">@Author</span> : shenbh</span><br><span class="line">*     <span class="meta">@Date</span>   : $DATE$ $TIME$</span><br><span class="line">* &lt;/pre&gt;</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<p><img src="/posts/8f94baaa/idea%E5%A2%9E%E5%8A%A0%E6%96%B9%E6%B3%95%E6%B3%A8%E9%87%8A%E6%A8%A1%E6%9D%BF.jpg" alt="idea增加方法注释模板.png"></p>
<p>使用的时候 “<code>/**</code>+Tab”</p>
<h3 id="add-“增加”注释"><a href="#add-“增加”注释" class="headerlink" title="add “增加”注释"></a>add “增加”注释</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//region add by shenbh on $DATE$ $END$</span></span><br><span class="line"><span class="comment">//endregion add</span></span><br></pre></td></tr></table></figure>

<h3 id="anno-annotation添加方法注释"><a href="#anno-annotation添加方法注释" class="headerlink" title="anno annotation添加方法注释"></a>anno annotation添加方法注释</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;pre&gt;</span></span><br><span class="line"><span class="comment"> *     desc    : $END$</span></span><br><span class="line"><span class="comment"> *     author  : shenbh</span></span><br><span class="line"><span class="comment"> * &lt;/pre&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<h3 id="db-添加switch的默认项"><a href="#db-添加switch的默认项" class="headerlink" title="db 添加switch的默认项"></a>db 添加switch的默认项</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">default</span>:</span><br><span class="line">    <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>

<h3 id="doublesingleton-双重锁定创建单例模式，开销较大"><a href="#doublesingleton-双重锁定创建单例模式，开销较大" class="headerlink" title="doublesingleton 双重锁定创建单例模式，开销较大"></a>doublesingleton 双重锁定创建单例模式，开销较大</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> $CLASS_NAME$ <span class="title function_">getInstance</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (singleton == <span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> ($CLASS_NAME$.class)&#123;</span><br><span class="line">            <span class="keyword">if</span> (singleton == <span class="literal">null</span>)&#123;</span><br><span class="line">                singleton = <span class="keyword">new</span> <span class="title class_">$CLASS_NAME$</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> singleton;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> <span class="type">$CLASS_NAME$</span> <span class="variable">singleton</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> $CLASS_NAME$()&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="doubleSingleWithContext-双重锁定创建单例模式，带Context"><a href="#doubleSingleWithContext-双重锁定创建单例模式，带Context" class="headerlink" title="doubleSingleWithContext 双重锁定创建单例模式，带Context"></a>doubleSingleWithContext 双重锁定创建单例模式，带Context</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> $CLASS_NAME$ <span class="title function_">getInstance</span><span class="params">(Context context)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (singleton == <span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> ($CLASS_NAME$.class)&#123;</span><br><span class="line">            <span class="keyword">if</span> (singleton == <span class="literal">null</span>)&#123;</span><br><span class="line">                singleton = <span class="keyword">new</span> <span class="title class_">$CLASS_NAME$</span>(context);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> singleton;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> <span class="type">$CLASS_NAME$</span> <span class="variable">singleton</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> WeakReference&lt;Context&gt; wf;</span><br><span class="line"><span class="keyword">private</span> $CLASS_NAME$(Context context)&#123;</span><br><span class="line">    wf = <span class="keyword">new</span> <span class="title class_">WeakReference</span>&lt;Context&gt;(context);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="hand-创建自己的Handler"><a href="#hand-创建自己的Handler" class="headerlink" title="hand 创建自己的Handler"></a>hand 创建自己的Handler</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">MyHandler</span> <span class="keyword">extends</span> <span class="title class_">Handler</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> WeakReference&lt;$CLASS_NAME$&gt; actWeakReference;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyHandler</span><span class="params">($CLASS_NAME$ activity)</span> &#123;</span><br><span class="line">        actWeakReference = <span class="keyword">new</span> <span class="title class_">WeakReference</span>&lt;$CLASS_NAME$&gt;(activity);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleMessage</span><span class="params">(Message msg)</span> &#123;</span><br><span class="line">        <span class="type">$CLASS_NAME$</span> <span class="variable">act</span> <span class="operator">=</span> actWeakReference.get();</span><br><span class="line">        <span class="keyword">if</span> (act != <span class="literal">null</span>) &#123;</span><br><span class="line">            $END$</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="mdf-“修改”注释"><a href="#mdf-“修改”注释" class="headerlink" title="mdf “修改”注释"></a>mdf “修改”注释</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//region modify by shenbh on $DATE$ $END$</span></span><br><span class="line"><span class="comment">//endregion modify</span></span><br></pre></td></tr></table></figure>

<h3 id="newFragment-创建fragment"><a href="#newFragment-创建fragment" class="headerlink" title="newFragment 创建fragment"></a>newFragment 创建fragment</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> $CLASS_NAME$()&#123;&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> $CLASS_NAME$ <span class="title function_">newInstance</span><span class="params">(Map&lt;String, Object&gt; map)</span> &#123;</span><br><span class="line">    <span class="type">$CLASS_NAME$</span> <span class="variable">fragment</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">$CLASS_NAME$</span>();</span><br><span class="line">    <span class="keyword">if</span> (map != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="type">Bundle</span> <span class="variable">args</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bundle</span>();</span><br><span class="line">        args.putInt(<span class="string">&quot;key&quot;</span>, (<span class="type">int</span>) map.get(<span class="string">&quot;key&quot;</span>));</span><br><span class="line">        args.putParcelable(<span class="string">&quot;key&quot;</span>, (Uri) map.get(<span class="string">&quot;key&quot;</span>));</span><br><span class="line">        args.putBoolean(<span class="string">&quot;key&quot;</span>, (<span class="type">boolean</span>) map.get(<span class="string">&quot;key&quot;</span>));</span><br><span class="line">        args.putString(<span class="string">&quot;key&quot;</span>,(String) map.get(<span class="string">&quot;key&quot;</span>));</span><br><span class="line">        fragment.setArguments(args);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> fragment;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="note-类注释"><a href="#note-类注释" class="headerlink" title="note 类注释"></a>note 类注释</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * $END$</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shenbh</span></span><br><span class="line"><span class="comment"> * time $DATE$ $TIME$</span></span><br><span class="line"><span class="comment"> * 维护者 </span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<h3 id="staticClassSingleton-静态内部类单例，无法传参"><a href="#staticClassSingleton-静态内部类单例，无法传参" class="headerlink" title="staticClassSingleton 静态内部类单例，无法传参"></a>staticClassSingleton 静态内部类单例，无法传参</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">TAG</span> <span class="operator">=</span> <span class="string">&quot;$CLASS_NAME$&quot;</span>.class.getName();</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> $CLASS_NAME$()&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> $CLASS_NAME$ <span class="title function_">getInstance</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $CLASS_NAME$Holder.singleton;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 单例模式-&gt;静态内部类&lt;br/&gt;</span></span><br><span class="line"><span class="comment"> * 多线程情况下，使用合理一些,推荐</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">$CLASS_NAME$Holder</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">$CLASS_NAME$</span> <span class="variable">singleton</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">$CLASS_NAME$</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ma-“Module-annotations模块注释”"><a href="#ma-“Module-annotations模块注释”" class="headerlink" title="ma “Module annotations模块注释”"></a>ma “Module annotations模块注释”</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//region ******$END$*******</span></span><br><span class="line"><span class="comment">//endregion ******$END$******</span></span><br></pre></td></tr></table></figure>

<h3 id="psv-“public-static-void”"><a href="#psv-“public-static-void”" class="headerlink" title="psv  “public static void”"></a>psv  “public static void”</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> $END$</span><br></pre></td></tr></table></figure>

<h3 id="sw-“switch”"><a href="#sw-“switch”" class="headerlink" title="sw “switch”"></a>sw “switch”</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span>(view.getId())&#123;</span><br><span class="line">    <span class="keyword">case</span> $END$:</span><br><span class="line"></span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> $END$:</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="todo-添加-x2F-x2F-TODO"><a href="#todo-添加-x2F-x2F-TODO" class="headerlink" title="todo 添加 &#x2F;&#x2F; TODO"></a>todo 添加 &#x2F;&#x2F; TODO</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//<span class="doctag">TODO:</span> shenbh $date$ $todo$</span></span><br></pre></td></tr></table></figure>

<h3 id="try-“creat-try-catch”"><a href="#try-“creat-try-catch”" class="headerlink" title="try “creat try-catch”"></a>try “creat try-catch”</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    $END$</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="u1city"><a href="#u1city" class="headerlink" title="u1city"></a>u1city</h2><h3 id="layout-“create-layout-res-id-const”"><a href="#layout-“create-layout-res-id-const”" class="headerlink" title="layout “create layout res id const”"></a>layout “create layout res id const”</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@LayoutRes</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">PAGE_LAYOUT_RES_ID</span> <span class="operator">=</span> R.layout.activity_xxx;</span><br><span class="line"><span class="meta">@LayoutRes</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">ITEM_LAYOUT_RES_ID</span> <span class="operator">=</span> R.layout.item_xxx;</span><br><span class="line"><span class="meta">@LayoutRes</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">EMPTY_VIEW_RES_ID</span> <span class="operator">=</span> R.layout.empty_xxx;</span><br></pre></td></tr></table></figure>

<h3 id="lth-“get-thumbnail-and-set”"><a href="#lth-“get-thumbnail-and-set”" class="headerlink" title="lth “get thumbnail and set”"></a>lth “get thumbnail and set”</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MonCityImageLoader.getInstance().loadImage(PictureSpaceCenter.getHandledUrl(App.getContext(), picUrl,_SIZE),</span><br><span class="line">        (ImageView) helper.getView(R.id.XXX));</span><br></pre></td></tr></table></figure>

<h3 id="mrx-“MVP中-m层-RxRequest”"><a href="#mrx-“MVP中-m层-RxRequest”" class="headerlink" title="mrx “MVP中 m层 RxRequest”"></a>mrx “MVP中 m层 RxRequest”</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Observable&lt;String&gt; $name$(<span class="keyword">final</span> <span class="type">int</span> indexPage, <span class="keyword">final</span> <span class="type">int</span> pageSize) &#123;</span><br><span class="line">    <span class="keyword">return</span> Observable.create(<span class="keyword">new</span> <span class="title class_">Observable</span>.OnSubscribe&lt;String&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">call</span><span class="params">(<span class="keyword">final</span> Subscriber&lt;? <span class="built_in">super</span> String&gt; subscriber)</span> &#123;</span><br><span class="line">            <span class="type">StandardCallback</span> <span class="variable">callback</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StandardCallback</span>(mContext, <span class="literal">true</span>) &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onResult</span><span class="params">(BaseAnalysis analysis)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">                    subscriber.onNext(analysis.getResult());</span><br><span class="line">                    subscriber.onCompleted();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onError</span><span class="params">(<span class="type">int</span> type)</span> &#123;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line">            RequestApi.getInstance()</span><br><span class="line">                    .$name$(indexPage, pageSize, callback);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ob"><a href="#ob" class="headerlink" title="ob"></a>ob</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (pIsLoadByRefresh) &#123;</span><br><span class="line">    resetPage();</span><br><span class="line">&#125;</span><br><span class="line">Observable.create(<span class="keyword">new</span> <span class="title class_">Observable</span>.OnSubscribe&lt;BEAN&gt;() &#123;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">call</span><span class="params">(<span class="keyword">final</span> Subscriber&lt;? <span class="built_in">super</span> BEAN&gt; subscriber)</span> &#123;</span><br><span class="line">                RequestApi.getInstance().$name$(<span class="keyword">new</span> <span class="title class_">StandardCallback</span>(mContext) &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onResult</span><span class="params">(BaseAnalysis analysis)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            <span class="keyword">if</span> (analysis.success()) &#123;</span><br><span class="line">                                <span class="type">BEAN</span> <span class="variable">bean</span> <span class="operator">=</span> JsonAnalysis.getInstance().fromJson(analysis.getResult(), BEAN.class);</span><br><span class="line">                                subscriber.onNext(bean);</span><br><span class="line">                            &#125;</span><br><span class="line">                            subscriber.onCompleted();</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                            onError(StandardCallback.TYPE_RESULT_ERROR);</span><br><span class="line">                            subscriber.onError(e);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onError</span><span class="params">(<span class="type">int</span> type)</span> &#123;</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onError</span><span class="params">(BaseAnalysis baseAnalysis)</span> &#123;</span><br><span class="line">                        <span class="built_in">super</span>.onError(baseAnalysis);</span><br><span class="line">                        subscriber.onError(<span class="keyword">new</span> <span class="title class_">Throwable</span>(baseAnalysis.msg()));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).compose(RxSchedulers.&lt;BEAN&gt;request((RxAppCompatActivity) mContext, getView(), showLoading))</span><br><span class="line">                .subscribe(<span class="keyword">new</span> <span class="title class_">RxSubscriber</span>&lt;BEAN&gt;(getView()) &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">_onNext</span><span class="params">(BEAN bean)</span> &#123;</span><br><span class="line">                        getView().__getDataSuccess(pIsLoadByRefresh, bean);</span><br><span class="line">                        addPage();</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">_onError</span><span class="params">(Throwable error)</span> &#123;</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br></pre></td></tr></table></figure>

<h3 id="prx-“MVP中-p层Rx请求”"><a href="#prx-“MVP中-p层Rx请求”" class="headerlink" title="prx “MVP中 p层Rx请求”"></a>prx “MVP中 p层Rx请求”</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> $name$(<span class="keyword">final</span> <span class="type">boolean</span> pIsLoadByRefresh)&#123;</span><br><span class="line">    <span class="keyword">if</span> (mModel == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (pIsLoadByRefresh) &#123;</span><br><span class="line">        resetPage();</span><br><span class="line">    &#125;</span><br><span class="line">    mModel.$name$(getIndexPage(), getPageSize())</span><br><span class="line">            .map(<span class="keyword">new</span> <span class="title class_">Func1</span>&lt;String, BEAN&gt;() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> BEAN <span class="title function_">call</span><span class="params">(String s)</span> &#123;</span><br><span class="line">                    <span class="type">BEAN</span> <span class="variable">bean</span> <span class="operator">=</span> JsonAnalysis.getInstance().fromJson(s, BEAN.class);</span><br><span class="line">                    <span class="keyword">return</span> bean;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            .compose(RxSchedulers.&lt;BEAN&gt;request((RxAppCompatActivity) mContext))</span><br><span class="line">            .subscribe(<span class="keyword">new</span> <span class="title class_">RxSubscriber</span>&lt;BEAN&gt;(getView()) &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">_onNext</span><span class="params">(BEAN bean)</span> &#123;</span><br><span class="line">                    getView().__getDataSuccess(pIsLoadByRefresh, bean);</span><br><span class="line">                    addPage();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">_onError</span><span class="params">(Throwable error)</span> &#123;</span><br><span class="line">                    getView().showToast(error.getMessage());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="rxrequest-“p层使用。do-request-by-rx”"><a href="#rxrequest-“p层使用。do-request-by-rx”" class="headerlink" title="rxrequest “p层使用。do request by rx”"></a>rxrequest “p层使用。do request by rx”</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (pIsLoadByRefresh) &#123;</span><br><span class="line">    resetPage();</span><br><span class="line">&#125;</span><br><span class="line">RxRequest.rxRequest(mContext, <span class="keyword">new</span> <span class="title class_">Observable</span>.OnSubscribe&lt;BaseAnalysis&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">call</span><span class="params">(<span class="keyword">final</span> Subscriber&lt;? <span class="built_in">super</span> BaseAnalysis&gt; subscriber)</span> &#123;</span><br><span class="line">        RequestApi.getInstance().$name$(getIndexPage(), getPageSize(), <span class="keyword">new</span> <span class="title class_">StandardCallback</span>(mContext, <span class="literal">true</span>, <span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onResult</span><span class="params">(BaseAnalysis analysis)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">                subscriber.onNext(analysis);</span><br><span class="line">                subscriber.onCompleted();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onError</span><span class="params">(<span class="type">int</span> type)</span> &#123;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onError</span><span class="params">(BaseAnalysis baseAnalysis)</span> &#123;</span><br><span class="line">                <span class="built_in">super</span>.onError(baseAnalysis);</span><br><span class="line">                subscriber.onError(<span class="keyword">new</span> <span class="title class_">Throwable</span>(baseAnalysis.msg()));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).compose(RxSchedulers.&lt;BaseAnalysis&gt;request((RxAppCompatActivity) mContext, getView()))</span><br><span class="line">        .subscribe(<span class="keyword">new</span> <span class="title class_">RxSubscriber</span>&lt;BaseAnalysis&gt;(getView()) &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">_onNext</span><span class="params">(BaseAnalysis analysis)</span> &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (analysis.success()) &#123;</span><br><span class="line">                        <span class="type">$BEAN$</span> <span class="variable">bean</span> <span class="operator">=</span> JsonAnalysis.getInstance().fromJson(analysis.getResult(), $BEAN$.class);</span><br><span class="line">                        getView().__getDataSuccess(pIsLoadByRefresh, bean);</span><br><span class="line">                        addPage();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                    onError(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">_onError</span><span class="params">(Throwable error)</span> &#123;</span><br><span class="line">                getView().__getDataFail();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>

<h3 id="rgc-“get-Color-from-resource”"><a href="#rgc-“get-Color-from-resource”" class="headerlink" title="rgc “get Color from resource”"></a>rgc “get Color from resource”</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ContextCompat.getColor(mContext, R.color.$END$)</span><br></pre></td></tr></table></figure>

<h3 id="rgd-“get-a-Drawable-from-resources”"><a href="#rgd-“get-a-Drawable-from-resources”" class="headerlink" title="rgd “get a Drawable from resources”"></a>rgd “get a Drawable from resources”</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ContextCompat.getDrawable(mContext, R.drawable.$END$)</span><br></pre></td></tr></table></figure>

<h3 id="rgs-“get-String-from-resource”"><a href="#rgs-“get-String-from-resource”" class="headerlink" title="rgs “get String from resource”"></a>rgs “get String from resource”</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ContextCompat.getString(mContext, R.string.$END$)</span><br></pre></td></tr></table></figure>

<h3 id="rv-“init-RecyclerView”"><a href="#rv-“init-RecyclerView”" class="headerlink" title="rv “init RecyclerView”"></a>rv “init RecyclerView”</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">LinearLayoutManager</span> <span class="variable">linearLayoutManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LinearLayoutManager</span>(<span class="built_in">this</span>);</span><br><span class="line">mRecyclerView.setLayoutManager(linearLayoutManager);</span><br><span class="line">__itemAdapter = <span class="keyword">new</span> <span class="title class_">__ItemAdapter</span>(R.layout.item_store_hot_news)</span><br><span class="line">__itemAdapter.setEmptyView(DEFAULT_EMPTY_VIEW, mRecyclerView);</span><br><span class="line">__itemAdapter.isUseEmpty(<span class="literal">false</span>);</span><br><span class="line"><span class="comment">// 点击跳转</span></span><br><span class="line">__itemAdapter.setOnItemClickListener(<span class="keyword">new</span> <span class="title class_">BaseQuickAdapter</span>.OnItemClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onItemClick</span><span class="params">(BaseQuickAdapter adapter, View view, <span class="type">int</span> position)</span> &#123;</span><br><span class="line">        <span class="comment">// TODO  Item click biz</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 加载更多</span></span><br><span class="line">__itemAdapter.setOnLoadMoreListener(<span class="keyword">new</span> <span class="title class_">BaseQuickAdapter</span>.RequestLoadMoreListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onLoadMoreRequested</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// TODO load more data</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;, mRecyclerView);</span><br><span class="line">mRecyclerView.setAdapter(__itemAdapter);</span><br></pre></td></tr></table></figure>

<h3 id="srl-“init-SmartRefreshLayout”"><a href="#srl-“init-SmartRefreshLayout”" class="headerlink" title="srl “init SmartRefreshLayout”"></a>srl “init SmartRefreshLayout”</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mSmartRefreshLayout.setEnableHeaderTranslationContent(<span class="literal">false</span>);</span><br><span class="line">mSmartRefreshLayout.setDisableContentWhenRefresh(<span class="literal">true</span>);</span><br><span class="line">mSmartRefreshLayout.setOnRefreshListener(<span class="keyword">new</span> <span class="title class_">OnRefreshListener</span>() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onRefresh</span><span class="params">(RefreshLayout refreshlayout)</span> &#123;</span><br><span class="line">        <span class="comment">// TODO load data    </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>



<h2 id="ArmsMVP"><a href="#ArmsMVP" class="headerlink" title="ArmsMVP"></a>ArmsMVP</h2><h3 id="armsContract-MVPArms的Contract"><a href="#armsContract-MVPArms的Contract" class="headerlink" title="armsContract  MVPArms的Contract"></a>armsContract  MVPArms的Contract</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.app.Activity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.jess.arms.mvp.IModel;</span><br><span class="line"><span class="keyword">import</span> com.jess.arms.mvp.IView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> io.reactivex.Observable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">$name$Contract</span> &#123;</span><br><span class="line">    <span class="comment">//对于经常使用的关于UI的方法可以定义到IView中,如显示隐藏进度条,和显示文字消息</span></span><br><span class="line">    <span class="keyword">interface</span> <span class="title class_">View</span> <span class="keyword">extends</span> <span class="title class_">IView</span> &#123;</span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">startLoadMore</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">endLoadMore</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">        Activity <span class="title function_">getActivity</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Model层定义接口,外部只需关心Model返回的数据,无需关心内部细节,如是否使用缓存</span></span><br><span class="line">    <span class="keyword">interface</span> <span class="title class_">Model</span> <span class="keyword">extends</span> <span class="title class_">IModel</span> &#123;</span><br><span class="line">        Observable&lt;List&lt;$name$&gt;&gt; get$name$s(<span class="type">int</span> lastIdQueried, <span class="type">boolean</span> update);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="armsmrx-MVPArms的M层Rx请求"><a href="#armsmrx-MVPArms的M层Rx请求" class="headerlink" title="armsmrx  MVPArms的M层Rx请求"></a>armsmrx  MVPArms的M层Rx请求</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Observable&lt;List&lt;$name$&gt;&gt; get$name$s(<span class="type">int</span> lastIdQueried, <span class="type">boolean</span> update) &#123;</span><br><span class="line">    <span class="comment">//使用rxcache缓存,上拉刷新则不读取缓存,加载更多读取缓存</span></span><br><span class="line">    <span class="keyword">return</span> Observable.just(mRepositoryManager</span><br><span class="line">            .obtainRetrofitService($name$Service.class)</span><br><span class="line">            .get$name$s(lastIdQueried, Constants.PER_PAGE_SIZE))</span><br><span class="line">            .flatMap((Function&lt;Observable&lt;List&lt;$name$&gt;&gt;, ObservableSource&lt;List&lt;$name$&gt;&gt;&gt;) listObservable -&gt; mRepositoryManager.obtainCacheService(CommonCache.class)</span><br><span class="line">                    .get$name$s(listObservable</span><br><span class="line">                            , <span class="keyword">new</span> <span class="title class_">DynamicKey</span>(lastIdQueried)</span><br><span class="line">                            , <span class="keyword">new</span> <span class="title class_">EvictDynamicKey</span>(update))</span><br><span class="line">                    .map(listReply -&gt; listReply.getData()));</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@OnLifecycleEvent(Lifecycle.Event.ON_PAUSE)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">onPause</span><span class="params">()</span> &#123;</span><br><span class="line">    Timber.d(<span class="string">&quot;Release Resource&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="armsprx-MVPArms的P层Rx请求"><a href="#armsprx-MVPArms的P层Rx请求" class="headerlink" title="armsprx   MVPArms的P层Rx请求"></a>armsprx   MVPArms的P层Rx请求</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Inject</span></span><br><span class="line">List&lt;$name$Bean&gt;           m$name$s;</span><br><span class="line"><span class="meta">@Inject</span></span><br><span class="line">$name$Adapter mAdapter;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span>     <span class="variable">lastId</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">isFirst</span>    <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span>     preEndIndex;</span><br><span class="line"></span><br><span class="line"><span class="meta">@OnLifecycleEvent(Lifecycle.Event.ON_CREATE)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">()</span> &#123;</span><br><span class="line">    request$name$sFromModel(<span class="literal">true</span>);<span class="comment">//打开 App 时自动加载列表</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> request$name$sFromModel(<span class="keyword">final</span> <span class="type">boolean</span> pullToRefresh) &#123;</span><br><span class="line">    <span class="keyword">if</span> (pullToRefresh) &#123;</span><br><span class="line">        lastId = <span class="number">1</span>;<span class="comment">//下拉刷新默认只请求第一页</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//关于RxCache缓存库的使用请参考 http://www.jianshu.com/p/b58ef6b0624b</span></span><br><span class="line">    <span class="type">boolean</span> <span class="variable">isEvictCache</span> <span class="operator">=</span> pullToRefresh;<span class="comment">//是否驱逐缓存,为ture即不使用缓存,每次下拉刷新即需要最新数据,则不使用缓存</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (pullToRefresh &amp;&amp; isFirst) &#123;<span class="comment">//默认在第一次下拉刷新时使用缓存</span></span><br><span class="line">        isFirst = <span class="literal">false</span>;</span><br><span class="line">        isEvictCache = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    mModel.get$name$s(lastId, isEvictCache)</span><br><span class="line">            .subscribeOn(Schedulers.io())</span><br><span class="line">            .retryWhen(<span class="keyword">new</span> <span class="title class_">RetryWithDelay</span>(<span class="number">3</span>, <span class="number">2</span>))<span class="comment">//遇到错误时重试,第一个参数为重试几次,第二个参数为重试的间隔</span></span><br><span class="line">            .doOnSubscribe(disposable -&gt; &#123;</span><br><span class="line">                <span class="keyword">if</span> (pullToRefresh) &#123;</span><br><span class="line">                    mRootView.showLoading();<span class="comment">//显示下拉刷新的进度条</span></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    mRootView.startLoadMore();<span class="comment">//显示上拉加载更多的进度条</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;).subscribeOn(AndroidSchedulers.mainThread())</span><br><span class="line">            .observeOn(AndroidSchedulers.mainThread())</span><br><span class="line">            .doFinally(() -&gt; &#123;</span><br><span class="line">                <span class="keyword">if</span> (pullToRefresh) &#123;</span><br><span class="line">                    mRootView.hideLoading();<span class="comment">//隐藏下拉刷新的进度条</span></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    mRootView.endLoadMore();<span class="comment">//隐藏上拉加载更多的进度条</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            .compose(RxLifecycleUtils.bindToLifecycle(mRootView))<span class="comment">//使用 Rxlifecycle,使 Disposable 和 Activity 一起销毁</span></span><br><span class="line">            .subscribe(<span class="keyword">new</span> <span class="title class_">ErrorHandleSubscriber</span>&lt;List&lt;$name$Bean&gt;&gt;(mErrorHandler) &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onNext</span><span class="params">(List&lt;$name$Bean&gt; items)</span> &#123;</span><br><span class="line">                    lastId = items.get(items.size() - <span class="number">1</span>).getId();<span class="comment">//记录最后一个id,用于下一次请求</span></span><br><span class="line">                    <span class="keyword">if</span> (pullToRefresh) &#123;</span><br><span class="line">                        m$name$s.clear();<span class="comment">//如果是下拉刷新则清空列表</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    preEndIndex = m$name$s.size();<span class="comment">//更新之前列表总长度,用于确定加载更多的起始位置</span></span><br><span class="line">                    m$name$s.addAll(items);</span><br><span class="line">                    <span class="keyword">if</span> (pullToRefresh) &#123;</span><br><span class="line">                        mAdapter.notifyDataSetChanged();</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        mAdapter.notifyItemRangeInserted(preEndIndex, items.size());</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDestroy</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>.onDestroy();</span><br><span class="line">    <span class="built_in">this</span>.mAdapter = <span class="literal">null</span>;</span><br><span class="line">    <span class="built_in">this</span>.m$name$s = <span class="literal">null</span>;</span><br><span class="line">    <span class="built_in">this</span>.mErrorHandler = <span class="literal">null</span>;</span><br><span class="line">    <span class="built_in">this</span>.mAppManager = <span class="literal">null</span>;</span><br><span class="line">    <span class="built_in">this</span>.mImageLoader = <span class="literal">null</span>;</span><br><span class="line">    <span class="built_in">this</span>.mApplication = <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="tmpdata-临时数据"><a href="#tmpdata-临时数据" class="headerlink" title="tmpdata 临时数据"></a>tmpdata 临时数据</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// <span class="doctag">TODO:</span> 2020/6/1</span></span><br><span class="line"><span class="keyword">if</span> (pullToRefresh)&#123;</span><br><span class="line">    mDatas.clear();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">    WeakReference&lt;$name$Bean&gt; wf = <span class="keyword">new</span> <span class="title class_">WeakReference</span>&lt;&gt;(<span class="keyword">new</span> <span class="title class_">$name$Bean</span>());</span><br><span class="line">    wf.get().setTitle(<span class="string">&quot;蒙牛伊利酸奶蒙牛伊利酸奶蒙牛伊利酸奶&quot;</span> + i);</span><br><span class="line">    mDatas.add(wf.get());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (pullToRefresh)&#123;</span><br><span class="line">    mAdapter.notifyDataSetChanged();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//      mAdapter.notifyItemRangeInserted(preEndIndex, mDatas.size());</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="xm597"><a href="#xm597" class="headerlink" title="xm597"></a>xm597</h2><h3 id="gerenActivity-创建个人Activity"><a href="#gerenActivity-创建个人Activity" class="headerlink" title="gerenActivity 创建个人Activity"></a>gerenActivity 创建个人Activity</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xm597.app.R;</span><br><span class="line"><span class="keyword">import</span> com.xm597.app.databinding.Activity$entityName$Binding;</span><br><span class="line"><span class="keyword">import</span> com.xm597.app.project.ui.base.activity.GeRenBaseActivity;</span><br><span class="line"><span class="keyword">import</span> com.xm597.app.project.ui.city.presenter.ISimpleRvSearchContract;</span><br><span class="line"><span class="keyword">import</span> com.xm597.app.project.ui.city.presenter.SimpleRvSearchPresenter;</span><br><span class="line"><span class="keyword">import</span> com.xm597.common.widget.ktoolbar.KCustomToolbar;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$entityName$Activity</span> <span class="keyword">extends</span> <span class="title class_">GeRenBaseActivity</span>&lt;Activity$entityName$Binding, $entityName$Presenter&gt;</span><br><span class="line">		<span class="keyword">implements</span> <span class="title class_">I$entityName$Contract</span>.I$entityName$UI&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">KEY_TITLE</span> <span class="operator">=</span> <span class="string">&quot;keyTitle&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> String mTitle;</span><br><span class="line">    </span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">start</span><span class="params">(Context context, String $entityName$Title)</span> &#123;</span><br><span class="line">		<span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(context, $entityName$Activity.class);</span><br><span class="line">		intent.putExtra(KEY_TITLE, $entityName$Title);</span><br><span class="line">		context.startActivity(intent);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">protected</span> <span class="type">int</span> <span class="title function_">setLayoutResID</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="comment">// todo</span></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreated</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">		parseIntentData();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onStart</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onStart();</span><br><span class="line">        mPresenter.start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> $entityName$Presenter <span class="title function_">setPresenter</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">$entityName$Presenter</span>(<span class="built_in">this</span>, <span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">boolean</span> <span class="title function_">setToolbar</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// todo 需要toolbar则返回true；如果不需要 toolbar，则直接删除setToolbar()</span></span><br><span class="line">        mToolbar.setBackgroundColor(getResources().getColor(R.color.colorWhite));</span><br><span class="line">        mToolbar.setLeftIcon(R.drawable.icon_arrow_left_1);</span><br><span class="line">        mToolbar.setTitle(getPageTitle());</span><br><span class="line"></span><br><span class="line">        mToolbar.setKToolbarClickListener(<span class="keyword">new</span> <span class="title class_">KCustomToolbar</span>.KToolbarClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onToolBarLeftButtonClick</span><span class="params">(<span class="type">int</span> position)</span> &#123;</span><br><span class="line">                finish();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onToolBarRightButtonClick</span><span class="params">(<span class="type">int</span> position)</span> &#123;</span><br><span class="line">                <span class="comment">//<span class="doctag">TODO:</span> toolbar右侧按钮点击事件</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">parseIntentData</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> getIntent();</span><br><span class="line">        <span class="keyword">if</span>(intent != <span class="literal">null</span>)&#123;</span><br><span class="line">			mTitle = intent.getStringExtra(KEY_TITLE);</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getPageTitle</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> mTitle;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<h3 id="gerenBean-创建个人Bean"><a href="#gerenBean-创建个人Bean" class="headerlink" title="gerenBean 创建个人Bean"></a>gerenBean 创建个人Bean</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$entityName$Bean</span> <span class="keyword">extends</span> <span class="title class_">GeRenBaseBean</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="gerenContract-创建个人Contract"><a href="#gerenContract-创建个人Contract" class="headerlink" title="gerenContract 创建个人Contract"></a>gerenContract 创建个人Contract</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.xm597.app.project.ui.base.presenter.IBaseUI;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">I$entityName$Contract</span> &#123;</span><br><span class="line">    <span class="keyword">interface</span> <span class="title class_">I$entityName$UI</span> <span class="keyword">extends</span> <span class="title class_">IBaseUI</span> &#123;</span><br><span class="line">        </span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="gerenFragment-创建个人Fragment"><a href="#gerenFragment-创建个人Fragment" class="headerlink" title="gerenFragment 创建个人Fragment"></a>gerenFragment 创建个人Fragment</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$entityName$Fragment</span> <span class="keyword">extends</span> <span class="title class_">BaseFragment</span>&lt;Fragment$entityName$Binding, $entityName$Presenter&gt;</span><br><span class="line">    <span class="keyword">implements</span> <span class="title class_">I$entityName$Contract</span>.I$entityName$FragmentUI&#123;</span><br><span class="line">    <span class="keyword">public</span> $entityName$Fragment()&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> $entityName$Fragment <span class="title function_">newInstance</span><span class="params">(Map&lt;String, Object&gt; map)</span>&#123;</span><br><span class="line">        <span class="type">$entityName$Fragment</span> <span class="variable">fragment</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">$entityName$Fragment</span>();</span><br><span class="line">        <span class="keyword">if</span>(map != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="type">Bundle</span> <span class="variable">args</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bundle</span>();</span><br><span class="line">            args.putInt(<span class="string">&quot;key&quot;</span>, (<span class="type">int</span>) map.get(<span class="string">&quot;key&quot;</span>));</span><br><span class="line">            args.putParcelable(<span class="string">&quot;key&quot;</span>, (Uri) map.get(<span class="string">&quot;key&quot;</span>));</span><br><span class="line">            args.putBoolean(<span class="string">&quot;key&quot;</span>, (<span class="type">boolean</span>) map.get(<span class="string">&quot;key&quot;</span>));</span><br><span class="line">            args.putString(<span class="string">&quot;key&quot;</span>,(String) map.get(<span class="string">&quot;key&quot;</span>));</span><br><span class="line">            fragment.setArguments(args);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> fragment;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> <span class="title function_">setLayoutResID</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="comment">//todo</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">protected</span> $entityName$Presenter <span class="title function_">setPresenter</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">$entityName$Presenter</span>(<span class="built_in">this</span>, <span class="built_in">this</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> String <span class="title function_">setPageTitle</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//<span class="doctag">TODO:</span> 返回当前Fragment页面的标题</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onViewCreate</span><span class="params">(<span class="meta">@NonNull</span> View view, <span class="meta">@Nullable</span> Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="comment">//<span class="doctag">TODO:</span> 一些实例化操作</span></span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">protected</span> <span class="type">boolean</span> <span class="title function_">isRegisterEventBus</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="comment">//<span class="doctag">TODO:</span> 如果需要注册注销EventBus，需要改成return true</span></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>其中的构造方法必须是public，在某些API中（好像是安卓10）用的是反射，私有的反射不出来，会有找不到构造方法的异常。</p>
</blockquote>
<h3 id="gerenParams-创建个人Params"><a href="#gerenParams-创建个人Params" class="headerlink" title="gerenParams 创建个人Params"></a>gerenParams 创建个人Params</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$entityName$Params</span> <span class="keyword">extends</span> <span class="title class_">GeRenBaseParams</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建类变量</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> $entityName$Params()&#123;</span><br><span class="line">        <span class="comment">// 类变量实例化</span></span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="gerenPresenter-创建个人Presenter"><a href="#gerenPresenter-创建个人Presenter" class="headerlink" title="gerenPresenter 创建个人Presenter"></a>gerenPresenter 创建个人Presenter</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> androidx.lifecycle.LifecycleOwner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xm597.app.project.ui.base.presenter.BasePresenter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$entityName$Presenter</span> <span class="keyword">extends</span> <span class="title class_">BasePresenter</span>&lt;I$entityName$Contract.I$entityName$UI&gt; &#123;</span><br><span class="line">    <span class="keyword">public</span> $entityName$Presenter(LifecycleOwner lifeCycleOwner, I$entityName$Contract.I$entityName$UI view) &#123;</span><br><span class="line">		<span class="built_in">super</span>(lifeCycleOwner, view);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">start</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//<span class="doctag">TODO:</span></span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="gerenRequest-创建个人Request"><a href="#gerenRequest-创建个人Request" class="headerlink" title="gerenRequest 创建个人Request"></a>gerenRequest 创建个人Request</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.xm597.app.project.api.base.request.GeRenBaseRequest;</span><br><span class="line"><span class="keyword">import</span> com.xm597.common.api.url.BaseApiUrlsConstants;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$entityName$Request</span> <span class="keyword">extends</span> <span class="title class_">GeRenBaseRequest</span>&lt;$entityName$Bean, $entityName$Params&gt; &#123;</span><br><span class="line">    <span class="comment">//<span class="doctag">TODO:</span> 此处添加类变量，表示要传递的参数</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//<span class="doctag">TODO:</span> 添加入参，并赋值给类变量</span></span><br><span class="line">    <span class="keyword">public</span> $entityName$Request()&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">protected</span> $entityName$Params <span class="title function_">setRequestParams</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//<span class="doctag">TODO:</span> 把类变量传递给 $entityName$Params 的构造方法</span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">$entityName$Params</span>();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">apiPath</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> BaseApiUrlsConstants.$entityName$;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="gerenXML-创建个人XML"><a href="#gerenXML-创建个人XML" class="headerlink" title="gerenXML 创建个人XML"></a>gerenXML 创建个人XML</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">layout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="name">data</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="ob-xm597-persenter内某方法的请求"><a href="#ob-xm597-persenter内某方法的请求" class="headerlink" title="ob xm597 persenter内某方法的请求"></a>ob xm597 persenter内某方法的请求</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//TODO：改成调用BasePresenter内的方法（传对应的参数）</span></span><br><span class="line">request$entityName$(id).observe(mLifecycleOwner, <span class="keyword">new</span> <span class="title class_">GeRenApiResponseObserver</span>&lt;$entityName$Bean, HttpResponse&lt;$entityName$Bean&gt;&gt;(mView) &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">boolean</span> <span class="title function_">onSuccess</span><span class="params">(<span class="type">int</span> code, $entityName$Bean bean)</span> &#123;</span><br><span class="line">        <span class="comment">//<span class="doctag">TODO:</span> 改成功回调逻辑</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">retMsg</span> <span class="operator">=</span> bean.getMsg();</span><br><span class="line">        <span class="keyword">if</span> (TextUtils.isEmpty(retMsg))&#123;</span><br><span class="line">            <span class="comment">//<span class="doctag">TODO:</span> 这个文案提示要改</span></span><br><span class="line">            retMsg = <span class="string">&quot;短信验证码已发送&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        mView.onMobileChecked(<span class="literal">true</span>, retMsg);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">boolean</span> <span class="title function_">onFailed</span><span class="params">(<span class="type">int</span> code, String error)</span> &#123;</span><br><span class="line">        <span class="comment">//<span class="doctag">TODO:</span> 改失败回调逻辑</span></span><br><span class="line">        mView.onMobileChecked(<span class="literal">false</span>, error);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>













<h1 id="创建类时的类型-File-and-Code-Templates"><a href="#创建类时的类型-File-and-Code-Templates" class="headerlink" title="创建类时的类型(File and Code Templates)"></a>创建类时的类型(File and Code Templates)</h1><h2 id="java类型"><a href="#java类型" class="headerlink" title="java类型"></a>java类型</h2><h3 id="DoubleCheckSingleton"><a href="#DoubleCheckSingleton" class="headerlink" title="DoubleCheckSingleton"></a>DoubleCheckSingleton</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> ($&#123;PACKAGE_NAME&#125; &amp;&amp; $&#123;PACKAGE_NAME&#125; != <span class="string">&quot;&quot;</span>)<span class="keyword">package</span> $&#123;PACKAGE_NAME&#125;;#end</span><br><span class="line">#parse(<span class="string">&quot;File Header.java&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">$</span>&#123;NAME&#125;&#123;</span><br><span class="line">    <span class="comment">//单例模式-&gt;双重检查模式</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">TAG</span> <span class="operator">=</span> <span class="string">&quot;$&#123;NAME&#125;&quot;</span>;</span><br><span class="line">    <span class="comment">//volatile表示去掉虚拟机优化代码,但是会消耗少许性能,可忽略</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> $&#123;NAME&#125; sInstance = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> $&#123;NAME&#125; getInstance() &#123;</span><br><span class="line">        <span class="keyword">if</span> (sInstance == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">//同步代码块</span></span><br><span class="line">            <span class="keyword">synchronized</span> ($&#123;NAME&#125;.class) &#123;</span><br><span class="line">                <span class="keyword">if</span> (sInstance == <span class="literal">null</span>) &#123;</span><br><span class="line">                    sInstance = <span class="keyword">new</span> <span class="title class_">$</span>&#123;NAME&#125;();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sInstance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> $&#123;NAME&#125;() &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="u1city-1"><a href="#u1city-1" class="headerlink" title="u1city"></a>u1city</h3><h4 id="LdyActivity"><a href="#LdyActivity" class="headerlink" title="LdyActivity"></a>LdyActivity</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> ($&#123;PACKAGE_NAME&#125; != <span class="string">&quot;&quot;</span>)<span class="keyword">package</span> $&#123;PACKAGE_NAME&#125;;#end</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.support.annotation.LayoutRes;</span><br><span class="line"><span class="keyword">import</span> android.support.v4.app.Fragment;</span><br><span class="line"><span class="keyword">import</span> android.support.v4.app.FragmentManager;</span><br><span class="line"><span class="keyword">import</span> android.support.v4.app.FragmentPagerAdapter;</span><br><span class="line"><span class="keyword">import</span> android.support.v4.view.ViewPager;</span><br><span class="line"><span class="keyword">import</span> android.support.v7.widget.Toolbar;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baidu.mobstat.StatService;</span><br><span class="line"><span class="keyword">import</span> com.u1city.androidframe.customView.PagerSlidingTabStrip;</span><br><span class="line"><span class="keyword">import</span> com.umeng.analytics.MobclickAgent;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> xxx.xxx.R;</span><br><span class="line"><span class="keyword">import</span> xxx.xxx.api.RequestApi;</span><br><span class="line"><span class="keyword">import</span> xxx.xxx.base.LdyBaseActivity;</span><br><span class="line"><span class="keyword">import</span> xxx.xxx.center.StringConstantUtils;</span><br><span class="line"><span class="keyword">import</span> xxx.xxx.core.Constants;</span><br><span class="line"><span class="keyword">import</span> butterknife.Bind;</span><br><span class="line"></span><br><span class="line"><span class="comment">//这个页面带多个tab，内容是嵌套多个fragment，可切换</span></span><br><span class="line"></span><br><span class="line">#parse(<span class="string">&quot;File Header.java&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$</span>&#123;pageName&#125;Activity <span class="keyword">extends</span> <span class="title class_">LdyBaseActivity</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@LayoutRes</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">PAGE_LAYOUT_RES_ID</span> <span class="operator">=</span> R.layout.activity_$&#123;layoutName&#125;;</span><br><span class="line">    <span class="meta">@Bind(R.id.toolbar)</span></span><br><span class="line">    Toolbar mToolbar;</span><br><span class="line">    <span class="meta">@Bind(R.id.$&#123;layoutName&#125;_tabstrip)</span></span><br><span class="line">    PagerSlidingTabStrip mPagerSlidingTabStrip;</span><br><span class="line">    <span class="meta">@Bind(R.id.$&#123;layoutName&#125;_viewpager)</span></span><br><span class="line">    ViewPager mViewPager;</span><br><span class="line">    <span class="meta">@Bind(R.id.$&#123;layoutName&#125;_return_goods_tv)</span></span><br><span class="line">    TextView mReturnGoodsTv;</span><br><span class="line">    <span class="meta">@Bind(R.id.$&#123;layoutname&#125;_refund_tv)</span></span><br><span class="line">    TextView refundTv;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//todo 更改fragment的tab标签名称</span></span><br><span class="line">    <span class="keyword">private</span> String[] titles = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;退货&quot;</span>, <span class="string">&quot;退款&quot;</span>&#125;;</span><br><span class="line">    <span class="comment">//todo 添加自己常量</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] dataTypes = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;StringConstantUtils., StringConstantUtils.&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">openImmersion</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setImmersion</span><span class="params">()</span> &#123;</span><br><span class="line">        getImmersion().setImmersionDarkFont(mToolbar, <span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> <span class="title function_">setLayoutResId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> PAGE_LAYOUT_RES_ID;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">()</span> &#123;</span><br><span class="line">        setImmersion();</span><br><span class="line">        setU1cityBaseToolBar(mToolbar, <span class="string">&quot;售后&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        $&#123;pageName&#125;<span class="type">PagerAdapter</span> <span class="variable">pageAdapter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">$</span>&#123;pageName&#125;PagerAdapter(getSupportFragmentManager());</span><br><span class="line">        mViewPager.setAdapter(pageAdapter);</span><br><span class="line">        mPagerSlidingTabStrip.setViewPager(mViewPager);</span><br><span class="line"></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">shouldOpenRefundList</span> <span class="operator">=</span> getIntent().getBooleanExtra(StringConstantUtils.ACTION_OPEN_REFUND_LIST, <span class="literal">false</span>);</span><br><span class="line">        <span class="keyword">if</span> (shouldOpenRefundList) &#123;</span><br><span class="line">            mViewPager.setCurrentItem(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   </span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 适配器</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">$</span>&#123;pageName&#125;PagerAdapter <span class="keyword">extends</span> <span class="title class_">FragmentPagerAdapter</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> $&#123;pageName&#125;PagerAdapter(FragmentManager fm) &#123;</span><br><span class="line">            <span class="built_in">super</span>(fm);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> CharSequence <span class="title function_">getPageTitle</span><span class="params">(<span class="type">int</span> position)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> titles[position];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Fragment <span class="title function_">getItem</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> $&#123;pageName&#125;.newInstance(dataTypes[i]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="type">return</span> <span class="variable">titles</span> <span class="operator">=</span>= <span class="literal">null</span> ? <span class="number">0</span> : titles.length;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onPause</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onPause();</span><br><span class="line">        MobclickAgent.onPause(<span class="built_in">this</span>);</span><br><span class="line">        StatService.onPageEnd(<span class="built_in">this</span>, <span class="string">&quot;售后&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onDestroy</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onDestroy();</span><br><span class="line">        RequestApi.getInstance().cancleAll(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onResume</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onResume();</span><br><span class="line">        MobclickAgent.onResume(<span class="built_in">this</span>);</span><br><span class="line">        StatService.onPageStart(<span class="built_in">this</span>, <span class="string">&quot;售后&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (Constants.cust == <span class="literal">null</span>) &#123;</span><br><span class="line">            Constants.getCustomer();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="LdyFragments"><a href="#LdyFragments" class="headerlink" title="LdyFragments"></a>LdyFragments</h4><p> 包含多个子Fragment</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> ($&#123;PACKAGE_NAME&#125; != <span class="string">&quot;&quot;</span>)<span class="keyword">package</span> $&#123;PACKAGE_NAME&#125;;#end</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.net.Uri;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.support.annotation.LayoutRes;</span><br><span class="line"><span class="keyword">import</span> android.support.annotation.NonNull;</span><br><span class="line"><span class="keyword">import</span> android.support.annotation.Nullable;</span><br><span class="line"><span class="keyword">import</span> android.support.design.widget.TabLayout;</span><br><span class="line"><span class="keyword">import</span> android.support.v4.app.Fragment;</span><br><span class="line"><span class="keyword">import</span> android.support.v4.app.FragmentManager;</span><br><span class="line"><span class="keyword">import</span> android.support.v4.app.FragmentStatePagerAdapter;</span><br><span class="line"><span class="keyword">import</span> android.support.v4.app.FragmentTransaction;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.trello.rxlifecycle.components.support.RxFragment;</span><br><span class="line"><span class="keyword">import</span> com.u1city.androidframe.common.baseData.ListUtils;</span><br><span class="line"><span class="keyword">import</span> com.u1city.androidframe.customView.NoScrollViewPager;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.ref.WeakReference;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> xxx.xxx.R;</span><br><span class="line"><span class="keyword">import</span> xxx.xxx.base.LdyBaseFragment;</span><br><span class="line"><span class="keyword">import</span> xxx.xxx.model.javabean.custompage.TabListBean;</span><br><span class="line"><span class="keyword">import</span> butterknife.Bind;</span><br><span class="line"><span class="keyword">import</span> butterknife.ButterKnife;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> shenbh</span></span><br><span class="line"><span class="comment"> * time $&#123;DATE&#125; $&#123;TIME&#125; $&#123;DAY_NAME_FULL&#125;</span></span><br><span class="line"><span class="comment"> * email shenbh@qq.com</span></span><br><span class="line"><span class="comment"> * description （包含多个子fragment）</span></span><br><span class="line"><span class="comment"> * 维护者 </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$</span>&#123;pageName&#125;Fragment <span class="keyword">extends</span> <span class="title class_">LdyBaseFragment</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@LayoutRes</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">PAGE_LAYOUT_RES_ID</span> <span class="operator">=</span> R.layout.fragment_$&#123;layoutName&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bind(R.id.$&#123;layoutName&#125;_tl)</span></span><br><span class="line">    TabLayout mainTl;</span><br><span class="line">    <span class="meta">@Bind(R.id.$&#123;layoutName&#125;_vp)</span></span><br><span class="line">    NoScrollViewPager mainVp;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//这是多个子fragment切换的适配器</span></span><br><span class="line">    <span class="keyword">private</span> $&#123;pageName&#125;PagerAdapter pagerAdapter;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//TODO 改成自己的tab名称</span></span><br><span class="line">    <span class="keyword">private</span> String[] tabNames = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;帖子&quot;</span>, <span class="string">&quot;社群分类&quot;</span>&#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> $&#123;pageName&#125;Fragment <span class="title function_">newInstance</span><span class="params">(Map&lt;String, Object&gt; map)</span> &#123;</span><br><span class="line">        $&#123;pageName&#125;<span class="type">Fragment</span> <span class="variable">fragment</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">$</span>&#123;pageName&#125;Fragment();</span><br><span class="line">        <span class="comment">//TODO：可以传一些值进来</span></span><br><span class="line">        <span class="keyword">if</span> (map != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="type">Bundle</span> <span class="variable">args</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bundle</span>();</span><br><span class="line">            args.putInt(<span class="string">&quot;key&quot;</span>, (<span class="type">int</span>) map.get(<span class="string">&quot;key&quot;</span>));</span><br><span class="line">            args.putParcelable(<span class="string">&quot;key&quot;</span>, (Uri) map.get(<span class="string">&quot;key&quot;</span>));</span><br><span class="line">            args.putBoolean(<span class="string">&quot;key&quot;</span>, (<span class="type">boolean</span>) map.get(<span class="string">&quot;key&quot;</span>));</span><br><span class="line">            args.putString(<span class="string">&quot;key&quot;</span>, (String) map.get(<span class="string">&quot;key&quot;</span>));</span><br><span class="line">            fragment.setArguments(args);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> fragment;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(<span class="meta">@Nullable</span> Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        <span class="comment">// TODO 取出一些参数</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            xxx = getArguments().getString(Key);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> View <span class="title function_">onCreateView</span><span class="params">(LayoutInflater inflater, <span class="meta">@Nullable</span> ViewGroup container, <span class="meta">@Nullable</span> Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        ButterKnife.bind(<span class="built_in">this</span>, <span class="built_in">super</span>.onCreateView(inflater, container, savedInstanceState));</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.onCreateView(inflater, container, savedInstanceState);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onViewCreated</span><span class="params">()</span> &#123;</span><br><span class="line">        initParams();</span><br><span class="line">        initView();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始化一些基本的参数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initParams</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initView</span><span class="params">()</span> &#123;</span><br><span class="line">        initTab();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> <span class="title function_">setLayoutResId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> PAGE_LAYOUT_RES_ID;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">lazyLoadData</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//初始化多个子tab</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initTab</span><span class="params">()</span> &#123;</span><br><span class="line">        pagerAdapter = <span class="keyword">new</span> <span class="title class_">$</span>&#123;pageName&#125;PagerAdapter(getChildFragmentManager());</span><br><span class="line">        mainVp.setAdapter(pagerAdapter);</span><br><span class="line">        mainVp.setCanScroll(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        ArrayList&lt;TabListBean&gt; tabs = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, size = tabNames.length; i &lt; size; i++) &#123;</span><br><span class="line">            WeakReference&lt;TabListBean&gt; wf = <span class="keyword">new</span> <span class="title class_">WeakReference</span>&lt;&gt;(<span class="keyword">new</span> <span class="title class_">TabListBean</span>());</span><br><span class="line">            wf.get().setTabName(tabNames[i]);</span><br><span class="line">            tabs.add(wf.get());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (pagerAdapter != <span class="literal">null</span>) &#123;</span><br><span class="line">            pagerAdapter.setData(tabs);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        mainTl.setupWithViewPager(mainVp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDestroyView</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onDestroyView();</span><br><span class="line">        ButterKnife.unbind(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">$</span>&#123;pageName&#125;PagerAdapter <span class="keyword">extends</span> <span class="title class_">FragmentStatePagerAdapter</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> List&lt;TabListBean&gt; mTabListBeans = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">private</span> List&lt;RxFragment&gt; mRxFragments = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">private</span> FragmentManager mFragmentManager;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setData</span><span class="params">(<span class="meta">@NonNull</span> List&lt;TabListBean&gt; data)</span> &#123;</span><br><span class="line">            mTabListBeans = data;</span><br><span class="line">            <span class="type">FragmentTransaction</span> <span class="variable">ft</span> <span class="operator">=</span> mFragmentManager.beginTransaction();<span class="comment">//获得FragmentTransaction 事务</span></span><br><span class="line">            <span class="keyword">for</span> (RxFragment fragment : mRxFragments) &#123;</span><br><span class="line">                ft.remove(fragment);</span><br><span class="line">            &#125;</span><br><span class="line">            ft.commitAllowingStateLoss();</span><br><span class="line">            ft = <span class="literal">null</span>;</span><br><span class="line">            mFragmentManager.executePendingTransactions();<span class="comment">//提交事务</span></span><br><span class="line">            mRxFragments.clear();</span><br><span class="line">            <span class="comment">//TODO：改成自己的子fragment</span></span><br><span class="line"><span class="comment">//        for (int i = 0; i &lt; mTabListBeans.size(); i++) &#123;</span></span><br><span class="line"><span class="comment">//            mRxFragments.add(pageType == 0 ?</span></span><br><span class="line"><span class="comment">//                    CommunitySpaceSearchResultPostFragment.newInstance(null) :</span></span><br><span class="line"><span class="comment">//                    PageFragment.newInstance(mTabListBeans.get(i).getTemplateId()));</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"></span><br><span class="line">            mRxFragments.add($&#123;pageName&#125;ChildFragment.newInstance(<span class="literal">null</span>));</span><br><span class="line">            mRxFragments.add($&#123;pageName&#125;ChildFragment.newInstance(<span class="literal">null</span>));</span><br><span class="line"></span><br><span class="line">            notifyDataSetChanged();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> List&lt;TabListBean&gt; <span class="title function_">getList</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> mTabListBeans;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> $&#123;pageName&#125;PagerAdapter(FragmentManager fm) &#123;</span><br><span class="line">            <span class="built_in">super</span>(fm);</span><br><span class="line">            mFragmentManager = fm;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Fragment <span class="title function_">getItem</span><span class="params">(<span class="type">int</span> position)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> mRxFragments.get(position);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> ListUtils.isEmpty(mTabListBeans) ? <span class="number">0</span> : mTabListBeans.size();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> CharSequence <span class="title function_">getPageTitle</span><span class="params">(<span class="type">int</span> position)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> mTabListBeans.get(position).getTabName();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getItemPosition</span><span class="params">(Object object)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> POSITION_NONE;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroyItem</span><span class="params">(ViewGroup container, <span class="type">int</span> position, Object object)</span> &#123;</span><br><span class="line">            <span class="comment">// super.destroyItem(container, position, object);</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">releaseFragment</span><span class="params">(ViewGroup container, <span class="type">int</span> position, Object object)</span> &#123;</span><br><span class="line">            <span class="built_in">super</span>.destroyItem(container, position, object);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="MvpBean"><a href="#MvpBean" class="headerlink" title="MvpBean"></a>MvpBean</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> ($&#123;PACKAGE_NAME&#125; != <span class="string">&quot;&quot;</span>)<span class="keyword">package</span> $&#123;PACKAGE_NAME&#125;;#end</span><br><span class="line"></span><br><span class="line">#<span class="keyword">if</span> ($&#123;IMPORT_BLOCK&#125; != <span class="string">&quot;&quot;</span>)$&#123;IMPORT_BLOCK&#125;</span><br><span class="line">#end</span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line">#parse(<span class="string">&quot;File Header.java&quot;</span>)</span><br><span class="line"><span class="meta">@Keep</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$</span>&#123;beanName&#125; <span class="keyword">implements</span> <span class="title class_">Serializable</span>&#123;</span><br><span class="line">    <span class="comment">// TODO 只是一个模板。如果有Json字符串，直接GsonFormat自动生成</span></span><br><span class="line">    <span class="keyword">private</span> String total;</span><br><span class="line">    <span class="keyword">private</span> List&lt;$&#123;childBeanName&#125;&gt;data;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">$</span>&#123;childBeanName&#125;&#123;</span><br><span class="line">        <span class="comment">// TODO </span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTotal</span><span class="params">(String total)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.total = total;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getTotal</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> total;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setData</span><span class="params">(List&lt;$&#123;childBeanName&#125;&gt;pData)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.data = pData;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> List&lt;$&#123;childBeanName&#125;&gt; getData() &#123;</span><br><span class="line">        <span class="keyword">return</span> data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="MvpContract"><a href="#MvpContract" class="headerlink" title="MvpContract"></a>MvpContract</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> ($&#123;PACKAGE_NAME&#125; != <span class="string">&quot;&quot;</span>)<span class="keyword">package</span> $&#123;PACKAGE_NAME&#125;;#end</span><br><span class="line"><span class="keyword">import</span> com.u1city.androidframe.framework.v1.support.MvpView;</span><br><span class="line"></span><br><span class="line">#parse(<span class="string">&quot;File Header.java&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">$</span>&#123;pageName&#125;Contract &#123;</span><br><span class="line">    <span class="keyword">interface</span> <span class="title class_">View</span> <span class="keyword">extends</span> <span class="title class_">MvpView</span>&#123;</span><br><span class="line">        <span class="comment">// TODO View层的方法，先生成模板函数，在Activity生存之后再根据业务修改合适的函数名</span></span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">__getDataSuccess</span><span class="params">(<span class="type">boolean</span> pIsLoadByRefresh, $&#123;beanName&#125; p$&#123;beanName&#125;)</span>;</span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">__getDataFail</span><span class="params">()</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="MvpDgActivity"><a href="#MvpDgActivity" class="headerlink" title="MvpDgActivity"></a>MvpDgActivity</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> ($&#123;PACKAGE_NAME&#125; != <span class="string">&quot;&quot;</span>)<span class="keyword">package</span> $&#123;PACKAGE_NAME&#125;;#end</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.support.annotation.LayoutRes;</span><br><span class="line"><span class="keyword">import</span> android.support.annotation.NonNull;</span><br><span class="line"><span class="keyword">import</span> android.support.v7.widget.LinearLayoutManager;</span><br><span class="line"><span class="keyword">import</span> android.support.v7.widget.RecyclerView;</span><br><span class="line"><span class="keyword">import</span> android.support.v7.widget.Toolbar;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.chad.library.adapter.base.BaseQuickAdapter;</span><br><span class="line"><span class="keyword">import</span> com.scwang.smartrefresh.layout.SmartRefreshLayout;</span><br><span class="line"><span class="keyword">import</span> com.scwang.smartrefresh.layout.api.RefreshLayout;</span><br><span class="line"><span class="keyword">import</span> com.scwang.smartrefresh.layout.listener.OnRefreshListener;</span><br><span class="line"><span class="keyword">import</span> com.u1city.androidframe.common.baseData.BaseParser;</span><br><span class="line"><span class="keyword">import</span> com.u1city.androidframe.common.baseData.ListUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> yyy.yyy.R;</span><br><span class="line"><span class="keyword">import</span> yyy.yyy.base.DgBaseMvpActivity;</span><br><span class="line"><span class="keyword">import</span> yyy.yyy.view.recycler.CustomCommonLoadMoreView;</span><br><span class="line"><span class="keyword">import</span> butterknife.Bind;</span><br><span class="line"></span><br><span class="line">#parse(<span class="string">&quot;File Header.java&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$</span>&#123;pageName&#125;Activity <span class="keyword">extends</span> <span class="title class_">DgBaseMvpActivity</span>&lt;$&#123;pageName&#125;Contract.View,$&#123;pageName&#125;Presenter&gt;</span><br><span class="line"><span class="keyword">implements</span> <span class="title class_">$</span>&#123;pageName&#125;Contract.View &#123;</span><br><span class="line">    <span class="meta">@LayoutRes</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">PAGE_LAYOUT_RES_ID</span> <span class="operator">=</span> R.layout.activity_$&#123;layoutName&#125;;</span><br><span class="line">    <span class="meta">@LayoutRes</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">ITEM_LAYOUT_RES_ID</span> <span class="operator">=</span> R.layout.item_$&#123;layoutName&#125;;</span><br><span class="line">    <span class="meta">@LayoutRes</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">EMPTY_VIEW_RES_ID</span> <span class="operator">=</span> R.layout.empty_$&#123;layoutName&#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Bind(R.id.toolbar)</span></span><br><span class="line">    Toolbar mToolbar;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Bind(R.id.$&#123;layoutName&#125;_srl)</span></span><br><span class="line">    SmartRefreshLayout mSmartRefreshLayout;</span><br><span class="line">    <span class="meta">@Bind(R.id.$&#123;layoutName&#125;_rv)</span></span><br><span class="line">    RecyclerView mRecyclerView;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// TODO 替换自己的ItemAdapter</span></span><br><span class="line">    <span class="keyword">private</span> $&#123;pageName&#125;ItemAdapter mItemAdapter;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreateMvp</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// TODO 是否可以去除Activity的背景</span></span><br><span class="line">        <span class="comment">// getWindow().setBackgroundDrawable(null);</span></span><br><span class="line">        setImmersion();</span><br><span class="line">        initView();</span><br><span class="line">        mSmartRefreshLayout.autoRefresh();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onDestroy</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onDestroy();</span><br><span class="line">        ButterKnife.unbind(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> <span class="title function_">setLayoutResId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> PAGE_LAYOUT_RES_ID;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NonNull</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> $&#123;pageName&#125;Presenter <span class="title function_">createPresenter</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">$</span>&#123;pageName&#125;Presenter(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setImmersion</span><span class="params">()</span> &#123;</span><br><span class="line">        getImmersion().setImmersionDarkFont(mToolbar, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initView</span><span class="params">()</span> &#123;</span><br><span class="line">        initToolbar();</span><br><span class="line">        initSrl();</span><br><span class="line">        initRv();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initToolbar</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// TODO 设置Toolbar</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initSrl</span><span class="params">()</span> &#123;</span><br><span class="line">        mSmartRefreshLayout.setEnableHeaderTranslationContent(<span class="literal">false</span>);</span><br><span class="line">        mSmartRefreshLayout.setDisableContentWhenRefresh(<span class="literal">true</span>);</span><br><span class="line">        mSmartRefreshLayout.setOnRefreshListener(<span class="keyword">new</span> <span class="title class_">OnRefreshListener</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onRefresh</span><span class="params">(RefreshLayout refreshlayout)</span> &#123;</span><br><span class="line">                loadData(<span class="literal">true</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initRv</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// TODO 根据实际进行调整</span></span><br><span class="line">        <span class="type">LinearLayoutManager</span> <span class="variable">linearLayoutManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LinearLayoutManager</span>(<span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line">        mRecyclerView.setLayoutManager(linearLayoutManager);</span><br><span class="line"></span><br><span class="line">        mItemAdapter = <span class="keyword">new</span> <span class="title class_">$</span>&#123;pageName&#125;ItemAdapter(ITEM_LAYOUT_RES_ID);</span><br><span class="line">        mItemAdapter.setEmptyView(getEmptyView());</span><br><span class="line">        mItemAdapter.isUseEmpty(<span class="literal">false</span>);</span><br><span class="line">        <span class="comment">// TODO 是否需要设置自定义的LoadMoreView</span></span><br><span class="line">        mItemAdapter.setLoadMoreView(<span class="keyword">new</span> <span class="title class_">CustomCommonLoadMoreView</span>());</span><br><span class="line">        <span class="comment">// TODO 是否有分割线需要设置</span></span><br><span class="line">        <span class="comment">// 点击跳转</span></span><br><span class="line">        mItemAdapter.setOnItemClickListener(<span class="keyword">new</span> <span class="title class_">BaseQuickAdapter</span>.OnItemClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onItemClick</span><span class="params">(BaseQuickAdapter adapter, View view, <span class="type">int</span> position)</span> &#123;</span><br><span class="line">                <span class="comment">// TODO Item的点击事件</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// 加载更多</span></span><br><span class="line">        mItemAdapter.setOnLoadMoreListener(<span class="keyword">new</span> <span class="title class_">BaseQuickAdapter</span>.RequestLoadMoreListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onLoadMoreRequested</span><span class="params">()</span> &#123;</span><br><span class="line">                loadData(<span class="literal">false</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, mRecyclerView);</span><br><span class="line"></span><br><span class="line">        mRecyclerView.setAdapter(mItemAdapter);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">loadData</span><span class="params">(<span class="type">boolean</span> pIsLoadByRefresh)</span> &#123;</span><br><span class="line">        <span class="comment">// 网络异常直接提示网络异常</span></span><br><span class="line">        <span class="keyword">if</span> (!NetUtil.isNetworkConnected(getActivity())) &#123;</span><br><span class="line">            ToastUtil.showNotNetToast(getActivity());</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (pIsLoadByRefresh) &#123;</span><br><span class="line">            getPresenter().resetPage();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// TODO 根据业务修改函数名以及内部的P层调用</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> View <span class="title function_">getEmptyView</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">View</span> <span class="variable">emptyView</span> <span class="operator">=</span> LayoutInflater.from(<span class="built_in">this</span>).inflate(EMPTY_VIEW_RES_ID, <span class="literal">null</span>);</span><br><span class="line">        <span class="comment">// TODO 空态页是否有额外的操作</span></span><br><span class="line">        <span class="keyword">return</span> emptyView;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">__getDataSuccess</span><span class="params">(<span class="type">boolean</span> pIsLoadByRefresh,$&#123;beanName&#125; pT)</span> &#123;</span><br><span class="line">        mSmartRefreshLayout.finishRefresh();</span><br><span class="line">        mSmartRefreshLayout.setEnableRefresh(<span class="literal">true</span>);</span><br><span class="line">        mItemAdapter.isUseEmpty(<span class="literal">true</span>);</span><br><span class="line">        List&lt;$&#123;beanName&#125;.$&#123;childBeanName&#125;&gt;dataList = pT.getData();</span><br><span class="line">        <span class="keyword">if</span> (pIsLoadByRefresh) &#123;</span><br><span class="line">            mItemAdapter.setNewData(dataList);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            mItemAdapter.addData(dataList);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!ListUtils.isEmpty(dataList)) &#123;</span><br><span class="line">            checkLoadMore(<span class="literal">false</span>, mItemAdapter, BaseParser.parseInt(pT.getTotal()), getPresenter().getPageSize());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            mItemAdapter.loadMoreEnd();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">__getDataFail</span><span class="params">()</span> &#123;</span><br><span class="line">        mSmartRefreshLayout.finishRefresh();</span><br><span class="line">        mSmartRefreshLayout.setEnableRefresh(<span class="literal">true</span>);</span><br><span class="line">        mItemAdapter.isUseEmpty(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="MvpItemAdapter"><a href="#MvpItemAdapter" class="headerlink" title="MvpItemAdapter"></a>MvpItemAdapter</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> ($&#123;PACKAGE_NAME&#125; != <span class="string">&quot;&quot;</span>)<span class="keyword">package</span> $&#123;PACKAGE_NAME&#125;;#end</span><br><span class="line"><span class="keyword">import</span> com.chad.library.adapter.base.BaseQuickAdapter;</span><br><span class="line"><span class="keyword">import</span> com.chad.library.adapter.base.BaseViewHolder;</span><br><span class="line"></span><br><span class="line">#parse(<span class="string">&quot;File Header.java&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$</span>&#123;pageName&#125;ItemAdapter <span class="keyword">extends</span> <span class="title class_">BaseQuickAdapter</span>&lt;$&#123;beanName&#125;.$&#123;childBeanName&#125;, BaseViewHolder&gt;&#123;</span><br><span class="line">    <span class="keyword">public</span> $&#123;pageName&#125;ItemAdapter(<span class="type">int</span> layoutResId) &#123;</span><br><span class="line">        <span class="built_in">super</span>(layoutResId);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">convert</span><span class="params">(BaseViewHolder helper, $&#123;beanName&#125;.$&#123;childBeanName&#125; item)</span> &#123;</span><br><span class="line">        <span class="comment">// TODO Item的展示</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="MvpLdyActivity"><a href="#MvpLdyActivity" class="headerlink" title="MvpLdyActivity"></a>MvpLdyActivity</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> ($&#123;PACKAGE_NAME&#125; != <span class="string">&quot;&quot;</span>)<span class="keyword">package</span> $&#123;PACKAGE_NAME&#125;;#end</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.support.annotation.LayoutRes;</span><br><span class="line"><span class="keyword">import</span> android.support.annotation.NonNull;</span><br><span class="line"><span class="keyword">import</span> android.support.v7.widget.LinearLayoutManager;</span><br><span class="line"><span class="keyword">import</span> android.support.v7.widget.RecyclerView;</span><br><span class="line"><span class="keyword">import</span> android.support.v7.widget.Toolbar;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.chad.library.adapter.base.BaseQuickAdapter;</span><br><span class="line"><span class="keyword">import</span> com.scwang.smartrefresh.layout.SmartRefreshLayout;</span><br><span class="line"><span class="keyword">import</span> com.scwang.smartrefresh.layout.api.RefreshLayout;</span><br><span class="line"><span class="keyword">import</span> com.scwang.smartrefresh.layout.listener.OnRefreshListener;</span><br><span class="line"><span class="keyword">import</span> com.u1city.androidframe.common.baseData.BaseParser;</span><br><span class="line"><span class="keyword">import</span> com.u1city.androidframe.common.baseData.ListUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> xxx.xxx.R;</span><br><span class="line"><span class="keyword">import</span> butterknife.Bind;</span><br><span class="line"><span class="keyword">import</span> butterknife.ButterKnife;</span><br><span class="line"></span><br><span class="line">#parse(<span class="string">&quot;File Header.java&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$</span>&#123;pageName&#125;Activity <span class="keyword">extends</span> <span class="title class_">LdyBaseMvpActivity</span>&lt;$&#123;pageName&#125;Contract.View,$&#123;pageName&#125;Presenter&gt;</span><br><span class="line"><span class="keyword">implements</span> <span class="title class_">$</span>&#123;pageName&#125;Contract.View &#123;</span><br><span class="line">    <span class="meta">@LayoutRes</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">PAGE_LAYOUT_RES_ID</span> <span class="operator">=</span> R.layout.activity_$&#123;layoutName&#125;;</span><br><span class="line">    <span class="meta">@LayoutRes</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">ITEM_LAYOUT_RES_ID</span> <span class="operator">=</span> R.layout.item_$&#123;layoutName&#125;;</span><br><span class="line">    <span class="meta">@LayoutRes</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">EMPTY_VIEW_RES_ID</span> <span class="operator">=</span> R.layout.empty_$&#123;layoutName&#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Bind(R.id.toolbar)</span></span><br><span class="line">    Toolbar mToolbar;</span><br><span class="line">    <span class="meta">@Bind(R.id.toolbar_iv_left)</span></span><br><span class="line">    ImageView mToolbarIvLeft;</span><br><span class="line">    <span class="meta">@Bind(R.id.toolbar_title)</span></span><br><span class="line">    TextView mToolbarTitle;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Bind(R.id.$&#123;layoutName&#125;_srl)</span></span><br><span class="line">    SmartRefreshLayout mSmartRefreshLayout;</span><br><span class="line">    <span class="meta">@Bind(R.id.$&#123;layoutName&#125;_rv)</span></span><br><span class="line">    RecyclerView mRecyclerView;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// TODO 替换自己的ItemAdapter</span></span><br><span class="line">    <span class="keyword">private</span> $&#123;pageName&#125;ItemAdapter mItemAdapter;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreateMvp</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// TODO 是否可以去除Activity的背景</span></span><br><span class="line">        <span class="comment">// getWindow().setBackgroundDrawable(null);</span></span><br><span class="line">        setImmersion();</span><br><span class="line">        initView();</span><br><span class="line">        mSmartRefreshLayout.autoRefresh();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onDestroy</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onDestroy();</span><br><span class="line">        ButterKnife.unbind(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> <span class="title function_">setLayoutResId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> PAGE_LAYOUT_RES_ID;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NonNull</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> $&#123;pageName&#125;Presenter <span class="title function_">createPresenter</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">$</span>&#123;pageName&#125;Presenter(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setImmersion</span><span class="params">()</span> &#123;</span><br><span class="line">        getImmersion().setImmersionDarkFont(mToolbar, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initView</span><span class="params">()</span> &#123;</span><br><span class="line">        initToolbar();</span><br><span class="line">        initSrl();</span><br><span class="line">        initRv();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initToolbar</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// TODO 设置Toolbar</span></span><br><span class="line">        mToolbarTitle.setText(<span class="string">&quot;改成自己的标题&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        mToolbar.setNavigationOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">                finishAnimation();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initSrl</span><span class="params">()</span> &#123;</span><br><span class="line">        mSmartRefreshLayout.setEnableHeaderTranslationContent(<span class="literal">false</span>);</span><br><span class="line">        mSmartRefreshLayout.setDisableContentWhenRefresh(<span class="literal">true</span>);</span><br><span class="line">        mSmartRefreshLayout.setOnRefreshListener(<span class="keyword">new</span> <span class="title class_">OnRefreshListener</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onRefresh</span><span class="params">(RefreshLayout refreshlayout)</span> &#123;</span><br><span class="line">                loadData(<span class="literal">true</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initRv</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// TODO 根据实际进行调整</span></span><br><span class="line">        <span class="type">LinearLayoutManager</span> <span class="variable">linearLayoutManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LinearLayoutManager</span>(<span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line">        mRecyclerView.setLayoutManager(linearLayoutManager);</span><br><span class="line"></span><br><span class="line">        mItemAdapter = <span class="keyword">new</span> <span class="title class_">$</span>&#123;pageName&#125;ItemAdapter(ITEM_LAYOUT_RES_ID);</span><br><span class="line">        mItemAdapter.setEmptyView(getEmptyView());</span><br><span class="line">        mItemAdapter.isUseEmpty(<span class="literal">false</span>);</span><br><span class="line">        <span class="comment">// TODO 是否需要设置自定义的LoadMoreView</span></span><br><span class="line">        mItemAdapter.setLoadMoreView(<span class="keyword">new</span> <span class="title class_">CustomCommonLoadMoreView</span>());</span><br><span class="line">        <span class="comment">// TODO 是否有分割线需要设置</span></span><br><span class="line">        <span class="comment">// 点击跳转</span></span><br><span class="line">        mItemAdapter.setOnItemClickListener(<span class="keyword">new</span> <span class="title class_">BaseQuickAdapter</span>.OnItemClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onItemClick</span><span class="params">(BaseQuickAdapter adapter, View view, <span class="type">int</span> position)</span> &#123;</span><br><span class="line">                <span class="comment">// TODO Item的点击事件</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// 加载更多</span></span><br><span class="line">        mItemAdapter.setOnLoadMoreListener(<span class="keyword">new</span> <span class="title class_">BaseQuickAdapter</span>.RequestLoadMoreListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onLoadMoreRequested</span><span class="params">()</span> &#123;</span><br><span class="line">                loadData(<span class="literal">false</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, mRecyclerView);</span><br><span class="line"></span><br><span class="line">        mRecyclerView.setAdapter(mItemAdapter);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">loadData</span><span class="params">(<span class="type">boolean</span> pIsLoadByRefresh)</span> &#123;</span><br><span class="line">        <span class="comment">// 网络异常直接提示网络异常</span></span><br><span class="line">        <span class="keyword">if</span> (!NetUtil.isNetworkConnected(<span class="built_in">this</span>)) &#123;</span><br><span class="line">            ToastUtil.showNotNetToast(<span class="built_in">this</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (pIsLoadByRefresh) &#123;</span><br><span class="line">            getPresenter().resetPage();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// TODO 根据业务修改函数名以及内部的P层调用</span></span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> View <span class="title function_">getEmptyView</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">View</span> <span class="variable">emptyView</span> <span class="operator">=</span> LayoutInflater.from(<span class="built_in">this</span>).inflate(EMPTY_VIEW_RES_ID, <span class="literal">null</span>);</span><br><span class="line">        <span class="comment">// TODO 空态页是否有额外的操作</span></span><br><span class="line">        <span class="keyword">return</span> emptyView;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">__getDataSuccess</span><span class="params">(<span class="type">boolean</span> pIsLoadByRefresh,$&#123;beanName&#125; pT)</span> &#123;</span><br><span class="line">        mSmartRefreshLayout.finishRefresh();</span><br><span class="line">        mSmartRefreshLayout.setEnableRefresh(<span class="literal">true</span>);</span><br><span class="line">        mItemAdapter.isUseEmpty(<span class="literal">true</span>);</span><br><span class="line">        List&lt;$&#123;beanName&#125;.$&#123;childBeanName&#125;&gt;dataList = pT.getData();</span><br><span class="line">        <span class="keyword">if</span> (pIsLoadByRefresh) &#123;</span><br><span class="line">            mItemAdapter.setNewData(dataList);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            mItemAdapter.addData(dataList);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!ListUtils.isEmpty(dataList)) &#123;</span><br><span class="line">            checkLoadMore(<span class="literal">false</span>, mItemAdapter, BaseParser.parseInt(pT.getTotal()), getPresenter().getPageSize());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            mItemAdapter.loadMoreEnd();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">__getDataFail</span><span class="params">()</span> &#123;</span><br><span class="line">        mSmartRefreshLayout.finishRefresh();</span><br><span class="line">        mSmartRefreshLayout.setEnableRefresh(<span class="literal">true</span>);</span><br><span class="line">        mItemAdapter.isUseEmpty(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="MvpLdyFragment"><a href="#MvpLdyFragment" class="headerlink" title="MvpLdyFragment"></a>MvpLdyFragment</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> ($&#123;PACKAGE_NAME&#125; != <span class="string">&quot;&quot;</span>)<span class="keyword">package</span> $&#123;PACKAGE_NAME&#125;;#end</span><br><span class="line"><span class="keyword">import</span> android.net.Uri;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.support.annotation.LayoutRes;</span><br><span class="line"><span class="keyword">import</span> android.support.annotation.NonNull;</span><br><span class="line"><span class="keyword">import</span> android.support.annotation.Nullable;</span><br><span class="line"><span class="keyword">import</span> android.support.v7.widget.LinearLayoutManager;</span><br><span class="line"><span class="keyword">import</span> android.support.v7.widget.RecyclerView;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.chad.library.adapter.base.BaseQuickAdapter;</span><br><span class="line"><span class="keyword">import</span> com.scwang.smartrefresh.layout.SmartRefreshLayout;</span><br><span class="line"><span class="keyword">import</span> com.scwang.smartrefresh.layout.api.RefreshLayout;</span><br><span class="line"><span class="keyword">import</span> com.scwang.smartrefresh.layout.listener.OnRefreshListener;</span><br><span class="line"><span class="keyword">import</span> com.u1city.androidframe.common.baseData.BaseParser;</span><br><span class="line"><span class="keyword">import</span> com.u1city.androidframe.common.baseData.ListUtils;</span><br><span class="line"><span class="keyword">import</span> com.u1city.androidframe.common.network.NetUtil;</span><br><span class="line"><span class="keyword">import</span> com.u1city.androidframe.common.toast.ToastUtil;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> xxx.xxx.R;</span><br><span class="line"><span class="keyword">import</span> xxx.xxx.base.LdyBaseMvpFragment;</span><br><span class="line"><span class="keyword">import</span> butterknife.Bind;</span><br><span class="line"><span class="keyword">import</span> butterknife.ButterKnife;</span><br><span class="line"></span><br><span class="line">#parse(<span class="string">&quot;File Header.java&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$</span>&#123;pageName&#125;Fragment <span class="keyword">extends</span> <span class="title class_">LdyBaseMvpFragment</span>&lt;$&#123;pageName&#125;Contract.View,$&#123;pageName&#125;Presenter&gt;</span><br><span class="line"><span class="keyword">implements</span> <span class="title class_">$</span>&#123;pageName&#125;Contract.View&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@LayoutRes</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">PAGE_LAYOUT_RES_ID</span> <span class="operator">=</span> R.layout.fragment_$&#123;layoutName&#125;;</span><br><span class="line">    <span class="meta">@LayoutRes</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">ITEM_LAYOUT_RES_ID</span> <span class="operator">=</span> R.layout.item_$&#123;layoutName&#125;;</span><br><span class="line">    <span class="meta">@LayoutRes</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">EMPTY_VIEW_RES_ID</span> <span class="operator">=</span> R.layout.empty_$&#123;layoutName&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bind(R.id.$&#123;layoutName&#125;_srl)</span></span><br><span class="line">    SmartRefreshLayout mSmartRefreshLayout;</span><br><span class="line">    <span class="meta">@Bind(R.id.$&#123;layoutName&#125;_rv)</span></span><br><span class="line">    RecyclerView mRecyclerView;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// TODO 替换自己的ItemAdapter</span></span><br><span class="line">    <span class="keyword">private</span> $&#123;pageName&#125;ItemAdapter mItemAdapter;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> $&#123;pageName&#125;Fragment <span class="title function_">newInstance</span><span class="params">(Map&lt;String, Object&gt; map)</span> &#123;</span><br><span class="line">        $&#123;pageName&#125;<span class="type">Fragment</span> <span class="variable">fragment</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">$</span>&#123;pageName&#125;Fragment();</span><br><span class="line">        <span class="comment">//TODO：可以传一些值进来</span></span><br><span class="line">        <span class="keyword">if</span> (map != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="type">Bundle</span> <span class="variable">args</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bundle</span>();</span><br><span class="line">            args.putInt(<span class="string">&quot;key&quot;</span>, (<span class="type">int</span>) map.get(<span class="string">&quot;key&quot;</span>));</span><br><span class="line">            args.putParcelable(<span class="string">&quot;key&quot;</span>, (Uri) map.get(<span class="string">&quot;key&quot;</span>));</span><br><span class="line">            args.putBoolean(<span class="string">&quot;key&quot;</span>, (<span class="type">boolean</span>) map.get(<span class="string">&quot;key&quot;</span>));</span><br><span class="line">            args.putString(<span class="string">&quot;key&quot;</span>, (String) map.get(<span class="string">&quot;key&quot;</span>));</span><br><span class="line">            fragment.setArguments(args);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> fragment;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(<span class="meta">@Nullable</span> Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        <span class="comment">// TODO 取出一些参数</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            xxx = getArguments().getString(Key);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">__getDataSuccess</span><span class="params">(<span class="type">boolean</span> pIsLoadByRefresh, $&#123;beanName&#125; pT)</span> &#123;</span><br><span class="line">        mSmartRefreshLayout.finishRefresh();</span><br><span class="line">        mSmartRefreshLayout.setEnableRefresh(<span class="literal">true</span>);</span><br><span class="line">        mItemAdapter.isUseEmpty(<span class="literal">true</span>);</span><br><span class="line">        List&lt;$&#123;beanName&#125;.$&#123;childBeanName&#125;&gt; dataList = pT.getData();</span><br><span class="line">        <span class="keyword">if</span> (pIsLoadByRefresh) &#123;</span><br><span class="line">            mItemAdapter.setNewData(dataList);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            mItemAdapter.addData(dataList);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!ListUtils.isEmpty(dataList)) &#123;</span><br><span class="line">            checkLoadMore(<span class="literal">false</span>, mItemAdapter, BaseParser.parseInt(pT.getTotal()), getPresenter().getPageSize());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            mItemAdapter.loadMoreEnd();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">__getDataFail</span><span class="params">()</span> &#123;</span><br><span class="line">        mSmartRefreshLayout.finishRefresh();</span><br><span class="line">        mSmartRefreshLayout.setEnableRefresh(<span class="literal">true</span>);</span><br><span class="line">        mItemAdapter.isUseEmpty(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onViewCreatedMvp</span><span class="params">()</span> &#123;</span><br><span class="line">        initParams();</span><br><span class="line">        initView();</span><br><span class="line">        mSmartRefreshLayout.autoRefresh();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> View <span class="title function_">onCreateView</span><span class="params">(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> inflate a fragment view</span></span><br><span class="line">        <span class="type">View</span> <span class="variable">rootView</span> <span class="operator">=</span> <span class="built_in">super</span>.onCreateView(inflater, container, savedInstanceState);</span><br><span class="line">        ButterKnife.bind(<span class="built_in">this</span>, rootView);</span><br><span class="line">        <span class="keyword">return</span> rootView;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDestroyView</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onDestroyView();</span><br><span class="line">        ButterKnife.unbind(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initView</span><span class="params">()</span> &#123;</span><br><span class="line">        initSrl();</span><br><span class="line">        initRv();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始化刷新控件</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initSrl</span><span class="params">()</span> &#123;</span><br><span class="line">        mSmartRefreshLayout.setEnableHeaderTranslationContent(<span class="literal">false</span>);</span><br><span class="line">        mSmartRefreshLayout.setDisableContentWhenRefresh(<span class="literal">true</span>);</span><br><span class="line">        mSmartRefreshLayout.setOnRefreshListener(<span class="keyword">new</span> <span class="title class_">OnRefreshListener</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onRefresh</span><span class="params">(RefreshLayout refreshlayout)</span> &#123;</span><br><span class="line">                getChildModularData(<span class="literal">true</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始化RecyclerView</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initRv</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// TODO 根据实际进行调整</span></span><br><span class="line">        <span class="type">LinearLayoutManager</span> <span class="variable">linearLayoutManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LinearLayoutManager</span>(getContext());</span><br><span class="line"></span><br><span class="line">        mRecyclerView.setLayoutManager(linearLayoutManager);</span><br><span class="line"></span><br><span class="line">        mItemAdapter = <span class="keyword">new</span> <span class="title class_">$</span>&#123;pageName&#125;ItemAdapter(ITEM_LAYOUT_RES_ID);</span><br><span class="line">        mItemAdapter.setEmptyView(getEmptyView());</span><br><span class="line">        mItemAdapter.isUseEmpty(<span class="literal">false</span>);</span><br><span class="line">        <span class="comment">// TODO 是否需要设置自定义的LoadMoreView</span></span><br><span class="line">        mItemAdapter.setLoadMoreView(<span class="keyword">new</span> <span class="title class_">CustomCommonLoadMoreView</span>());</span><br><span class="line">        <span class="comment">// TODO 是否有分割线需要设置</span></span><br><span class="line">        <span class="comment">// 点击跳转</span></span><br><span class="line">        mItemAdapter.setOnItemClickListener(<span class="keyword">new</span> <span class="title class_">BaseQuickAdapter</span>.OnItemClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onItemClick</span><span class="params">(BaseQuickAdapter adapter, View view, <span class="type">int</span> position)</span> &#123;</span><br><span class="line">                <span class="comment">// TODO Item的点击事件</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// 加载更多</span></span><br><span class="line">        mItemAdapter.setOnLoadMoreListener(<span class="keyword">new</span> <span class="title class_">BaseQuickAdapter</span>.RequestLoadMoreListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onLoadMoreRequested</span><span class="params">()</span> &#123;</span><br><span class="line">                getChildModularData(<span class="literal">false</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, mRecyclerView);</span><br><span class="line"></span><br><span class="line">        mRecyclerView.setAdapter(mItemAdapter);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> View <span class="title function_">getEmptyView</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">View</span> <span class="variable">emptyView</span> <span class="operator">=</span> LayoutInflater.from(getContext()).inflate(EMPTY_VIEW_RES_ID, <span class="literal">null</span>);</span><br><span class="line">        <span class="comment">// TODO 空态页是否有额外的操作</span></span><br><span class="line">        <span class="keyword">return</span> emptyView;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始化一些基本的参数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initParams</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> <span class="title function_">setLayoutResId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> PAGE_LAYOUT_RES_ID;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">lazyLoadData</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 这里不用smartRefreshLayout的进度圈是因为显示的时机有点滞后</span></span><br><span class="line">        showRequestLoading();</span><br><span class="line">        getChildModularData(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取该模板id下各个模块的数据&lt;br&gt;&lt;/br&gt;</span></span><br><span class="line"><span class="comment">     * &lt;li&gt;1.先从缓存获取显示&lt;/li&gt;</span></span><br><span class="line"><span class="comment">     * &lt;li&gt;2.如果网络异常，则显示提示；否则延迟500L毫秒刷新数据&lt;/li&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">getChildModularData</span><span class="params">(<span class="type">boolean</span> pIsLoadByRefresh)</span> &#123;</span><br><span class="line">        <span class="comment">// 网络异常直接提示网络异常</span></span><br><span class="line">        <span class="keyword">if</span> (!NetUtil.isNetworkConnected(getActivity())) &#123;</span><br><span class="line">            ToastUtil.showNotNetToast(getActivity());</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (pIsLoadByRefresh) &#123;</span><br><span class="line">            getPresenter().resetPage();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//网络请求数据</span></span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@NonNull</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> $&#123;pageName&#125;Presenter <span class="title function_">createPresenter</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">$</span>&#123;pageName&#125;Presenter(getContext());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="MvpModel"><a href="#MvpModel" class="headerlink" title="MvpModel"></a>MvpModel</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> ($&#123;PACKAGE_NAME&#125; &amp;&amp; $&#123;PACKAGE_NAME&#125; != <span class="string">&quot;&quot;</span>)<span class="keyword">package</span> $&#123;PACKAGE_NAME&#125;;#end</span><br><span class="line"></span><br><span class="line">#<span class="keyword">if</span> ($&#123;IMPORT_BLOCK&#125; != <span class="string">&quot;&quot;</span>)$&#123;IMPORT_BLOCK&#125;</span><br><span class="line">#end</span><br><span class="line">#parse(<span class="string">&quot;File Header.java&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$</span>&#123;pageName&#125;Model <span class="keyword">implements</span> <span class="title class_">MvpModel</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Context mContext;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> $&#123;pageName&#125;Model(Context context)&#123;</span><br><span class="line">        mContext = context;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDestroy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="MvpPresenter"><a href="#MvpPresenter" class="headerlink" title="MvpPresenter"></a>MvpPresenter</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> ($&#123;PACKAGE_NAME&#125; &amp;&amp; $&#123;PACKAGE_NAME&#125; != <span class="string">&quot;&quot;</span>)<span class="keyword">package</span> $&#123;PACKAGE_NAME&#125;;#end</span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.u1city.androidframe.framework.v1.support.impl.MvpBasePresenter;</span><br><span class="line">#parse(<span class="string">&quot;File Header.java&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$</span>&#123;pageName&#125;Presenter <span class="keyword">extends</span> <span class="title class_">MvpBasePresenter</span>&lt;$&#123;pageName&#125;Contract.View&gt; &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> $&#123;pageName&#125;Model mModel;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> $&#123;pageName&#125;Presenter(Context context) &#123;</span><br><span class="line">        <span class="built_in">super</span>(context);</span><br><span class="line">        mModel = <span class="keyword">new</span> <span class="title class_">$</span>&#123;pageName&#125;Model(context);</span><br><span class="line">    &#125; </span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">        mModel = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="StaticClassSingleton"><a href="#StaticClassSingleton" class="headerlink" title="StaticClassSingleton"></a>StaticClassSingleton</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> ($&#123;PACKAGE_NAME&#125; &amp;&amp; $&#123;PACKAGE_NAME&#125; != <span class="string">&quot;&quot;</span>)<span class="keyword">package</span> $&#123;PACKAGE_NAME&#125;;#end</span><br><span class="line">#parse(<span class="string">&quot;File Header.java&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$</span>&#123;NAME&#125; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">TAG</span> <span class="operator">=</span> <span class="string">&quot;$&#123;NAME&#125;&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> $&#123;NAME&#125;()&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> $&#123;NAME&#125; getInstance()&#123;</span><br><span class="line">        <span class="keyword">return</span> $&#123;NAME&#125;Holder.singleton;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 单例模式-&gt;静态内部类&lt;br/&gt;</span></span><br><span class="line"><span class="comment">     * 多线程情况下，使用合理一些,推荐</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">$</span>&#123;NAME&#125;Holder &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> $&#123;NAME&#125; singleton = <span class="keyword">new</span> <span class="title class_">$</span>&#123;NAME&#125;();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="Arms"><a href="#Arms" class="headerlink" title="Arms"></a>Arms</h3><h4 id="ArmsActivity"><a href="#ArmsActivity" class="headerlink" title="ArmsActivity"></a>ArmsActivity</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> ($&#123;PACKAGE_NAME&#125; &amp;&amp; $&#123;PACKAGE_NAME&#125; != <span class="string">&quot;&quot;</span>)<span class="keyword">package</span> $&#123;PACKAGE_NAME&#125;;#end</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> androidx.annotation.NonNull;</span><br><span class="line"><span class="keyword">import</span> android.support.annotation.Nullable;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> com.jess.arms.base.BaseActivity;</span><br><span class="line"><span class="keyword">import</span> com.jess.arms.utils.ArmsUtils;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> com.jess.arms.utils.Preconditions.checkNotNull;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 通过Template生成对应页面的MVP和Dagger代码,请注意输入框中输入的名字必须相同</span></span><br><span class="line"><span class="comment">  * 由于每个项目包结构都不一定相同,所以每生成一个文件需要自己导入import包名,可以在设置中设置自动导入包名</span></span><br><span class="line"><span class="comment">  * 请在对应包下按以下顺序生成对应代码,Contract-&gt;Model-&gt;Presenter-&gt;Activity-&gt;Module-&gt;Component</span></span><br><span class="line"><span class="comment">  * 因为生成Activity时,Module和Component还没生成,但是Activity中有它们的引用,所以会报错,但是不用理会</span></span><br><span class="line"><span class="comment">  * 继续将Module和Component生成完后,编译一下项目再回到Activity,按提示修改一个方法名即可</span></span><br><span class="line"><span class="comment">  * 如果想生成Fragment的相关文件,则将上面构建顺序中的Activity换为Fragment,并将Component中inject方法的参数改为此Fragment</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"></span><br><span class="line">#parse(<span class="string">&quot;File Header.java&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$</span>&#123;NAME&#125;Activity <span class="keyword">extends</span> <span class="title class_">BaseActivity</span>&lt;$&#123;NAME&#125;Presenter&gt; <span class="keyword">implements</span> <span class="title class_">$</span>&#123;NAME&#125;Contract.View &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setupActivityComponent</span><span class="params">(AppComponent appComponent)</span> &#123;</span><br><span class="line">        Dagger$&#123;NAME&#125;Component</span><br><span class="line">                .builder()</span><br><span class="line">                .appComponent(appComponent)</span><br><span class="line">                .$&#123;NAME&#125;Module(<span class="keyword">new</span> <span class="title class_">$</span>&#123;NAME&#125;Module(<span class="built_in">this</span>)) <span class="comment">//请将$&#123;NAME&#125;Module()第一个首字母改为小写</span></span><br><span class="line">                .build()</span><br><span class="line">                .inject(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">initView</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initData</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showLoading</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hideLoading</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showMessage</span><span class="params">(<span class="meta">@NonNull</span> String message)</span> &#123;</span><br><span class="line">        checkNotNull(message);</span><br><span class="line">        ArmsUtils.snackbarText(message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">launchActivity</span><span class="params">(<span class="meta">@NonNull</span> Intent intent)</span> &#123;</span><br><span class="line">        checkNotNull(intent);</span><br><span class="line">        ArmsUtils.startActivity(intent);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">killMyself</span><span class="params">()</span> &#123;</span><br><span class="line">        finish();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="ArmsAdapter"><a href="#ArmsAdapter" class="headerlink" title="ArmsAdapter"></a>ArmsAdapter</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> ($&#123;PACKAGE_NAME&#125; &amp;&amp; $&#123;PACKAGE_NAME&#125; != <span class="string">&quot;&quot;</span>)<span class="keyword">package</span> $&#123;PACKAGE_NAME&#125;;#end</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.chad.library.adapter.base.BaseQuickAdapter;</span><br><span class="line"><span class="keyword">import</span> com.chad.library.adapter.base.BaseViewHolder;</span><br><span class="line"><span class="keyword">import</span> com.jess.arms.di.component.AppComponent;</span><br><span class="line"><span class="keyword">import</span> com.jess.arms.utils.ArmsUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.Nullable;</span><br><span class="line"></span><br><span class="line">#parse(<span class="string">&quot;File Header.java&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$</span>&#123;NAME&#125;Adapter <span class="keyword">extends</span> <span class="title class_">BaseQuickAdapter</span>&lt;$&#123;NAME&#125;Bean, BaseViewHolder&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> AppComponent mAppComponent;</span><br><span class="line">    <span class="keyword">private</span> Context      mContext;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> $&#123;NAME&#125;Adapter(<span class="meta">@Nullable</span> List&lt;$&#123;NAME&#125;Bean&gt; data, Context context) &#123;</span><br><span class="line">        <span class="built_in">super</span>(R.layout.item_$&#123;NAME&#125;_recycleview, data);</span><br><span class="line">        <span class="built_in">this</span>.mContext = context;</span><br><span class="line">        <span class="comment">//可以从任何可以拿到Context的地方，拿到AppComponent，从而得到用Dagger管理的单例对象</span></span><br><span class="line">        <span class="built_in">this</span>.mAppComponent = ArmsUtils.obtainAppComponentFromContext(context);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">convert</span><span class="params">(BaseViewHolder helper, $&#123;NAME&#125;Bean item)</span> &#123;</span><br><span class="line">        <span class="comment">//todo: 页面逻辑</span></span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="ArmsAutoView"><a href="#ArmsAutoView" class="headerlink" title="ArmsAutoView"></a>ArmsAutoView</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> ($&#123;PACKAGE_NAME&#125; &amp;&amp; $&#123;PACKAGE_NAME&#125; != <span class="string">&quot;&quot;</span>)<span class="keyword">package</span> $&#123;PACKAGE_NAME&#125;;#end</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.support.annotation.Nullable;</span><br><span class="line"><span class="keyword">import</span> android.util.AttributeSet;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zhy.autolayout.AutoLayoutInfo;</span><br><span class="line"><span class="keyword">import</span> com.zhy.autolayout.utils.AutoLayoutHelper;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 此Template用于生成AutoLayout需要的的Auto系列View,如需要使ScrollView适配,使用此Template输入ScrollView,即可生成</span></span><br><span class="line"><span class="comment"> * AutoScrollView,使用此View即可自适应</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#parse(<span class="string">&quot;File Header.java&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Auto$</span>&#123;NAME&#125; <span class="keyword">extends</span> <span class="title class_">$</span>&#123;NAME&#125; &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">AutoLayoutHelper</span> <span class="variable">mHelper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AutoLayoutHelper</span>(<span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Auto$&#123;NAME&#125;(Context context) &#123;</span><br><span class="line">        <span class="built_in">super</span>(context);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Auto$&#123;NAME&#125;(Context context, <span class="meta">@Nullable</span> AttributeSet attrs) &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Auto$&#123;NAME&#125;(Context context, <span class="meta">@Nullable</span> AttributeSet attrs, <span class="type">int</span> defStyleAttr) &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs, defStyleAttr);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onMeasure</span><span class="params">(<span class="type">int</span> widthMeasureSpec, <span class="type">int</span> heightMeasureSpec)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!isInEditMode())&#123;</span><br><span class="line">            mHelper.adjustChildren();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">super</span>.onMeasure(widthMeasureSpec, heightMeasureSpec);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onLayout</span><span class="params">(<span class="type">boolean</span> changed, <span class="type">int</span> l, <span class="type">int</span> t, <span class="type">int</span> r, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onLayout(changed, l, t, r, b);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> LayoutParams <span class="title function_">generateLayoutParams</span><span class="params">(AttributeSet attrs)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">LayoutParams</span>(getContext(), attrs);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">LayoutParams</span> <span class="keyword">extends</span> <span class="title class_">$</span>&#123;NAME&#125;.LayoutParams</span><br><span class="line">            <span class="keyword">implements</span> <span class="title class_">AutoLayoutHelper</span>.AutoLayoutParams &#123;</span><br><span class="line">        <span class="keyword">private</span> AutoLayoutInfo mAutoLayoutInfo;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">LayoutParams</span><span class="params">(Context c, AttributeSet attrs)</span> &#123;</span><br><span class="line">            <span class="built_in">super</span>(c, attrs);</span><br><span class="line">            mAutoLayoutInfo = AutoLayoutHelper.getAutoLayoutInfo(c, attrs);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> AutoLayoutInfo <span class="title function_">getAutoLayoutInfo</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> mAutoLayoutInfo;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">LayoutParams</span><span class="params">(<span class="type">int</span> width, <span class="type">int</span> height)</span> &#123;</span><br><span class="line">            <span class="built_in">super</span>(width, height);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">LayoutParams</span><span class="params">(ViewGroup.LayoutParams source)</span> &#123;</span><br><span class="line">            <span class="built_in">super</span>(source);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">LayoutParams</span><span class="params">(MarginLayoutParams source)</span> &#123;</span><br><span class="line">            <span class="built_in">super</span>(source);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="ArmsComponent"><a href="#ArmsComponent" class="headerlink" title="ArmsComponent"></a>ArmsComponent</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> ($&#123;PACKAGE_NAME&#125; &amp;&amp; $&#123;PACKAGE_NAME&#125; != <span class="string">&quot;&quot;</span>)<span class="keyword">package</span> $&#123;PACKAGE_NAME&#125;;#end</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.jess.arms.di.scope.ActivityScope;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> dagger.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 通过Template生成对应页面的MVP和Dagger代码,请注意输入框中输入的名字必须相同</span></span><br><span class="line"><span class="comment">  * 由于每个项目包结构都不一定相同,所以每生成一个文件需要自己导入import包名,可以在设置中设置自动导入包名</span></span><br><span class="line"><span class="comment">  * 请在对应包下按以下顺序生成对应代码,Contract-&gt;Model-&gt;Presenter-&gt;Activity-&gt;Module-&gt;Component</span></span><br><span class="line"><span class="comment">  * 因为生成Activity时,Module和Component还没生成,但是Activity中有它们的引用,所以会报错,但是不用理会</span></span><br><span class="line"><span class="comment">  * 继续将Module和Component生成完后,编译一下项目再回到Activity,按提示修改一个方法名即可</span></span><br><span class="line"><span class="comment">  * 如果想生成Fragment的相关文件,则将上面构建顺序中的Activity换为Fragment,并将Component中inject方法的参数改为此Fragment</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"></span><br><span class="line">#parse(<span class="string">&quot;File Header.java&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@ActivityScope</span></span><br><span class="line"><span class="meta">@Component(modules = $&#123;NAME&#125;Module.class,dependencies = AppComponent.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">$</span>&#123;NAME&#125;Component &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">inject</span><span class="params">($&#123;NAME&#125;Activity activity)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="ArmsContract"><a href="#ArmsContract" class="headerlink" title="ArmsContract"></a>ArmsContract</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> ($&#123;PACKAGE_NAME&#125; &amp;&amp; $&#123;PACKAGE_NAME&#125; != <span class="string">&quot;&quot;</span>)<span class="keyword">package</span> $&#123;PACKAGE_NAME&#125;;#end</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.app.Activity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.jess.arms.mvp.IView;</span><br><span class="line"><span class="keyword">import</span> com.jess.arms.mvp.IModel;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 通过Template生成对应页面的MVP和Dagger代码,请注意输入框中输入的名字必须相同</span></span><br><span class="line"><span class="comment">  * 由于每个项目包结构都不一定相同,所以每生成一个文件需要自己导入import包名,可以在设置中设置自动导入包名</span></span><br><span class="line"><span class="comment">  * 请在对应包下按以下顺序生成对应代码,Contract-&gt;Model-&gt;Presenter-&gt;Activity-&gt;Module-&gt;Component</span></span><br><span class="line"><span class="comment">  * 因为生成Activity时,Module和Component还没生成,但是Activity中有它们的引用,所以会报错,但是不用理会</span></span><br><span class="line"><span class="comment">  * 继续将Module和Component生成完后,编译一下项目再回到Activity,按提示修改一个方法名即可</span></span><br><span class="line"><span class="comment">  * 如果想生成Fragment的相关文件,则将上面构建顺序中的Activity换为Fragment,并将Component中inject方法的参数改为此Fragment</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"></span><br><span class="line">#parse(<span class="string">&quot;File Header.java&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">$</span>&#123;NAME&#125;Contract &#123;</span><br><span class="line">    <span class="comment">//对于经常使用的关于UI的方法可以定义到IView中,如显示隐藏进度条,和显示文字消息</span></span><br><span class="line">    <span class="keyword">interface</span> <span class="title class_">View</span> <span class="keyword">extends</span> <span class="title class_">IView</span> &#123;</span><br><span class="line">        Activity <span class="title function_">getActivity</span><span class="params">()</span>;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//Model层定义接口,外部只需关心Model返回的数据,无需关心内部细节,即是否使用缓存</span></span><br><span class="line">    <span class="keyword">interface</span> <span class="title class_">Model</span> <span class="keyword">extends</span> <span class="title class_">IModel</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="ArmsFragment"><a href="#ArmsFragment" class="headerlink" title="ArmsFragment"></a>ArmsFragment</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> ($&#123;PACKAGE_NAME&#125; &amp;&amp; $&#123;PACKAGE_NAME&#125; != <span class="string">&quot;&quot;</span>)<span class="keyword">package</span> $&#123;PACKAGE_NAME&#125;;#end</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> androidx.annotation.NonNull;</span><br><span class="line"><span class="keyword">import</span> android.support.annotation.Nullable;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> com.jess.arms.base.BaseFragment</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.jess.arms.utils.ArmsUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> butterknife.Bind;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> com.jess.arms.utils.Preconditions.checkNotNull;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 通过Template生成对应页面的MVP和Dagger代码,请注意输入框中输入的名字必须相同</span></span><br><span class="line"><span class="comment">  * 由于每个项目包结构都不一定相同,所以每生成一个文件需要自己导入import包名,可以在设置中设置自动导入包名</span></span><br><span class="line"><span class="comment">  * 请在对应包下按以下顺序生成对应代码,Contract-&gt;Model-&gt;Presenter-&gt;Activity-&gt;Module-&gt;Component</span></span><br><span class="line"><span class="comment">  * 因为生成Activity时,Module和Component还没生成,但是Activity中有它们的引用,所以会报错,但是不用理会</span></span><br><span class="line"><span class="comment">  * 继续将Module和Component生成完后,编译一下项目再回到Activity,按提示修改一个方法名即可</span></span><br><span class="line"><span class="comment">  * 如果想生成Fragment的相关文件,则将上面构建顺序中的Activity换为Fragment,并将Component中inject方法的参数改为此Fragment</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"></span><br><span class="line">#parse(<span class="string">&quot;File Header.java&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$</span>&#123;NAME&#125;Fragment <span class="keyword">extends</span> <span class="title class_">BaseFragment</span>&lt;$&#123;NAME&#125;Presenter&gt; <span class="keyword">implements</span> <span class="title class_">$</span>&#123;NAME&#125;Contract.View&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> $&#123;NAME&#125;Fragment <span class="title function_">newInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        $&#123;NAME&#125;<span class="type">Fragment</span> <span class="variable">fragment</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">$</span>&#123;NAME&#125;Fragment();</span><br><span class="line">        <span class="keyword">return</span> fragment;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setupFragmentComponent</span><span class="params">(AppComponent appComponent)</span> &#123;</span><br><span class="line">        Dagger$&#123;NAME&#125;Component</span><br><span class="line">                .builder()</span><br><span class="line">                .appComponent(appComponent)</span><br><span class="line">                .$&#123;NAME&#125;Module(<span class="keyword">new</span> <span class="title class_">$</span>&#123;NAME&#125;Module(<span class="built_in">this</span>))<span class="comment">//请将$&#123;NAME&#125;Module()第一个首字母改为小写</span></span><br><span class="line">                .build()</span><br><span class="line">                .inject(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> View <span class="title function_">initView</span><span class="params">(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> inflater.inflate(layout_id, container, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initData</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 此方法是让外部调用使fragment做一些操作的,比如说外部的activity想让fragment对象执行一些方法,</span></span><br><span class="line"><span class="comment">     * 建议在有多个需要让外界调用的方法时,统一传Message,通过what字段,来区分不同的方法,在setData</span></span><br><span class="line"><span class="comment">     * 方法中就可以switch做不同的操作,这样就可以用统一的入口方法做不同的事</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * 使用此方法时请注意调用时fragment的生命周期,如果调用此setData方法时onCreate还没执行</span></span><br><span class="line"><span class="comment">     * setData里却调用了presenter的方法时,是会报空的,因为dagger注入是在onCreated方法中执行的,然后才创建的presenter</span></span><br><span class="line"><span class="comment">     * 如果要做一些初始化操作,可以不必让外部调setData,在initData中初始化就可以了</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setData</span><span class="params">(Object data)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showLoading</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hideLoading</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showMessage</span><span class="params">(<span class="meta">@NonNull</span> String message)</span> &#123;</span><br><span class="line">        checkNotNull(message);</span><br><span class="line">        ArmsUtils.snackbarText(message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">launchActivity</span><span class="params">(<span class="meta">@NonNull</span> Intent intent)</span> &#123;</span><br><span class="line">        checkNotNull(intent);</span><br><span class="line">        ArmsUtils.startActivity(intent);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">killMyself</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="ArmsModel"><a href="#ArmsModel" class="headerlink" title="ArmsModel"></a>ArmsModel</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> ($&#123;PACKAGE_NAME&#125; &amp;&amp; $&#123;PACKAGE_NAME&#125; != <span class="string">&quot;&quot;</span>)<span class="keyword">package</span> $&#123;PACKAGE_NAME&#125;;#end</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.app.Application;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.Gson;</span><br><span class="line"><span class="keyword">import</span> com.jess.arms.integration.IRepositoryManager;</span><br><span class="line"><span class="keyword">import</span> com.jess.arms.mvp.BaseModel;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> com.jess.arms.utils.Preconditions.checkNotNull;</span><br><span class="line"><span class="keyword">import</span> com.jess.arms.di.scope.ActivityScope;</span><br><span class="line"><span class="keyword">import</span> javax.inject.Inject;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 通过Template生成对应页面的MVP和Dagger代码,请注意输入框中输入的名字必须相同</span></span><br><span class="line"><span class="comment">  * 由于每个项目包结构都不一定相同,所以每生成一个文件需要自己导入import包名,可以在设置中设置自动导入包名</span></span><br><span class="line"><span class="comment">  * 请在对应包下按以下顺序生成对应代码,Contract-&gt;Model-&gt;Presenter-&gt;Activity-&gt;Module-&gt;Component</span></span><br><span class="line"><span class="comment">  * 因为生成Activity时,Module和Component还没生成,但是Activity中有它们的引用,所以会报错,但是不用理会</span></span><br><span class="line"><span class="comment">  * 继续将Module和Component生成完后,编译一下项目再回到Activity,按提示修改一个方法名即可</span></span><br><span class="line"><span class="comment">  * 如果想生成Fragment的相关文件,则将上面构建顺序中的Activity换为Fragment,并将Component中inject方法的参数改为此Fragment</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"></span><br><span class="line">#parse(<span class="string">&quot;File Header.java&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@ActivityScope</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$</span>&#123;NAME&#125;Model <span class="keyword">extends</span> <span class="title class_">BaseModel</span> <span class="keyword">implements</span> <span class="title class_">$</span>&#123;NAME&#125;Contract.Model&#123;</span><br><span class="line">    <span class="keyword">private</span> Gson mGson;</span><br><span class="line">    <span class="keyword">private</span> Application mApplication;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Inject</span></span><br><span class="line">    <span class="keyword">public</span> $&#123;NAME&#125;Model(IRepositoryManager repositoryManager, Gson gson, Application application) &#123;</span><br><span class="line">        <span class="built_in">super</span>(repositoryManager);</span><br><span class="line">        <span class="built_in">this</span>.mGson = gson;</span><br><span class="line">        <span class="built_in">this</span>.mApplication = application;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDestroy</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onDestroy();</span><br><span class="line">        <span class="built_in">this</span>.mGson = <span class="literal">null</span>;</span><br><span class="line">        <span class="built_in">this</span>.mApplication = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="ArmsModule"><a href="#ArmsModule" class="headerlink" title="ArmsModule"></a>ArmsModule</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> ($&#123;PACKAGE_NAME&#125; &amp;&amp; $&#123;PACKAGE_NAME&#125; != <span class="string">&quot;&quot;</span>)<span class="keyword">package</span> $&#123;PACKAGE_NAME&#125;;#end</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.google.gson.Gson;</span><br><span class="line"><span class="keyword">import</span> android.app.Application;</span><br><span class="line"><span class="keyword">import</span> com.jess.arms.di.scope.ActivityScope;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> dagger.Module;</span><br><span class="line"><span class="keyword">import</span> dagger.Provides;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 通过Template生成对应页面的MVP和Dagger代码,请注意输入框中输入的名字必须相同</span></span><br><span class="line"><span class="comment">  * 由于每个项目包结构都不一定相同,所以每生成一个文件需要自己导入import包名,可以在设置中设置自动导入包名</span></span><br><span class="line"><span class="comment">  * 请在对应包下按以下顺序生成对应代码,Contract-&gt;Model-&gt;Presenter-&gt;Activity-&gt;Module-&gt;Component</span></span><br><span class="line"><span class="comment">  * 因为生成Activity时,Module和Component还没生成,但是Activity中有它们的引用,所以会报错,但是不用理会</span></span><br><span class="line"><span class="comment">  * 继续将Module和Component生成完后,编译一下项目再回到Activity,按提示修改一个方法名即可</span></span><br><span class="line"><span class="comment">  * 如果想生成Fragment的相关文件,则将上面构建顺序中的Activity换为Fragment,并将Component中inject方法的参数改为此Fragment</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"></span><br><span class="line">#parse(<span class="string">&quot;File Header.java&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@Module</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$</span>&#123;NAME&#125;Module &#123;</span><br><span class="line">    <span class="keyword">private</span> $&#123;NAME&#125;Contract.View view;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 构建$&#123;NAME&#125;Module时,将View的实现类传进来,这样就可以提供View的实现类给presenter</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> view</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> $&#123;NAME&#125;Module($&#123;NAME&#125;Contract.View view) &#123;</span><br><span class="line">        <span class="built_in">this</span>.view = view;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ActivityScope</span></span><br><span class="line">    <span class="meta">@Provides</span></span><br><span class="line">    $&#123;NAME&#125;Contract.View provide$&#123;NAME&#125;View()&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.view;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ActivityScope</span></span><br><span class="line">    <span class="meta">@Provides</span></span><br><span class="line">    $&#123;NAME&#125;Contract.Model provide$&#123;NAME&#125;Model($&#123;NAME&#125;Model model)&#123;</span><br><span class="line">        <span class="keyword">return</span> model;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="ArmsPresenter"><a href="#ArmsPresenter" class="headerlink" title="ArmsPresenter"></a>ArmsPresenter</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> ($&#123;PACKAGE_NAME&#125; &amp;&amp; $&#123;PACKAGE_NAME&#125; != <span class="string">&quot;&quot;</span>)<span class="keyword">package</span> $&#123;PACKAGE_NAME&#125;;#end</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.app.Application;</span><br><span class="line"><span class="keyword">import</span> com.jess.arms.integration.AppManager;</span><br><span class="line"><span class="keyword">import</span> com.jess.arms.di.scope.ActivityScope;</span><br><span class="line"><span class="keyword">import</span> com.jess.arms.mvp.BasePresenter;</span><br><span class="line"><span class="keyword">import</span> com.jess.arms.http.imageloader.ImageLoader;</span><br><span class="line"><span class="keyword">import</span> me.jessyan.rxerrorhandler.core.RxErrorHandler;</span><br><span class="line"><span class="keyword">import</span> javax.inject.Inject;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 通过Template生成对应页面的MVP和Dagger代码,请注意输入框中输入的名字必须相同</span></span><br><span class="line"><span class="comment">  * 由于每个项目包结构都不一定相同,所以每生成一个文件需要自己导入import包名,可以在设置中设置自动导入包名</span></span><br><span class="line"><span class="comment">  * 请在对应包下按以下顺序生成对应代码,Contract-&gt;Model-&gt;Presenter-&gt;Activity-&gt;Module-&gt;Component</span></span><br><span class="line"><span class="comment">  * 因为生成Activity时,Module和Component还没生成,但是Activity中有它们的引用,所以会报错,但是不用理会</span></span><br><span class="line"><span class="comment">  * 继续将Module和Component生成完后,编译一下项目再回到Activity,按提示修改一个方法名即可</span></span><br><span class="line"><span class="comment">  * 如果想生成Fragment的相关文件,则将上面构建顺序中的Activity换为Fragment,并将Component中inject方法的参数改为此Fragment</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#parse(<span class="string">&quot;File Header.java&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@ActivityScope</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$</span>&#123;NAME&#125;Presenter <span class="keyword">extends</span> <span class="title class_">BasePresenter</span>&lt;$&#123;NAME&#125;Contract.Model, $&#123;NAME&#125;Contract.View&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> RxErrorHandler mErrorHandler;</span><br><span class="line">    <span class="keyword">private</span> Application mApplication;</span><br><span class="line">    <span class="keyword">private</span> ImageLoader mImageLoader;</span><br><span class="line">    <span class="keyword">private</span> AppManager mAppManager;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Inject</span></span><br><span class="line">    <span class="keyword">public</span> $&#123;NAME&#125;Presenter ($&#123;NAME&#125;Contract.Model model, $&#123;NAME&#125;Contract.View rootView</span><br><span class="line">            , RxErrorHandler handler, Application application</span><br><span class="line">            , ImageLoader imageLoader, AppManager appManager) &#123;</span><br><span class="line">        <span class="built_in">super</span>(model, rootView);</span><br><span class="line">        <span class="built_in">this</span>.mErrorHandler = handler;</span><br><span class="line">        <span class="built_in">this</span>.mApplication = application;</span><br><span class="line">        <span class="built_in">this</span>.mImageLoader = imageLoader;</span><br><span class="line">        <span class="built_in">this</span>.mAppManager = appManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDestroy</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onDestroy();</span><br><span class="line">        <span class="built_in">this</span>.mErrorHandler = <span class="literal">null</span>;</span><br><span class="line">        <span class="built_in">this</span>.mAppManager = <span class="literal">null</span>;</span><br><span class="line">        <span class="built_in">this</span>.mImageLoader = <span class="literal">null</span>;</span><br><span class="line">        <span class="built_in">this</span>.mApplication = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="升级版ArmsComponent"><a href="#升级版ArmsComponent" class="headerlink" title="升级版ArmsComponent"></a>升级版ArmsComponent</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> ($&#123;PACKAGE_NAME&#125; &amp;&amp; $&#123;PACKAGE_NAME&#125; != <span class="string">&quot;&quot;</span>)<span class="keyword">package</span> $&#123;PACKAGE_NAME&#125;;#end</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.jess.arms.di.component.AppComponent;</span><br><span class="line"><span class="keyword">import</span> com.jess.arms.di.scope.ActivityScope;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> dagger.BindsInstance;</span><br><span class="line"><span class="keyword">import</span> dagger.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 通过Template生成对应页面的MVP和Dagger代码,请注意输入框中输入的名字必须相同</span></span><br><span class="line"><span class="comment">  * 由于每个项目包结构都不一定相同,所以每生成一个文件需要自己导入import包名,可以在设置中设置自动导入包名</span></span><br><span class="line"><span class="comment">  * 请在对应包下按以下顺序生成对应代码,Contract-&gt;Model-&gt;Presenter-&gt;Activity-&gt;Module-&gt;Component</span></span><br><span class="line"><span class="comment">  * 因为生成Activity时,Module和Component还没生成,但是Activity中有它们的引用,所以会报错,但是不用理会</span></span><br><span class="line"><span class="comment">  * 继续将Module和Component生成完后,编译一下项目再回到Activity,按提示修改一个方法名即可</span></span><br><span class="line"><span class="comment">  * 如果想生成Fragment的相关文件,则将上面构建顺序中的Activity换为Fragment,并将Component中inject方法的参数改为此Fragment</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"></span><br><span class="line">#parse(<span class="string">&quot;File Header.java&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@ActivityScope</span></span><br><span class="line"><span class="meta">@Component(modules = $&#123;NAME&#125;Module.class,dependencies = AppComponent.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">$</span>&#123;NAME&#125;Component &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">inject</span><span class="params">($&#123;NAME&#125;Activity activity)</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Component</span>.Builder</span><br><span class="line">    <span class="keyword">interface</span> <span class="title class_">Builder</span> &#123;</span><br><span class="line">        <span class="meta">@BindsInstance</span></span><br><span class="line">        $&#123;NAME&#125;Component.Builder <span class="title function_">view</span><span class="params">($&#123;NAME&#125;Contract.View view)</span>;</span><br><span class="line">        $&#123;NAME&#125;Component.Builder <span class="title function_">appComponent</span><span class="params">(AppComponent appComponent)</span>;</span><br><span class="line">        $&#123;NAME&#125;Component <span class="title function_">build</span><span class="params">()</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="升级版ArmsModule"><a href="#升级版ArmsModule" class="headerlink" title="升级版ArmsModule"></a>升级版ArmsModule</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> ($&#123;PACKAGE_NAME&#125; &amp;&amp; $&#123;PACKAGE_NAME&#125; != <span class="string">&quot;&quot;</span>)<span class="keyword">package</span> $&#123;PACKAGE_NAME&#125;;#end</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.recyclerview.widget.LinearLayoutManager;</span><br><span class="line"><span class="keyword">import</span> androidx.recyclerview.widget.RecyclerView;</span><br><span class="line"><span class="keyword">import</span> dagger.Binds;</span><br><span class="line"><span class="keyword">import</span> dagger.Module;</span><br><span class="line"><span class="keyword">import</span> dagger.Provides;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.jess.arms.di.scope.ActivityScope;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 通过Template生成对应页面的MVP和Dagger代码,请注意输入框中输入的名字必须相同</span></span><br><span class="line"><span class="comment">  * 由于每个项目包结构都不一定相同,所以每生成一个文件需要自己导入import包名,可以在设置中设置自动导入包名</span></span><br><span class="line"><span class="comment">  * 请在对应包下按以下顺序生成对应代码,Contract-&gt;Model-&gt;Presenter-&gt;Activity-&gt;Module-&gt;Component</span></span><br><span class="line"><span class="comment">  * 因为生成Activity时,Module和Component还没生成,但是Activity中有它们的引用,所以会报错,但是不用理会</span></span><br><span class="line"><span class="comment">  * 继续将Module和Component生成完后,编译一下项目再回到Activity,按提示修改一个方法名即可</span></span><br><span class="line"><span class="comment">  * 如果想生成Fragment的相关文件,则将上面构建顺序中的Activity换为Fragment,并将Component中inject方法的参数改为此Fragment</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"></span><br><span class="line">#parse(<span class="string">&quot;File Header.java&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@Module</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">$</span>&#123;NAME&#125;Module &#123;</span><br><span class="line">    <span class="comment">//记得provides的方法要用static</span></span><br><span class="line">    <span class="comment">/*@ActivityScope</span></span><br><span class="line"><span class="comment">    @Provides</span></span><br><span class="line"><span class="comment">    static RxPermissions provideRxPermissions($&#123;NAME&#125;Contract.View view) &#123;</span></span><br><span class="line"><span class="comment">        return new RxPermissions((FragmentActivity) view.getActivity());</span></span><br><span class="line"><span class="comment">    &#125;*/</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@ActivityScope</span></span><br><span class="line">    <span class="meta">@Provides</span></span><br><span class="line">    <span class="keyword">static</span> RecyclerView.LayoutManager <span class="title function_">provideLayoutManager</span><span class="params">($&#123;NAME&#125;Contract.View view)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">LinearLayoutManager</span>(view.getActivity());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@ActivityScope</span></span><br><span class="line">    <span class="meta">@Provides</span></span><br><span class="line">    <span class="keyword">static</span> List&lt;$&#123;NAME&#125;Bean&gt; provideList()&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@ActivityScope</span></span><br><span class="line">    <span class="meta">@Provides</span></span><br><span class="line">    <span class="keyword">static</span> $&#123;NAME&#125;Adapter <span class="title function_">provideAdapter</span><span class="params">(List&lt;$&#123;NAME&#125;Bean&gt; list, $&#123;NAME&#125;Contract.View view)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">$</span>&#123;NAME&#125;Adapter(list, view.getActivity());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Binds</span></span><br><span class="line">    <span class="keyword">abstract</span> $&#123;NAME&#125;Contract.Model provide$&#123;NAME&#125;Model($&#123;NAME&#125;Model model);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="升级版ArmsActivity"><a href="#升级版ArmsActivity" class="headerlink" title="升级版ArmsActivity"></a>升级版ArmsActivity</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> ($&#123;PACKAGE_NAME&#125; &amp;&amp; $&#123;PACKAGE_NAME&#125; != <span class="string">&quot;&quot;</span>)<span class="keyword">package</span> $&#123;PACKAGE_NAME&#125;;#end</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.app.Activity;</span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.NonNull;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.jess.arms.base.BaseActivity;</span><br><span class="line"><span class="keyword">import</span> com.jess.arms.base.DefaultAdapter;</span><br><span class="line"><span class="keyword">import</span> com.jess.arms.di.component.AppComponent;</span><br><span class="line"><span class="keyword">import</span> com.jess.arms.utils.ArmsUtils;</span><br><span class="line"><span class="keyword">import</span> com.paginate.Paginate;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.inject.Inject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.recyclerview.widget.RecyclerView;</span><br><span class="line"><span class="keyword">import</span> androidx.swiperefreshlayout.widget.SwipeRefreshLayout;</span><br><span class="line"><span class="keyword">import</span> butterknife.BindView;</span><br><span class="line"><span class="keyword">import</span> timber.log.Timber;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> com.jess.arms.utils.Preconditions.checkNotNull;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 通过Template生成对应页面的MVP和Dagger代码,请注意输入框中输入的名字必须相同</span></span><br><span class="line"><span class="comment">  * 由于每个项目包结构都不一定相同,所以每生成一个文件需要自己导入import包名,可以在设置中设置自动导入包名</span></span><br><span class="line"><span class="comment">  * 请在对应包下按以下顺序生成对应代码,Contract-&gt;Model-&gt;Presenter-&gt;Activity-&gt;Module-&gt;Component</span></span><br><span class="line"><span class="comment">  * 因为生成Activity时,Module和Component还没生成,但是Activity中有它们的引用,所以会报错,但是不用理会</span></span><br><span class="line"><span class="comment">  * 继续将Module和Component生成完后,编译一下项目再回到Activity,按提示修改一个方法名即可</span></span><br><span class="line"><span class="comment">  * 如果想生成Fragment的相关文件,则将上面构建顺序中的Activity换为Fragment,并将Component中inject方法的参数改为此Fragment</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"></span><br><span class="line">#parse(<span class="string">&quot;File Header.java&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$</span>&#123;NAME&#125;Activity <span class="keyword">extends</span> <span class="title class_">BaseActivity</span>&lt;$&#123;NAME&#125;Presenter&gt; <span class="keyword">implements</span> <span class="title class_">$</span>&#123;NAME&#125;Contract.View,</span><br><span class="line">    SwipeRefreshLayout.OnRefreshListener &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@BindView(R.id.recyclerView)</span></span><br><span class="line">    RecyclerView               mRecyclerView;</span><br><span class="line">    <span class="meta">@BindView(R.id.swipeRefreshLayout)</span></span><br><span class="line">    SwipeRefreshLayout         mSwipeRefreshLayout;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Inject</span></span><br><span class="line">    RecyclerView.LayoutManager mLayoutManager;</span><br><span class="line">    <span class="meta">@Inject</span></span><br><span class="line">    SimplePaddingDecoration simplePaddingDecoration;</span><br><span class="line">    <span class="meta">@Inject</span></span><br><span class="line">    $&#123;NAME&#125;Adapter mAdapter;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> Paginate mPaginate;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span>  isLoadingMore;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setupActivityComponent</span><span class="params">(AppComponent appComponent)</span> &#123;</span><br><span class="line">        Dagger$&#123;NAME&#125;Component</span><br><span class="line">                .builder()</span><br><span class="line">                .appComponent(appComponent)</span><br><span class="line">                .view(<span class="built_in">this</span>)</span><br><span class="line">                .build()</span><br><span class="line">                .inject(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">initView</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="comment">//todo:如果你不需要框架帮你设置 </span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initData</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        setToolbar();</span><br><span class="line">        initRecyclerView();</span><br><span class="line">        mRecyclerView.addItemDecoration(simplePaddingDecoration);</span><br><span class="line">        mRecyclerView.setAdapter(mAdapter);</span><br><span class="line">        initPaginate();</span><br><span class="line">        setClickListener();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">setClickListener</span><span class="params">()</span> &#123;</span><br><span class="line">        mAdapter.setOnItemClickListener(((adapter, view, position) -&gt; &#123;</span><br><span class="line">            <span class="comment">// <span class="doctag">TODO:</span> 2020/6/3 传参</span></span><br><span class="line">            <span class="comment">//launchActivity(intent);</span></span><br><span class="line">        &#125;));</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">setToolbar</span><span class="params">()</span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initPaginate</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (mPaginate == <span class="literal">null</span>) &#123;</span><br><span class="line">            Paginate.<span class="type">Callbacks</span> <span class="variable">callbacks</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Paginate</span>.Callbacks() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onLoadMore</span><span class="params">()</span> &#123;</span><br><span class="line">                    mPresenter.request$&#123;NAME&#125;sFromModel(<span class="literal">false</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isLoading</span><span class="params">()</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span> isLoadingMore;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasLoadedAllItems</span><span class="params">()</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">            mPaginate = Paginate.with(mRecyclerView, callbacks)</span><br><span class="line">                    .setLoadingTriggerThreshold(<span class="number">0</span>)</span><br><span class="line">                    .build();</span><br><span class="line">            mPaginate.setHasMoreDataToLoad(<span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initRecyclerView</span><span class="params">()</span>&#123;</span><br><span class="line">        mSwipeRefreshLayout.setOnRefreshListener(<span class="built_in">this</span>);</span><br><span class="line">        ArmsUtils.configRecyclerView(mRecyclerView, mLayoutManager);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showLoading</span><span class="params">()</span> &#123;</span><br><span class="line">        Timber.tag(TAG).w(<span class="string">&quot;showLoading&quot;</span>);</span><br><span class="line">        mSwipeRefreshLayout.setRefreshing(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hideLoading</span><span class="params">()</span> &#123;</span><br><span class="line">        Timber.tag(TAG).w(<span class="string">&quot;hideLoading&quot;</span>);</span><br><span class="line">        mSwipeRefreshLayout.setRefreshing(<span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showMessage</span><span class="params">(<span class="meta">@NonNull</span> String message)</span> &#123;</span><br><span class="line">        checkNotNull(message);</span><br><span class="line">        ArmsUtils.snackbarText(message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">launchActivity</span><span class="params">(<span class="meta">@NonNull</span> Intent intent)</span> &#123;</span><br><span class="line">        checkNotNull(intent);</span><br><span class="line">        ArmsUtils.startActivity(intent);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">killMyself</span><span class="params">()</span> &#123;</span><br><span class="line">        finish();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Activity <span class="title function_">getActivity</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">startLoadMore</span><span class="params">()</span> &#123;</span><br><span class="line">        isLoadingMore = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">endLoadMore</span><span class="params">()</span> &#123;</span><br><span class="line">        isLoadingMore = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onRefresh</span><span class="params">()</span> &#123;</span><br><span class="line">        mPresenter.request$&#123;NAME&#125;sFromModel(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onDestroy</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//super.onDestroy()之后会unbind,所有view被置为null,所以必须在之前调用</span></span><br><span class="line">        DefaultAdapter.releaseAllHolder(mRecyclerView);</span><br><span class="line">        <span class="built_in">super</span>.onDestroy();</span><br><span class="line">        <span class="built_in">this</span>.mPaginate = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h3 id="xml类型"><a href="#xml类型" class="headerlink" title="xml类型"></a>xml类型</h3><h4 id="mvp-的-activity-layoutname"><a href="#mvp-的-activity-layoutname" class="headerlink" title="mvp 的 activity_${layoutname}"></a>mvp 的 <code>activity_$&#123;layoutname&#125;</code></h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">android.support.constraint.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">com.scwang.smartrefresh.layout.SmartRefreshLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/$&#123;layoutname&#125;_srl&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">android.support.v7.widget.RecyclerView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/$&#123;layoutname&#125;_rv&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;@dimen/dp_10&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;@dimen/dp_10&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">com.scwang.smartrefresh.layout.SmartRefreshLayout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.constraint.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="LdyFragment的布局文件-fragment-layoutname"><a href="#LdyFragment的布局文件-fragment-layoutname" class="headerlink" title="LdyFragment的布局文件 fragment_${layoutname}"></a>LdyFragment的布局文件 <code>fragment_$&#123;layoutname&#125;</code></h4><p>fragment带多个子fragment</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--fragment带多个子fragment的布局--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.TabLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:tabTextAppearance</span>=<span class="string">&quot;@android:style/TextAppearance.Widget.TabWidget&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/$&#123;layoutname&#125;_tl&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:tabBackground</span>=<span class="string">&quot;@android:color/white&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:tabIndicatorColor</span>=<span class="string">&quot;@color/main_color&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:tabSelectedTextColor</span>=<span class="string">&quot;@color/main_color&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:tabTextColor</span>=<span class="string">&quot;@color/dark_text_color&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=<span class="string">&quot;@style/ViewBoldSolidLine&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">com.u1city.androidframe.customView.NoScrollViewPager</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/$&#123;layoutname&#125;_vp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>





<h1 id="AS自己写模板"><a href="#AS自己写模板" class="headerlink" title="AS自己写模板"></a>AS自己写模板</h1><p>（在AS 4.0以下可用）</p>
<p>AS安装插件 <code>TemplateBuilder</code></p>
<h2 id="module级模板"><a href="#module级模板" class="headerlink" title="module级模板"></a>module级模板</h2><ul>
<li><p>Windows 路径：<code>D:\Android\AS3.6.2\plugins\android\lib\templates\gradle-projects\NewArmsModule</code></p>
</li>
<li><p>Mac 路径：</p>
<p><code>/Applications/Android\ Studio.app/Contents/plugins/android/lib/templates/gradle-projects/NewAndroidProject</code></p>
</li>
</ul>
<h2 id="Activity级模板"><a href="#Activity级模板" class="headerlink" title="Activity级模板"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/u010987039/article/details/80002962">Activity级模板</a></h2><ul>
<li><p>Windows路径：<code>D:\Android\AS3.6.2\plugins\android\lib\templates\activities\MVPArmsTemplat</code></p>
</li>
<li><p>Windows 路径：</p>
<p><code>D:\Android\AndroidStudio\plugins\android\lib\templates\activities\U1LdyMvpActivity</code></p>
</li>
<li><p>Mac 路径：</p>
<p><code>/Applications/Android\ Studio.app/Contents/plugins/android/lib/templates/activities/U1LdyMvpActivity</code></p>
</li>
</ul>
<h3 id="定义模板"><a href="#定义模板" class="headerlink" title="定义模板"></a>定义模板</h3><p>首先创建一个MVP的Activity，将动态的属性声明为变量。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> $&#123;packageName&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> com.blackbox.medicalpension.common.mvp.base.BaseCommonActivity;</span><br><span class="line"><span class="keyword">import</span> com.blackbox.medicalpension.common.mvp.mvp.BasePresenter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.jetbrains.annotations.Nullable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$</span>&#123;activityClass&#125; <span class="keyword">extends</span> <span class="title class_">BaseCommonActivity</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.$&#123;layoutName&#125;);</span><br><span class="line">        initTitleWithBack(<span class="string">&quot;$&#123;titleName&#125;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;BasePresenter&lt;?&gt;&gt; createPresenter() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>创建对应的Layout布局文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">android.support.constraint.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;@color/white&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/include_layout&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">layout</span>=<span class="string">&quot;@layout/lin_title&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintLeft_toLeftOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintRight_toRightOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.constraint.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="生成模板"><a href="#生成模板" class="headerlink" title="生成模板"></a>生成模板</h3><p>选中两个模板文件，点击【ALT + T】，弹出【Configure Template Data】窗口。定义activityClass、layoutName、titleName三个变量，并【Finish】，生成模板。</p>
<p><img src="/posts/8f94baaa/AS%E7%94%9F%E6%88%90%E6%A8%A1%E6%9D%BF.jpg" alt="AS生成模板.png"></p>
<p>模板文件存放在…\Android Studio\plugins\android\lib\templates下</p>
<p><strong>属性说明：</strong></p>
<ul>
<li>Template Category 对应模板的分类，对应选择导入模板时的模板分类，这里默认值是电脑的用户名。</li>
<li>Template Name 对应模板名称，对应选择导入模板时的模板名称，默认值是当前的Project名称。</li>
<li>Template Description 对应模板描述信息，对应导入模板时弹出的导入界面的文字描述，默认为空。</li>
<li>Template Folder 对应生成模板所存放的位置，如果是Mac操作系统则默认为&#x2F;Applications&#x2F;Android Studio.app&#x2F;Contents&#x2F;plugins&#x2F;android&#x2F;lib&#x2F;templates， Windows系统的话由于差异比较大，就默认为空了，可以自行配置[Android Studio安装目录]&#x2F;plugins&#x2F;android&#x2F;lib&#x2F;templates（这里只需要配置一次即可，插件将自动保存该位置）。</li>
<li>Input data 配置模板变量<br>在【Configure Template Data】下点击【add】配置刚才模板中定义的变量，配置完毕后点击【Finish】。</li>
</ul>
<p><img src="/posts/8f94baaa/AS%E7%94%9F%E6%88%90%E6%A8%A1%E6%9D%BF-%E9%85%8D%E7%BD%AE%E5%8F%98%E9%87%8F.jpg" alt="AS生成模板-配置变量.png"></p>
<p>重启Studio后就可使用该自定义模板。</p>
<p><strong>关于Input data的使用，先解释下每个属性对应的含义</strong></p>
<ul>
<li>id 变量名，必须和模板中使用的变量名对应，必填</li>
<li>name 变量简介，必填</li>
<li>type 变量类型，string和boolean两种，通过下拉框选择，必填</li>
<li>default 变量对应的默认值，选填</li>
<li>help 添加该变量时的提示信息，选填</li>
</ul>
<p>模板文件后缀名都是以【.ftl】结尾。</p>
<p>globals.xml.ftl 全局变量文件 存放的是一些全局变量<br>recipe.xml.ftl 配置要引用的模板路径以及生成文件的路径<br>template.xml 模板的配置信息,以及要输入的参数.定义了模板的流程框架 基本结构<br>template_blank_activity.png 显示的缩略图（只是展示用）<br>LinActivity.java.ftl Activity模板文件</p>
<h4 id="修改template-xml文件"><a href="#修改template-xml文件" class="headerlink" title="修改template.xml文件"></a>修改template.xml文件</h4><p>为方便用户输入Activity名称或Layout名称，<strong>自动提示Layout或Activity名称</strong>，需要在文件中添加两个属性：<br>constraints&#x3D;”class|unique|nonempty”<br>suggest&#x3D;”${layoutToActivity(layoutName)}”<br>suggest&#x3D;”${activityToLayout(activityClass)}”</p>
<h4 id="修改AndroidManifest-xml文件"><a href="#修改AndroidManifest-xml文件" class="headerlink" title="修改AndroidManifest.xml文件"></a>修改AndroidManifest.xml文件</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">package</span>=<span class="string">&quot;$&#123;packageName&#125;&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">application</span>&gt;</span></span><br><span class="line">    &lt;#if isNewModule&gt;</span><br><span class="line">	    <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;$&#123;ativityPackageName&#125;.$&#123;activityClass&#125;&quot;</span>&gt;</span></span><br><span class="line">	        <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">	            <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.action.MAIN&quot;</span> /&gt;</span></span><br><span class="line">	            <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.category.LAUNCHER&quot;</span> /&gt;</span></span><br><span class="line">	        <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br><span class="line">	&lt;#else&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;$&#123;packageName&#125;.$&#123;activityClass&#125;&quot;</span> /&gt;</span></span><br><span class="line">    &lt;/#if&gt;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="增加Kotlin模板"><a href="#增加Kotlin模板" class="headerlink" title="增加Kotlin模板"></a>增加Kotlin模板</h4><h1 id="AS4-1上写模板【新方式】"><a href="#AS4-1上写模板【新方式】" class="headerlink" title="AS4.1上写模板【新方式】"></a>AS4.1上写模板【新方式】</h1><p>（AS4.+以上可用。在AS 2020.3.1【这个得改】上用不了）</p>
<p><a target="_blank" rel="noopener" href="https://www.bigademo.com/2021/01/20/AndroidStudio%204.1%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A8%A1/index.html">参考链接1-写给bigademo框架的MVVM</a></p>
<p><a target="_blank" rel="noopener" href="http://tommwq.tech/blog/2021/02/28/312">参考链接2-</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/telyo/android-studio-template">别人写给MVPArms的模板</a></p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/shen_bh/xm597-template">本文源码</a></p>
<h2 id="步骤："><a href="#步骤：" class="headerlink" title="步骤："></a>步骤：</h2><ol>
<li><p>打开<a target="_blank" rel="noopener" href="https://github.com/JetBrains/intellij-platform-plugin-template%EF%BC%8C%E7%82%B9%E5%87%BB%E7%BB%BF%E8%89%B2%E6%8C%89%E9%92%AE%E2%80%9CUse">https://github.com/JetBrains/intellij-platform-plugin-template，点击绿色按钮“Use</a> this template”就会fork一份代码到你自己的仓库。然后通过git工具clone到电脑上，用AS4.1+打开</p>
</li>
<li><p>修改包名、修改<code>MyProjectManagerListener.kt</code>、修改<code>build.gradle.kts</code>、修改<code>gradle.properties</code></p>
</li>
<li><p>在<code>src/main/kotlin/</code>下新增个文件夹<code>other</code>，用来放自己写的具体模板</p>
</li>
<li><p>还要在<code>src/main/resources/META-INF/plugin.xml</code>中添加以下内容，才能让自己写的具体模板内容生效</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">extensions</span> <span class="attr">defaultExtensionNs</span>=<span class="string">&quot;com.android.tools.idea.wizard.template&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--        &lt;wizardTemplateProvider implementation=&quot;other.temparms.ArmsPluginTemplateProviderImpl&quot; /&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--        &lt;wizardTemplateProvider implementation=&quot;other.xm597.Xm597PluginTemplateProviderImpl&quot; /&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">wizardTemplateProvider</span> <span class="attr">implementation</span>=<span class="string">&quot;other.mvvm.SamplePluginTemplateProviderImpl&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">extensions</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在Terminal上输入 <code>gradlew buildPlugin</code>来生成模板jar文件（在项目的<code>build/libs</code>下）</p>
</li>
<li><p>AS导入模板（<code>File》Settings》Plugins》Install Plugin from Disk...</code>）</p>
</li>
</ol>
<h2 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h2><ol>
<li><p><code>gradle-wrapper.properties</code>中gradle版本与<code>build.gradle.kts</code>中配置的版本是对应的</p>
</li>
<li><p><code>gradle.properties</code>中<code>platformVersion</code>的值为<code>2020.2.4</code>在<code>AS4.1.2</code>和<code>AS4.1.3</code>上无法正常编译模板，需要在<code>AS4.2-Beta5</code>上才行。所以在<code>AS4.1.2</code>上这个值改成了<code>2020.1.4</code></p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">pluginVerifierIdeVersions</span> =  <span class="number">2020</span>.<span class="number">1</span>.<span class="number">4</span> , <span class="number">2020</span>.<span class="number">2</span>.<span class="number">4</span>, <span class="number">2020</span>.<span class="number">3</span>.<span class="number">2</span>, <span class="number">2021</span>.<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">platformType</span> = IC</span><br><span class="line"><span class="attribute">platformVersion</span> = <span class="number">2020</span>.<span class="number">1</span>.<span class="number">4</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="代码结构截图"><a href="#代码结构截图" class="headerlink" title="代码结构截图"></a>代码结构截图</h2><p><img src="/posts/8f94baaa/AS4%E4%BB%A5%E4%B8%8A%E5%86%99%E6%A8%A1%E6%9D%BF.png" alt="AS4.1以上写模板"></p>
<h2 id="完整代码（动过的）："><a href="#完整代码（动过的）：" class="headerlink" title="完整代码（动过的）："></a>完整代码（动过的）：</h2><h3 id="配置相关"><a href="#配置相关" class="headerlink" title="配置相关"></a>配置相关</h3><p><code>src/main/kotlin/com/xml597/app/template/listeners/MyProjectManagerListener.kt</code></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xm597.app.template.listeners</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.intellij.openapi.project.Project</span><br><span class="line"><span class="keyword">import</span> com.intellij.openapi.project.ProjectManagerListener</span><br><span class="line"><span class="keyword">import</span> com.xm597.app.template.services.MyProjectService</span><br><span class="line"></span><br><span class="line"><span class="keyword">internal</span> <span class="class"><span class="keyword">class</span> <span class="title">MyProjectManagerListener</span> : <span class="type">ProjectManagerListener &#123;</span></span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">projectOpened</span><span class="params">(project: <span class="type">Project</span>)</span></span> &#123;</span><br><span class="line">        projectInstance = project</span><br><span class="line">        project.getService(MyProjectService::<span class="keyword">class</span>.java)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">projectClosing</span><span class="params">(project: <span class="type">Project</span>)</span></span> &#123;</span><br><span class="line">        projectInstance = <span class="literal">null</span></span><br><span class="line">        <span class="keyword">super</span>.projectClosing(project)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">companion</span> <span class="keyword">object</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> projectInstance: Project? = <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>build.gradle.kts</code></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.gitlab.arturbosch.detekt.Detekt</span><br><span class="line"><span class="keyword">import</span> org.jetbrains.changelog.closure</span><br><span class="line"><span class="keyword">import</span> org.jetbrains.changelog.markdownToHTML</span><br><span class="line"><span class="keyword">import</span> org.jetbrains.kotlin.gradle.tasks.KotlinCompile</span><br><span class="line"></span><br><span class="line">plugins &#123;</span><br><span class="line">    <span class="comment">// Java support</span></span><br><span class="line">    id(<span class="string">&quot;java&quot;</span>)</span><br><span class="line">    <span class="comment">// Kotlin support</span></span><br><span class="line">    id(<span class="string">&quot;org.jetbrains.kotlin.jvm&quot;</span>) version <span class="string">&quot;1.4.30&quot;</span></span><br><span class="line">    <span class="comment">// gradle-intellij-plugin - read more: https://github.com/JetBrains/gradle-intellij-plugin</span></span><br><span class="line">    id(<span class="string">&quot;org.jetbrains.intellij&quot;</span>) version <span class="string">&quot;0.6.5&quot;</span></span><br><span class="line">    <span class="comment">// gradle-changelog-plugin - read more: https://github.com/JetBrains/gradle-changelog-plugin</span></span><br><span class="line">    id(<span class="string">&quot;org.jetbrains.changelog&quot;</span>) version <span class="string">&quot;1.1.2&quot;</span></span><br><span class="line">    <span class="comment">// detekt linter - read more: https://detekt.github.io/detekt/gradle.html</span></span><br><span class="line">    id(<span class="string">&quot;io.gitlab.arturbosch.detekt&quot;</span>) version <span class="string">&quot;1.15.0&quot;</span></span><br><span class="line">    <span class="comment">// ktlint linter - read more: https://github.com/JLLeitschuh/ktlint-gradle</span></span><br><span class="line">    id(<span class="string">&quot;org.jlleitschuh.gradle.ktlint&quot;</span>) version <span class="string">&quot;10.0.0&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Import variables from gradle.properties file</span></span><br><span class="line"><span class="keyword">val</span> pluginGroup: String <span class="keyword">by</span> project</span><br><span class="line"><span class="comment">// `pluginName_` variable ends with `_` because of the collision with Kotlin magic getter in the `intellij` closure.</span></span><br><span class="line"><span class="comment">// Read more about the issue: https://github.com/JetBrains/intellij-platform-plugin-template/issues/29</span></span><br><span class="line"><span class="keyword">val</span> pluginName_: String <span class="keyword">by</span> project</span><br><span class="line"><span class="keyword">val</span> pluginVersion: String <span class="keyword">by</span> project</span><br><span class="line"><span class="keyword">val</span> pluginSinceBuild: String <span class="keyword">by</span> project</span><br><span class="line"><span class="keyword">val</span> pluginUntilBuild: String <span class="keyword">by</span> project</span><br><span class="line"><span class="keyword">val</span> pluginVerifierIdeVersions: String <span class="keyword">by</span> project</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> platformType: String <span class="keyword">by</span> project</span><br><span class="line"><span class="keyword">val</span> platformVersion: String <span class="keyword">by</span> project</span><br><span class="line"><span class="keyword">val</span> platformPlugins: String <span class="keyword">by</span> project</span><br><span class="line"><span class="keyword">val</span> platformDownloadSources: String <span class="keyword">by</span> project</span><br><span class="line"></span><br><span class="line">group = pluginGroup</span><br><span class="line">version = pluginVersion</span><br><span class="line"></span><br><span class="line"><span class="comment">// Configure project&#x27;s dependencies</span></span><br><span class="line">repositories &#123;</span><br><span class="line">    mavenCentral()</span><br><span class="line">    jcenter()</span><br><span class="line">    google()</span><br><span class="line">&#125;</span><br><span class="line">dependencies &#123;</span><br><span class="line">    detektPlugins(<span class="string">&quot;io.gitlab.arturbosch.detekt:detekt-formatting:1.15.0&quot;</span>)</span><br><span class="line">    compileOnly(files(<span class="string">&quot;lib/wizard-template.jar&quot;</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Configure gradle-intellij-plugin plugin.</span></span><br><span class="line"><span class="comment">// Read more: https://github.com/JetBrains/gradle-intellij-plugin</span></span><br><span class="line">intellij &#123;</span><br><span class="line">    pluginName = pluginName_</span><br><span class="line">    version = platformVersion</span><br><span class="line">    type = platformType</span><br><span class="line">    downloadSources = platformDownloadSources.toBoolean()</span><br><span class="line">    updateSinceUntilBuild = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Plugin Dependencies. Uses `platformPlugins` property from the gradle.properties file.</span></span><br><span class="line">    setPlugins(*platformPlugins.split(<span class="string">&#x27;,&#x27;</span>).map(String::trim).filter(String::isNotEmpty).toTypedArray())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Configure gradle-changelog-plugin plugin.</span></span><br><span class="line"><span class="comment">// Read more: https://github.com/JetBrains/gradle-changelog-plugin</span></span><br><span class="line">changelog &#123;</span><br><span class="line">    version = pluginVersion</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Configure detekt plugin.</span></span><br><span class="line"><span class="comment">// Read more: https://detekt.github.io/detekt/kotlindsl.html</span></span><br><span class="line">detekt &#123;</span><br><span class="line">    config = files(<span class="string">&quot;./detekt-config.yml&quot;</span>)</span><br><span class="line">    buildUponDefaultConfig = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    reports &#123;</span><br><span class="line">        html.enabled = <span class="literal">false</span></span><br><span class="line">        xml.enabled = <span class="literal">false</span></span><br><span class="line">        txt.enabled = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tasks &#123;</span><br><span class="line">    <span class="comment">// Set the compatibility versions to 1.8</span></span><br><span class="line">    withType&lt;JavaCompile&gt; &#123;</span><br><span class="line">        sourceCompatibility = <span class="string">&quot;1.8&quot;</span></span><br><span class="line">        targetCompatibility = <span class="string">&quot;1.8&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    withType&lt;KotlinCompile&gt; &#123;</span><br><span class="line">        kotlinOptions.jvmTarget = <span class="string">&quot;1.8&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    withType&lt;Detekt&gt; &#123;</span><br><span class="line">        jvmTarget = <span class="string">&quot;1.8&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    patchPluginXml &#123;</span><br><span class="line">        version(pluginVersion)</span><br><span class="line">        sinceBuild(pluginSinceBuild)</span><br><span class="line">        untilBuild(pluginUntilBuild)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Extract the &lt;!-- Plugin description --&gt; section from README.md and provide for the plugin&#x27;s manifest</span></span><br><span class="line">        pluginDescription(</span><br><span class="line">            closure &#123;</span><br><span class="line">                File(<span class="string">&quot;./README.md&quot;</span>).readText().lines().run &#123;</span><br><span class="line">                    <span class="keyword">val</span> start = <span class="string">&quot;&lt;!-- Plugin description --&gt;&quot;</span></span><br><span class="line">                    <span class="keyword">val</span> end = <span class="string">&quot;&lt;!-- Plugin description end --&gt;&quot;</span></span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (!containsAll(listOf(start, end))) &#123;</span><br><span class="line">                        <span class="keyword">throw</span> GradleException(<span class="string">&quot;Plugin description section not found in README.md:\n<span class="variable">$start</span> ... <span class="variable">$end</span>&quot;</span>)</span><br><span class="line">                    &#125;</span><br><span class="line">                    subList(indexOf(start) + <span class="number">1</span>, indexOf(end))</span><br><span class="line">                &#125;.joinToString(<span class="string">&quot;\n&quot;</span>).run &#123; markdownToHTML(<span class="keyword">this</span>) &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Get the latest available change notes from the changelog file</span></span><br><span class="line">        changeNotes(</span><br><span class="line">            closure &#123;</span><br><span class="line">                changelog.getLatest().toHTML()</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    runPluginVerifier &#123;</span><br><span class="line">        ideVersions(pluginVerifierIdeVersions)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    publishPlugin &#123;</span><br><span class="line">        dependsOn(<span class="string">&quot;patchChangelog&quot;</span>)</span><br><span class="line">        token(System.getenv(<span class="string">&quot;PUBLISH_TOKEN&quot;</span>))</span><br><span class="line">        <span class="comment">// pluginVersion is based on the SemVer (https://semver.org) and supports pre-release labels, like 2.1.7-alpha.3</span></span><br><span class="line">        <span class="comment">// Specify pre-release label to publish the plugin in a custom Release Channel automatically. Read more:</span></span><br><span class="line">        <span class="comment">// https://plugins.jetbrains.com/docs/intellij/deployment.html#specifying-a-release-channel</span></span><br><span class="line">        channels(pluginVersion.split(<span class="string">&#x27;-&#x27;</span>).getOrElse(<span class="number">1</span>) &#123; <span class="string">&quot;default&quot;</span> &#125;.split(<span class="string">&#x27;.&#x27;</span>).first())</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>gradle.properties</code></p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># IntelliJ Platform Artifacts Repositories</span><br><span class="line"># -&gt; <span class="attr">https:</span><span class="comment">//plugins.jetbrains.com/docs/intellij/intellij-artifacts.html</span></span><br><span class="line"></span><br><span class="line">pluginGroup = com.xm597.qpp.template</span><br><span class="line">pluginName_ = xm597 Plugin Template</span><br><span class="line">pluginVersion = <span class="number">1.0</span><span class="number">.0</span></span><br><span class="line"></span><br><span class="line"># See <span class="attr">https:</span><span class="comment">//plugins.jetbrains.com/docs/intellij/build-number-ranges.html#intellij-platform-based-products-of-recent-ide-versions</span></span><br><span class="line"># <span class="keyword">for</span> insight into build numbers and IntelliJ Platform versions.</span><br><span class="line">pluginSinceBuild = <span class="number">201</span></span><br><span class="line">pluginUntilBuild = <span class="number">203.</span>*</span><br><span class="line"></span><br><span class="line"># Plugin Verifier integration -&gt; <span class="attr">https:</span><span class="comment">//github.com/JetBrains/gradle-intellij-plugin#plugin-verifier-dsl</span></span><br><span class="line"># See <span class="attr">https:</span><span class="comment">//jb.gg/intellij-platform-builds-list for available build versions</span></span><br><span class="line">pluginVerifierIdeVersions =  <span class="number">2020.1</span><span class="number">.4</span> , <span class="number">2020.2</span><span class="number">.4</span>, <span class="number">2020.3</span><span class="number">.2</span>, <span class="number">2021.1</span></span><br><span class="line"></span><br><span class="line">platformType = IC</span><br><span class="line">platformVersion = <span class="number">2020.1</span><span class="number">.4</span></span><br><span class="line">platformDownloadSources = <span class="literal">true</span></span><br><span class="line"># Plugin Dependencies -&gt; <span class="attr">https:</span><span class="comment">//plugins.jetbrains.com/docs/intellij/plugin-dependencies.html</span></span><br><span class="line"># <span class="attr">Example:</span> platformPlugins = com.intellij.java, com.jetbrains.<span class="attr">php:</span><span class="number">203.4449</span><span class="number">.22</span></span><br><span class="line">platformPlugins = java, com.intellij.java, org.jetbrains.android, android, org.jetbrains.kotlin</span><br><span class="line"></span><br><span class="line"># Opt-out flag <span class="keyword">for</span> bundling Kotlin standard library.</span><br><span class="line"># See <span class="attr">https:</span><span class="comment">//kotlinlang.org/docs/reference/using-gradle.html#dependency-on-the-standard-library for details.</span></span><br><span class="line">kotlin.stdlib.<span class="keyword">default</span>.dependency = <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<p><code>settings.gradle.kts</code></p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">rootProject.name</span> = <span class="string">&quot;xm597 Plugin Template&quot;</span></span><br></pre></td></tr></table></figure>

<p><code>src/main/resources/META-INF/plugin.xml</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">idea-plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>com.xm597.app<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>xm597 Plugin Template<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">vendo</span>&gt;</span>shenbh<span class="tag">&lt;/<span class="name">vendo</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Product and plugin compatibility requirements --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://plugins.jetbrains.com/docs/intellij/plugin-compatibility.html --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">depends</span>&gt;</span>org.jetbrains.android<span class="tag">&lt;/<span class="name">depends</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">depends</span>&gt;</span>org.jetbrains.kotlin<span class="tag">&lt;/<span class="name">depends</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">depends</span>&gt;</span>com.intellij.modules.java<span class="tag">&lt;/<span class="name">depends</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">depends</span>&gt;</span>com.intellij.modules.platform<span class="tag">&lt;/<span class="name">depends</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Integrates Volume Snapshot Service W10<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">change-notes</span>&gt;</span>Initial release of the plugin.<span class="tag">&lt;/<span class="name">change-notes</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">extensions</span> <span class="attr">defaultExtensionNs</span>=<span class="string">&quot;com.intellij&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">applicationService</span> <span class="attr">serviceImplementation</span>=<span class="string">&quot;com.xm597.app.template.services.MyApplicationService&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">projectService</span> <span class="attr">serviceImplementation</span>=<span class="string">&quot;com.xm597.app.template.services.MyProjectService&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">extensions</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">applicationListeners</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">listener</span> <span class="attr">class</span>=<span class="string">&quot;com.xm597.app.template.listeners.MyProjectManagerListener&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">topic</span>=<span class="string">&quot;com.intellij.openapi.project.ProjectManagerListener&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">applicationListeners</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">extensions</span> <span class="attr">defaultExtensionNs</span>=<span class="string">&quot;com.android.tools.idea.wizard.template&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;wizardTemplateProvider implementation=&quot;other.temparms.ArmsPluginTemplateProviderImpl&quot; /&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;wizardTemplateProvider implementation=&quot;other.xm597.Xm597PluginTemplateProviderImpl&quot; /&gt;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">wizardTemplateProvider</span> <span class="attr">implementation</span>=<span class="string">&quot;other.mvvm.SamplePluginTemplateProviderImpl&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">extensions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">idea-plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="具体模板详情"><a href="#具体模板详情" class="headerlink" title="具体模板详情"></a>具体模板详情</h3><p>以<code>src/main/kotlin/other/mvvm</code>为例</p>
<p><code>src/main/kotlin/other/mvvm/SamplePluginTemplateProviderImpl.kt</code></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> other.mvvm</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.android.tools.idea.wizard.template.Template</span><br><span class="line"><span class="keyword">import</span> com.android.tools.idea.wizard.template.WizardTemplateProvider</span><br><span class="line"><span class="keyword">import</span> other.mvvm.activity.mvvmActivityTemplate</span><br><span class="line"><span class="comment">//import other.mvvm.fragment.mvvmFragmentTemplate</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SamplePluginTemplateProviderImpl</span> : <span class="type">WizardTemplateProvider</span></span>() &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">getTemplates</span><span class="params">()</span></span>: List&lt;Template&gt; = listOf(</span><br><span class="line">            <span class="comment">// activity的模板</span></span><br><span class="line">            mvvmActivityTemplate,</span><br><span class="line">            <span class="comment">// fragment的模板</span></span><br><span class="line"><span class="comment">//            mvvmFragmentTemplate</span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>src/main/kotlin/other/mvvm/activity/mvvmActivityTemplate.kt</code></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> other.mvvm.activity</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.android.tools.idea.wizard.template.*</span><br><span class="line"><span class="keyword">import</span> com.android.tools.idea.wizard.template.impl.activities.common.MIN_API</span><br><span class="line"><span class="keyword">import</span> com.android.tools.idea.wizard.template.impl.defaultPackageNameParameter</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> mvvmActivityTemplate</span><br><span class="line">    <span class="keyword">get</span>() = template &#123;</span><br><span class="line">        revision = <span class="number">1</span></span><br><span class="line">        name = <span class="string">&quot;MVVM Activity&quot;</span></span><br><span class="line">        description = <span class="string">&quot;适用于BigaDemoMVVM框架的Activity&quot;</span></span><br><span class="line">        minApi = MIN_API</span><br><span class="line">        minBuildApi = MIN_API</span><br><span class="line"></span><br><span class="line">        category = Category.Other</span><br><span class="line">        formFactor = FormFactor.Mobile</span><br><span class="line">        screens = listOf(WizardUiContext.ActivityGallery, WizardUiContext.MenuEntry, WizardUiContext.NewProject, WizardUiContext.NewModule)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">lateinit</span> <span class="keyword">var</span> layoutName: StringParameter</span><br><span class="line">        <span class="keyword">val</span> activityClass = stringParameter &#123;</span><br><span class="line">            name = <span class="string">&quot;Activity Name&quot;</span></span><br><span class="line">            default = <span class="string">&quot;Main&quot;</span></span><br><span class="line">            help = <span class="string">&quot;只输入名字，不要包含Activity&quot;</span></span><br><span class="line">            constraints = listOf(Constraint.NONEMPTY)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        layoutName = stringParameter &#123;</span><br><span class="line">            name = <span class="string">&quot;Layout Name&quot;</span></span><br><span class="line">            default = <span class="string">&quot;activity_main&quot;</span></span><br><span class="line">            help = <span class="string">&quot;请输入布局名字&quot;</span></span><br><span class="line">            constraints = listOf(Constraint.LAYOUT, Constraint.UNIQUE, Constraint.NONEMPTY)</span><br><span class="line">            suggest = &#123;<span class="string">&quot;<span class="subst">$&#123;activityToLayout(activityClass.value.toLowerCase())&#125;</span>&quot;</span>&#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">val</span> packageName = defaultPackageNameParameter</span><br><span class="line"></span><br><span class="line">        widgets(</span><br><span class="line">                TextFieldWidget(activityClass),</span><br><span class="line">                TextFieldWidget(layoutName),</span><br><span class="line">                PackageNameWidget(packageName)</span><br><span class="line">        )</span><br><span class="line">        <span class="comment">//thumb&#123;File(&quot;logo.png&quot;)&#125;</span></span><br><span class="line">        recipe = &#123; <span class="keyword">data</span>: TemplateData -&gt;</span><br><span class="line">            mvvmActivityRecipe(</span><br><span class="line">                 <span class="keyword">data</span> <span class="keyword">as</span> ModuleTemplateData,</span><br><span class="line">                    activityClass.value,</span><br><span class="line">                    layoutName.value,</span><br><span class="line">                    packageName.value</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> defaultPackageNameParameter</span><br><span class="line">    <span class="keyword">get</span>() = stringParameter &#123;</span><br><span class="line">        name = <span class="string">&quot;Package Name&quot;</span></span><br><span class="line">        visible = &#123;!isNewModule&#125;</span><br><span class="line">        default = <span class="string">&quot;com.mycompany.myapp&quot;</span></span><br><span class="line">        constraints = listOf(Constraint.PACKAGE)</span><br><span class="line">        suggest = &#123;packageName&#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><code>src/main/kotlin/other/mvvm/activity/mvvmActivityRecipe.kt</code></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> other.mvvm.activity</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.android.tools.idea.wizard.template.ModuleTemplateData</span><br><span class="line"><span class="keyword">import</span> com.android.tools.idea.wizard.template.RecipeExecutor</span><br><span class="line"><span class="keyword">import</span> other.mvvm.activity.res.layout.mvvmActivityXml</span><br><span class="line"><span class="keyword">import</span> other.mvvm.activity.src.app_package.mvvmActivityKt</span><br><span class="line"><span class="keyword">import</span> other.mvvm.activity.src.app_package.mvvmRepository</span><br><span class="line"><span class="keyword">import</span> other.mvvm.activity.src.app_package.mvvmViewModel</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> RecipeExecutor.<span class="title">mvvmActivityRecipe</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">        moduleData: <span class="type">ModuleTemplateData</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        activityClass: <span class="type">String</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        layoutName: <span class="type">String</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        packageName: <span class="type">String</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>&#123;</span><br><span class="line">    <span class="keyword">val</span> (projectData, srcOut, resOut) = moduleData</span><br><span class="line">    <span class="keyword">val</span> ktOrJavaExt = projectData.language.extension</span><br><span class="line">    <span class="comment">// generateManifest(</span></span><br><span class="line">    <span class="comment">//   moduleData = moduleData,</span></span><br><span class="line">    <span class="comment">//   activityClass = &quot;$&#123;activityClass&#125;Activity&quot;,</span></span><br><span class="line">    <span class="comment">//   activityTitle = activityClass,</span></span><br><span class="line">    <span class="comment">//   packageName = packageName,</span></span><br><span class="line">    <span class="comment">//   isLauncher = false,</span></span><br><span class="line">    <span class="comment">//   hasNoActionBar = false,</span></span><br><span class="line">    <span class="comment">//   generateActivityTitle = true,</span></span><br><span class="line">    <span class="comment">//   requireTheme = false,</span></span><br><span class="line">    <span class="comment">//   useMaterial2 = false</span></span><br><span class="line">    <span class="comment">// )</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> mvvmActivity = mvvmActivityKt(projectData.applicationPackage, activityClass, layoutName, packageName)</span><br><span class="line">    <span class="comment">//保存Activity</span></span><br><span class="line">    save(mvvmActivity, srcOut.resolve(<span class="string">&quot;<span class="subst">$&#123;activityClass&#125;</span>Activity.<span class="subst">$&#123;ktOrJavaExt&#125;</span>&quot;</span>))</span><br><span class="line">    <span class="comment">// 保存xml</span></span><br><span class="line">    save(mvvmActivityXml(packageName, activityClass), resOut.resolve(<span class="string">&quot;layout/<span class="subst">$&#123;layoutName&#125;</span>.xml&quot;</span>))</span><br><span class="line">    <span class="comment">// 保存viewmodel</span></span><br><span class="line">    save(mvvmViewModel(packageName, activityClass), srcOut.resolve(<span class="string">&quot;<span class="subst">$&#123;activityClass&#125;</span>ViewModel.<span class="subst">$&#123;ktOrJavaExt&#125;</span>&quot;</span>))</span><br><span class="line">    <span class="comment">// 保存repository</span></span><br><span class="line">    save(mvvmRepository(packageName, activityClass), srcOut.resolve(<span class="string">&quot;<span class="subst">$&#123;activityClass&#125;</span>Repository.<span class="subst">$&#123;ktOrJavaExt&#125;</span>&quot;</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>src/main/kotlin/other/mvvm/activity/res/layout/mvvmActivityXml.kt</code></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> other.mvvm.activity.res.layout</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">mvvmActivityXml</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">        packageName: <span class="type">String</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        activityClass: <span class="type">String</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span> = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="string">&lt;layout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> &lt;data&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> &lt;/data&gt;</span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string"> &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="line"><span class="string"> xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;</span></span><br><span class="line"><span class="string"> xmlns:tools=&quot;http://schemas.android.com/tools&quot;</span></span><br><span class="line"><span class="string"> android:layout_width=&quot;match_parent&quot;</span></span><br><span class="line"><span class="string"> android:layout_height=&quot;match_parent&quot;</span></span><br><span class="line"><span class="string"> tools:context=&quot;<span class="subst">$&#123;packageName&#125;</span>.<span class="subst">$&#123;activityClass&#125;</span>Activity&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</span></span><br><span class="line"><span class="string">&lt;/layout&gt;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p><code>src/main/kotlin/other/mvvm/activity/src/app_package/mvvmActivity.kt</code></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> other.mvvm.activity.src.app_package</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">mvvmActivityKt</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">        applicationPackage:<span class="type">String</span>?,</span></span></span><br><span class="line"><span class="params"><span class="function">        activityClass:<span class="type">String</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        layoutName:<span class="type">String</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        packageName:<span class="type">String</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>=<span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">package <span class="subst">$&#123;packageName&#125;</span></span></span><br><span class="line"><span class="string">import android.os.Bundle</span></span><br><span class="line"><span class="string">import com.bigademo.baselib.base.BaseActivity</span></span><br><span class="line"><span class="string">import <span class="subst">$&#123;applicationPackage&#125;</span>.R</span></span><br><span class="line"><span class="string">import <span class="subst">$&#123;applicationPackage&#125;</span>.BR;</span></span><br><span class="line"><span class="string">import <span class="subst">$&#123;applicationPackage&#125;</span>.databinding.Activity<span class="subst">$&#123;activityClass&#125;</span>Binding</span></span><br><span class="line"><span class="string">class <span class="subst">$&#123;activityClass&#125;</span>Activity : BaseActivity&lt;<span class="subst">$&#123;activityClass&#125;</span>ViewModel, Activity<span class="subst">$&#123;activityClass&#125;</span>Binding&gt;() &#123;</span></span><br><span class="line"><span class="string"> override fun getContentView(): Int &#123;</span></span><br><span class="line"><span class="string">  return R.layout.<span class="subst">$&#123;layoutName&#125;</span></span></span><br><span class="line"><span class="string"> &#125;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> override fun init(savedInstanceState: Bundle?) &#123;</span></span><br><span class="line"><span class="string">  super.init(savedInstanceState)</span></span><br><span class="line"><span class="string">  isShowTopBar = false</span></span><br><span class="line"><span class="string"> &#125;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> override fun initViewModel() &#123;</span></span><br><span class="line"><span class="string">  viewModel = <span class="subst">$&#123;activityClass&#125;</span>ViewModel()</span></span><br><span class="line"><span class="string"> &#125;</span></span><br><span class="line"><span class="string"> /**</span></span><br><span class="line"><span class="string">  * 监听数据的变化</span></span><br><span class="line"><span class="string">  */</span></span><br><span class="line"><span class="string"> override fun observe() &#123;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> &#125;</span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string"> /**</span></span><br><span class="line"><span class="string">  * 控件的点击事件</span></span><br><span class="line"><span class="string">  */</span></span><br><span class="line"><span class="string"> override fun onClick() &#123;</span></span><br><span class="line"><span class="string"> &#125;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> override fun initData() &#123;</span></span><br><span class="line"><span class="string">  super.initData()</span></span><br><span class="line"><span class="string"> &#125;</span></span><br><span class="line"><span class="string"> override fun initVariableId(): Int &#123;</span></span><br><span class="line"><span class="string">  TODO(&quot;Not yet implemented&quot;)</span></span><br><span class="line"><span class="string"> &#125;</span></span><br><span class="line"><span class="string"> &#125; </span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p><code>src/main/kotlin/other/mvvm/activity/src/app_package/mvvmRepository.kt</code></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> other.mvvm.activity.src.app_package</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">mvvmRepository</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">        packageName: <span class="type">String</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        activityClass: <span class="type">String</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>=<span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">package <span class="subst">$&#123;packageName&#125;</span></span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">import androidx.lifecycle.MutableLiveData</span></span><br><span class="line"><span class="string">import com.shide.baselib.base.basemvvm.BaseRepository</span></span><br><span class="line"><span class="string">import com.shide.baselib.base.basemvvm.BaseViewModel</span></span><br><span class="line"><span class="string">import com.shide.baselib.net.exception.ShideApiException</span></span><br><span class="line"><span class="string">import kotlinx.coroutines.CoroutineScope</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">class <span class="subst">$&#123;activityClass&#125;</span>Repository(</span></span><br><span class="line"><span class="string"> baseViewModel: BaseViewModel,</span></span><br><span class="line"><span class="string"> coroutineScope: CoroutineScope,</span></span><br><span class="line"><span class="string"> errorLiveData: MutableLiveData&lt;ShideApiException&gt;</span></span><br><span class="line"><span class="string">) : BaseRepository(baseViewModel, coroutineScope, errorLiveData) &#123;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p><code>src/main/kotlin/other/mvvm/activity/src/app_package/mvvmViewModel.kt</code></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> other.mvvm.activity.src.app_package</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">mvvmViewModel</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">        packageName:<span class="type">String</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        activityClass:<span class="type">String</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>=<span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">package <span class="subst">$&#123;packageName&#125;</span></span></span><br><span class="line"><span class="string">import androidx.lifecycle.viewModelScope</span></span><br><span class="line"><span class="string">import com.bigademo.baselib.base.basemvvm.BaseViewModel</span></span><br><span class="line"><span class="string">class <span class="subst">$&#123;activityClass&#125;</span>ViewModel : BaseViewModel() &#123;</span></span><br><span class="line"><span class="string"> private val repo by lazy &#123; <span class="subst">$&#123;activityClass&#125;</span>Repository(this, viewModelScope, errorLiveData) &#125;</span></span><br><span class="line"><span class="string">&#125; </span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>




      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div></div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>Donate</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.jpg" alt=" WeChat Pay"/>
        <p>WeChat Pay</p>
      </div>
    

    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/%E5%B7%A5%E5%85%B7/" rel="tag"># 工具</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/posts/339737483/" rel="next" title="Python思维导图">
                <i class="fa fa-chevron-left"></i> Python思维导图
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/posts/1947707642/" rel="prev" title="AndroidStudio相关">
                AndroidStudio相关 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="" />
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">95</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">15</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">28</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="mailto:shenbh@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://blog.csdn.net/ptwenzi?spm=1010.2135.3001.5113" target="_blank" title="CSDN">
                      
                        <i class="fa fa-fw fa-clone"></i>CSDN</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/shenbh" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://gitee.com/shen_bh" target="_blank" title="Gitee">
                      
                        <i class="fa fa-fw fa-git"></i>Gitee</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#AS-%E5%BF%AB%E6%8D%B7%E9%94%AE"><span class="nav-text">AS 快捷键</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E4%B8%AD%E5%BF%AB%E6%8D%B7%E9%94%AE-Live-Templates"><span class="nav-text">代码中快捷键(Live Templates)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A8%A1%E6%9D%BF%E5%8F%98%E9%87%8F%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%90%AB%E4%B9%89%E8%A1%A8"><span class="nav-text">模板变量表达式含义表</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#shenbh"><span class="nav-text">shenbh</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E6%B3%A8%E9%87%8A"><span class="nav-text">* 方法注释</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#add-%E2%80%9C%E5%A2%9E%E5%8A%A0%E2%80%9D%E6%B3%A8%E9%87%8A"><span class="nav-text">add “增加”注释</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#anno-annotation%E6%B7%BB%E5%8A%A0%E6%96%B9%E6%B3%95%E6%B3%A8%E9%87%8A"><span class="nav-text">anno annotation添加方法注释</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#db-%E6%B7%BB%E5%8A%A0switch%E7%9A%84%E9%BB%98%E8%AE%A4%E9%A1%B9"><span class="nav-text">db 添加switch的默认项</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#doublesingleton-%E5%8F%8C%E9%87%8D%E9%94%81%E5%AE%9A%E5%88%9B%E5%BB%BA%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%EF%BC%8C%E5%BC%80%E9%94%80%E8%BE%83%E5%A4%A7"><span class="nav-text">doublesingleton 双重锁定创建单例模式，开销较大</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#doubleSingleWithContext-%E5%8F%8C%E9%87%8D%E9%94%81%E5%AE%9A%E5%88%9B%E5%BB%BA%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%EF%BC%8C%E5%B8%A6Context"><span class="nav-text">doubleSingleWithContext 双重锁定创建单例模式，带Context</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#hand-%E5%88%9B%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84Handler"><span class="nav-text">hand 创建自己的Handler</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mdf-%E2%80%9C%E4%BF%AE%E6%94%B9%E2%80%9D%E6%B3%A8%E9%87%8A"><span class="nav-text">mdf “修改”注释</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#newFragment-%E5%88%9B%E5%BB%BAfragment"><span class="nav-text">newFragment 创建fragment</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#note-%E7%B1%BB%E6%B3%A8%E9%87%8A"><span class="nav-text">note 类注释</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#staticClassSingleton-%E9%9D%99%E6%80%81%E5%86%85%E9%83%A8%E7%B1%BB%E5%8D%95%E4%BE%8B%EF%BC%8C%E6%97%A0%E6%B3%95%E4%BC%A0%E5%8F%82"><span class="nav-text">staticClassSingleton 静态内部类单例，无法传参</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ma-%E2%80%9CModule-annotations%E6%A8%A1%E5%9D%97%E6%B3%A8%E9%87%8A%E2%80%9D"><span class="nav-text">ma “Module annotations模块注释”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#psv-%E2%80%9Cpublic-static-void%E2%80%9D"><span class="nav-text">psv  “public static void”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sw-%E2%80%9Cswitch%E2%80%9D"><span class="nav-text">sw “switch”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#todo-%E6%B7%BB%E5%8A%A0-x2F-x2F-TODO"><span class="nav-text">todo 添加 &#x2F;&#x2F; TODO</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#try-%E2%80%9Ccreat-try-catch%E2%80%9D"><span class="nav-text">try “creat try-catch”</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#u1city"><span class="nav-text">u1city</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#layout-%E2%80%9Ccreate-layout-res-id-const%E2%80%9D"><span class="nav-text">layout “create layout res id const”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#lth-%E2%80%9Cget-thumbnail-and-set%E2%80%9D"><span class="nav-text">lth “get thumbnail and set”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mrx-%E2%80%9CMVP%E4%B8%AD-m%E5%B1%82-RxRequest%E2%80%9D"><span class="nav-text">mrx “MVP中 m层 RxRequest”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ob"><span class="nav-text">ob</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#prx-%E2%80%9CMVP%E4%B8%AD-p%E5%B1%82Rx%E8%AF%B7%E6%B1%82%E2%80%9D"><span class="nav-text">prx “MVP中 p层Rx请求”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rxrequest-%E2%80%9Cp%E5%B1%82%E4%BD%BF%E7%94%A8%E3%80%82do-request-by-rx%E2%80%9D"><span class="nav-text">rxrequest “p层使用。do request by rx”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rgc-%E2%80%9Cget-Color-from-resource%E2%80%9D"><span class="nav-text">rgc “get Color from resource”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rgd-%E2%80%9Cget-a-Drawable-from-resources%E2%80%9D"><span class="nav-text">rgd “get a Drawable from resources”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rgs-%E2%80%9Cget-String-from-resource%E2%80%9D"><span class="nav-text">rgs “get String from resource”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rv-%E2%80%9Cinit-RecyclerView%E2%80%9D"><span class="nav-text">rv “init RecyclerView”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#srl-%E2%80%9Cinit-SmartRefreshLayout%E2%80%9D"><span class="nav-text">srl “init SmartRefreshLayout”</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ArmsMVP"><span class="nav-text">ArmsMVP</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#armsContract-MVPArms%E7%9A%84Contract"><span class="nav-text">armsContract  MVPArms的Contract</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#armsmrx-MVPArms%E7%9A%84M%E5%B1%82Rx%E8%AF%B7%E6%B1%82"><span class="nav-text">armsmrx  MVPArms的M层Rx请求</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#armsprx-MVPArms%E7%9A%84P%E5%B1%82Rx%E8%AF%B7%E6%B1%82"><span class="nav-text">armsprx   MVPArms的P层Rx请求</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tmpdata-%E4%B8%B4%E6%97%B6%E6%95%B0%E6%8D%AE"><span class="nav-text">tmpdata 临时数据</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#xm597"><span class="nav-text">xm597</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#gerenActivity-%E5%88%9B%E5%BB%BA%E4%B8%AA%E4%BA%BAActivity"><span class="nav-text">gerenActivity 创建个人Activity</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gerenBean-%E5%88%9B%E5%BB%BA%E4%B8%AA%E4%BA%BABean"><span class="nav-text">gerenBean 创建个人Bean</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gerenContract-%E5%88%9B%E5%BB%BA%E4%B8%AA%E4%BA%BAContract"><span class="nav-text">gerenContract 创建个人Contract</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gerenFragment-%E5%88%9B%E5%BB%BA%E4%B8%AA%E4%BA%BAFragment"><span class="nav-text">gerenFragment 创建个人Fragment</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gerenParams-%E5%88%9B%E5%BB%BA%E4%B8%AA%E4%BA%BAParams"><span class="nav-text">gerenParams 创建个人Params</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gerenPresenter-%E5%88%9B%E5%BB%BA%E4%B8%AA%E4%BA%BAPresenter"><span class="nav-text">gerenPresenter 创建个人Presenter</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gerenRequest-%E5%88%9B%E5%BB%BA%E4%B8%AA%E4%BA%BARequest"><span class="nav-text">gerenRequest 创建个人Request</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gerenXML-%E5%88%9B%E5%BB%BA%E4%B8%AA%E4%BA%BAXML"><span class="nav-text">gerenXML 创建个人XML</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ob-xm597-persenter%E5%86%85%E6%9F%90%E6%96%B9%E6%B3%95%E7%9A%84%E8%AF%B7%E6%B1%82"><span class="nav-text">ob xm597 persenter内某方法的请求</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E7%B1%BB%E6%97%B6%E7%9A%84%E7%B1%BB%E5%9E%8B-File-and-Code-Templates"><span class="nav-text">创建类时的类型(File and Code Templates)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#java%E7%B1%BB%E5%9E%8B"><span class="nav-text">java类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#DoubleCheckSingleton"><span class="nav-text">DoubleCheckSingleton</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#u1city-1"><span class="nav-text">u1city</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#LdyActivity"><span class="nav-text">LdyActivity</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#LdyFragments"><span class="nav-text">LdyFragments</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#MvpBean"><span class="nav-text">MvpBean</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#MvpContract"><span class="nav-text">MvpContract</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#MvpDgActivity"><span class="nav-text">MvpDgActivity</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#MvpItemAdapter"><span class="nav-text">MvpItemAdapter</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#MvpLdyActivity"><span class="nav-text">MvpLdyActivity</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#MvpLdyFragment"><span class="nav-text">MvpLdyFragment</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#MvpModel"><span class="nav-text">MvpModel</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#MvpPresenter"><span class="nav-text">MvpPresenter</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#StaticClassSingleton"><span class="nav-text">StaticClassSingleton</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Arms"><span class="nav-text">Arms</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ArmsActivity"><span class="nav-text">ArmsActivity</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ArmsAdapter"><span class="nav-text">ArmsAdapter</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ArmsAutoView"><span class="nav-text">ArmsAutoView</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ArmsComponent"><span class="nav-text">ArmsComponent</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ArmsContract"><span class="nav-text">ArmsContract</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ArmsFragment"><span class="nav-text">ArmsFragment</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ArmsModel"><span class="nav-text">ArmsModel</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ArmsModule"><span class="nav-text">ArmsModule</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ArmsPresenter"><span class="nav-text">ArmsPresenter</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8D%87%E7%BA%A7%E7%89%88ArmsComponent"><span class="nav-text">升级版ArmsComponent</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8D%87%E7%BA%A7%E7%89%88ArmsModule"><span class="nav-text">升级版ArmsModule</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8D%87%E7%BA%A7%E7%89%88ArmsActivity"><span class="nav-text">升级版ArmsActivity</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#xml%E7%B1%BB%E5%9E%8B"><span class="nav-text">xml类型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#mvp-%E7%9A%84-activity-layoutname"><span class="nav-text">mvp 的 activity_${layoutname}</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#LdyFragment%E7%9A%84%E5%B8%83%E5%B1%80%E6%96%87%E4%BB%B6-fragment-layoutname"><span class="nav-text">LdyFragment的布局文件 fragment_${layoutname}</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#AS%E8%87%AA%E5%B7%B1%E5%86%99%E6%A8%A1%E6%9D%BF"><span class="nav-text">AS自己写模板</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#module%E7%BA%A7%E6%A8%A1%E6%9D%BF"><span class="nav-text">module级模板</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Activity%E7%BA%A7%E6%A8%A1%E6%9D%BF"><span class="nav-text">Activity级模板</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9A%E4%B9%89%E6%A8%A1%E6%9D%BF"><span class="nav-text">定义模板</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%9F%E6%88%90%E6%A8%A1%E6%9D%BF"><span class="nav-text">生成模板</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9template-xml%E6%96%87%E4%BB%B6"><span class="nav-text">修改template.xml文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9AndroidManifest-xml%E6%96%87%E4%BB%B6"><span class="nav-text">修改AndroidManifest.xml文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A2%9E%E5%8A%A0Kotlin%E6%A8%A1%E6%9D%BF"><span class="nav-text">增加Kotlin模板</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#AS4-1%E4%B8%8A%E5%86%99%E6%A8%A1%E6%9D%BF%E3%80%90%E6%96%B0%E6%96%B9%E5%BC%8F%E3%80%91"><span class="nav-text">AS4.1上写模板【新方式】</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A4%EF%BC%9A"><span class="nav-text">步骤：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%EF%BC%9A"><span class="nav-text">注意：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E7%BB%93%E6%9E%84%E6%88%AA%E5%9B%BE"><span class="nav-text">代码结构截图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81%EF%BC%88%E5%8A%A8%E8%BF%87%E7%9A%84%EF%BC%89%EF%BC%9A"><span class="nav-text">完整代码（动过的）：</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E7%9B%B8%E5%85%B3"><span class="nav-text">配置相关</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B7%E4%BD%93%E6%A8%A1%E6%9D%BF%E8%AF%A6%E6%83%85"><span class="nav-text">具体模板详情</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2018 &mdash; <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">阿炳</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('-1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

  
  <style>
    .copy-btn {
      display: inline-block;
      padding: 6px 12px;
      font-size: 13px;
      font-weight: 700;
      line-height: 20px;
      color: #333;
      white-space: nowrap;
      vertical-align: middle;
      cursor: pointer;
      background-color: #eee;
      background-image: linear-gradient(#fcfcfc, #eee);
      border: 1px solid #d5d5d5;
      border-radius: 3px;
      user-select: none;
      outline: 0;
    }

    .highlight-wrap .copy-btn {
      transition: opacity .3s ease-in-out;
      opacity: 0;
      padding: 2px 6px;
      position: absolute;
      right: 4px;
      top: 8px;
    }

    .highlight-wrap:hover .copy-btn,
    .highlight-wrap .copy-btn:focus {
      opacity: 1
    }

    .highlight-wrap {
      position: relative;
    }
  </style>
  
  <script>
    $('.highlight').each(function (i, e) {
      var $wrap = $('<div>').addClass('highlight-wrap')
      $(e).after($wrap)
      $wrap.append($('<button>').addClass('copy-btn').append('Copy').on('click', function (e) {
        var code = $(this).parent().find('.code').find('.line').map(function (i, e) {
          return $(e).text()
        }).toArray().join('\n')
        var ta = document.createElement('textarea')
        document.body.appendChild(ta)
        ta.style.position = 'absolute'
        ta.style.top = '0px'
        ta.style.left = '0px'
        ta.value = code
        ta.select()
        ta.focus()
        var result = document.execCommand('copy')
        document.body.removeChild(ta)
        
          if(result)$(this).text('Copied')
          else $(this).text('Copy failed')
        
        $(this).blur()
      })).on('mouseleave', function (e) {
        var $b = $(this).find('.copy-btn')
        setTimeout(function () {
          $b.text('Copy')
        }, 300)
      }).append(e)
    })
  </script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/clicklove.js"></script>